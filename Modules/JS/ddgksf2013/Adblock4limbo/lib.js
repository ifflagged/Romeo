!function(){var e,t,r,n={158:function(e,t,r){var n=r(5842),i=r(8833),o=r(7835)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},277:function(e,t,r){"use strict";var n=r(1339);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},301:function(e,t,r){var n=r(3422),i=r(1339),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(715)(Function.call,r(5714).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},420:function(e,t,r){"use strict";var n=r(6130),i=r(2629)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(9553)("includes")},555:function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},600:function(e,t,r){var n=r(6045)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(s){}return r}},633:function(e,t,r){var n=r(5860),i=r(4396),o=r(848).f;e.exports=function(e){return function(t){for(var r,s=i(t),a=n(s),u=a.length,l=0,c=[];u>l;)o.call(s,r=a[l++])&&c.push(e?[r,s[r]]:s[r]);return c}}},662:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".icon{height:17px;width:17px}",""]),t.A=i},715:function(e,t,r){var n=r(3062);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},807:function(e,t,r){var n=r(7551),i=r(5829).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,u="process"==r(2218)(s);e.exports=function(){var e,t,r,l=function(){var n,i;for(u&&(n=s.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(o){throw e?r():t=void 0,o}}t=void 0,n&&n.enter()};if(u)r=function(){s.nextTick(l)};else if(!o||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var c=a.resolve(void 0);r=function(){c.then(l)}}else r=function(){i.call(n,l)};else{var f=!0,d=document.createTextNode("");new o(l).observe(d,{characterData:!0}),r=function(){d.data=f=!f}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},848:function(e,t){t.f={}.propertyIsEnumerable},918:function(e,t,r){var n=r(7551),i=r(4944),o=r(5842),s=r(3052)("src"),a="toString",u=Function[a],l=(""+u).split(a);r(9935).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,r,a){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(o(r,s)||i(r,s,e[t]?""+e[t]:l.join(String(t)))),e===n?e[t]=r:a?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,a,(function(){return"function"==typeof this&&this[s]||u.call(this)}))},924:function(e,t,r){var n=r(1339),i=r(9407),o=r(7019),s=r(7835)("IE_PROTO"),a=function(){},u="prototype",l=function(){var e,t=r(2567)("iframe"),n=o.length;for(t.style.display="none",r(2121).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l[u][o[n]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(a[u]=n(e),r=new a,a[u]=null,r[s]=e):r=l(),void 0===t?r:i(r,t)}},973:function(e,t,r){var n=r(6130);n(n.S,"Object",{setPrototypeOf:r(301).set})},1085:function(e,t,r){var n=r(7551),i=r(9935),o=r(5545),s=r(4851),a=r(8944).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},1103:function(e,t,r){var n=r(2218),i=r(6045)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},1139:function(e,t,r){var n=r(7551).navigator;e.exports=n&&n.userAgent||""},1194:function(e,t,r){var n=r(4396),i=r(4912).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return s.slice()}}(e):i(n(e))}},1203:function(e,t,r){var n=r(6130);n(n.S+n.F,"Object",{assign:r(3345)})},1302:function(e,t,r){r(3653)("replace",2,(function(e,t,r){return[function(n,i){"use strict";var o=e(this),s=null==n?void 0:n[t];return void 0!==s?s.call(n,o,i):r.call(String(o),n,i)},r]}))},1323:function(e,t,r){var n=r(1339);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(s){var o=e.return;throw void 0!==o&&n(o.call(e)),s}}},1339:function(e,t,r){var n=r(3422);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},1373:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,'.root--JrRdn{color:inherit;position:relative;display:block;height:100%;width:100%;overflow:hidden;background-position:center;background-size:cover;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);font-family:Arimo,sans-serif}.img--YWbK3{backdrop-filter:blur(5px);height:100%;width:100%}.background--CX6MD{position:absolute;left:0;right:0;top:0;bottom:0;background-position:center;background-size:cover;-webkit-filter:blur(8px);filter:blur(8px)}.with-shadow--z1XLV::after{background:-webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(transparent), color-stop(rgba(0, 0, 0, 0.2)), to(rgba(0, 0, 0, 0.9)));background:linear-gradient(transparent, transparent, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.9));bottom:0;content:" ";display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}.header--COb0Z{position:absolute;z-index:2;top:6px;left:0;right:0;container-type:inline-size}.footer--AApH4{position:absolute;bottom:0;left:0;right:0}.footer--AApH4>*{bottom:0}.play-button--GJikc{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}',""]),i.locals={root:"root--JrRdn",img:"img--YWbK3",background:"background--CX6MD","with-shadow":"with-shadow--z1XLV",withShadow:"with-shadow--z1XLV",header:"header--COb0Z",footer:"footer--AApH4","play-button":"play-button--GJikc",playButton:"play-button--GJikc"},t.A=i},1385:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--VkRIi{opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-family:Arimo,sans-serif;text-align:center;position:absolute;top:0;text-shadow:0 0 9px #000;-webkit-animation:fade-in--GiAtF .5s .8s forwards;animation:fade-in--GiAtF .5s .8s forwards}.head--GQ8uD{font-size:1.8em;margin-bottom:1.8em}@-webkit-keyframes fade-in--GiAtF{from{opacity:0}to{opacity:1}}@keyframes fade-in--GiAtF{from{opacity:0}to{opacity:1}}",""]),i.locals={root:"root--VkRIi","fade-in":"fade-in--GiAtF",fadeIn:"fade-in--GiAtF",head:"head--GQ8uD"},t.A=i},1412:function(e,t,r){var n=r(6130);n(n.S,"Number",{isNaN:function(e){return e!=e}})},1457:function(e,t,r){"use strict";var n=r(1103),i={};i[r(6045)("toStringTag")]="z",i+""!="[object z]"&&r(918)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},1482:function(e,t,r){var n=r(8074),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},1520:function(e){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},1627:function(e,t,r){var n=r(8074),i=r(555);e.exports=function(e){return function(t,r){var o,s,a=String(i(t)),u=n(r),l=a.length;return u<0||u>=l?e?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},1771:function(e,t,r){"use strict";r(5605);var n=r(1339),i=r(277),o=r(8968),s="toString",a=/./[s],u=function(e){r(918)(RegExp.prototype,s,e,!0)};r(4315)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?u((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):a.name!=s&&u((function(){return a.call(this)}))},1804:function(e,t,r){"use strict";var n=r(6130),i=r(2121),o=r(2218),s=r(6966),a=r(1482),u=[].slice;n(n.P+n.F*r(4315)((function(){i&&u.call(i)})),"Array",{slice:function(e,t){var r=a(this.length),n=o(this);if(t=void 0===t?r:t,"Array"==n)return u.call(this,e,t);for(var i=s(e,r),l=s(t,r),c=a(l-i),f=new Array(c),d=0;d<c;d++)f[d]="String"==n?this.charAt(i+d):this[i+d];return f}})},1842:function(e,t,r){r(3653)("split",2,(function(e,t,n){"use strict";var i=r(8560),o=n,s=[].push,a="split",u="length",l="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[u]||2!="ab"[a](/(?:ab)*/)[u]||4!="."[a](/(.?)(.?)/)[u]||"."[a](/()()/)[u]>1||""[a](/.?/)[u]){var c=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return o.call(r,e,t);var n,a,f,d,h,p=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,y=void 0===t?4294967295:t>>>0,_=new RegExp(e.source,g+"g");for(c||(n=new RegExp("^"+_.source+"$(?!\\s)",g));(a=_.exec(r))&&!((f=a.index+a[0][u])>m&&(p.push(r.slice(m,a.index)),!c&&a[u]>1&&a[0].replace(n,(function(){for(h=1;h<arguments[u]-2;h++)void 0===arguments[h]&&(a[h]=void 0)})),a[u]>1&&a.index<r[u]&&s.apply(p,a.slice(1)),d=a[0][u],m=f,p[u]>=y));)_[l]===a.index&&_[l]++;return m===r[u]?!d&&_.test("")||p.push(""):p.push(r.slice(m)),p[u]>y?p.slice(0,y):p}}else"0"[a](void 0,0)[u]&&(n=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(r,i){var o=e(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,o,i):n.call(String(o),r,i)},n]}))},1849:function(e,t,r){var n=r(1339),i=r(3062),o=r(6045)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[o])?t:i(r)}},1947:function(e,t,r){r(3653)("match",1,(function(e,t,r){return[function(r){"use strict";var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]}))},1967:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var u=[].concat(e[a]);n&&i[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},1972:function(e,t,r){"use strict";r(6483)("big",(function(e){return function(){return e(this,"big","","")}}))},2121:function(e,t,r){var n=r(7551).document;e.exports=n&&n.documentElement},2198:function(e,t,r){"use strict";var n=r(1627)(!0);r(5308)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},2218:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},2567:function(e,t,r){var n=r(3422),i=r(7551).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},2606:function(e,t,r){"use strict";var n=r(9553),i=r(9233),o=r(6249),s=r(4396);e.exports=r(5308)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},2629:function(e,t,r){var n=r(4396),i=r(1482),o=r(6966);e.exports=function(e){return function(t,r,s){var a,u=n(t),l=i(u.length),c=o(s,l);if(e&&r!=r){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},2714:function(e,t,r){"use strict";var n=r(7551),i=r(5842),o=r(2218),s=r(5723),a=r(6373),u=r(4315),l=r(4912).f,c=r(5714).f,f=r(8944).f,d=r(6902).trim,h="Number",p=n[h],g=p,m=p.prototype,y=o(r(924)(m))==h,_="trim"in String.prototype,v=function(e){var t=a(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,o=(t=_?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var s,u=t.slice(2),l=0,c=u.length;l<c;l++)if((s=u.charCodeAt(l))<48||s>i)return NaN;return parseInt(u,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(y?u((function(){m.valueOf.call(r)})):o(r)!=h)?s(new g(v(t)),r,p):v(t)};for(var b,S=r(8968)?l(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;S.length>E;E++)i(g,b=S[E])&&!i(p,b)&&f(p,b,c(g,b));p.prototype=m,m.constructor=p,r(918)(n,h,p)}},2763:function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},2864:function(e){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},3052:function(e){var t=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+r).toString(36))}},3059:function(e){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},3062:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},3073:function(e,t,r){var n=r(8833),i=r(158);r(6150)("getPrototypeOf",(function(){return function(e){return i(n(e))}}))},3150:function(e,t,r){var n=r(5860),i=r(9883),o=r(848);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,a=r(e),u=o.f,l=0;a.length>l;)u.call(e,s=a[l++])&&t.push(s);return t}},3295:function(e,t,r){var n=r(6249),i=r(6045)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},3345:function(e,t,r){"use strict";var n=r(5860),i=r(9883),o=r(848),s=r(8833),a=r(3750),u=Object.assign;e.exports=!u||r(4315)((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n}))?function(e,t){for(var r=s(e),u=arguments.length,l=1,c=i.f,f=o.f;u>l;)for(var d,h=a(arguments[l++]),p=c?n(h).concat(c(h)):n(h),g=p.length,m=0;g>m;)f.call(h,d=p[m++])&&(r[d]=h[d]);return r}:u},3422:function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},3520:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--LhO1W{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.left--Vf4-s{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-width:0}.left--Vf4-s:only-child{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.right--gI-QO{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:auto}",""]),i.locals={root:"root--LhO1W",left:"left--Vf4-s",right:"right--gI-QO"},t.A=i},3619:function(e,t,r){var n=r(6130),i=r(7859),o=r(4396),s=r(5714),a=r(7524);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=o(e),u=s.f,l=i(n),c={},f=0;l.length>f;)void 0!==(r=u(n,t=l[f++]))&&a(c,t,r);return c}})},3653:function(e,t,r){"use strict";var n=r(4944),i=r(918),o=r(4315),s=r(555),a=r(6045);e.exports=function(e,t,r){var u=a(e),l=r(s,u,""[e]),c=l[0],f=l[1];o((function(){var t={};return t[u]=function(){return 7},7!=""[e](t)}))&&(i(String.prototype,e,c),n(RegExp.prototype,u,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},3711:function(e,t){"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=a(e),s=o[0],u=o[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,u)),c=0,f=u>0?s-4:s;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[c++]=255&t);1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,l=n-i;a<l;a+=s)o.push(u(e,a,a+s>l?l:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3724:function(e,t,r){"use strict";var n=r(6130),i=r(3062),o=r(8833),s=r(4315),a=[].sort,u=[1,2,3];n(n.P+n.F*(s((function(){u.sort(void 0)}))||!s((function(){u.sort(null)}))||!r(8019)(a)),"Array",{sort:function(e){return void 0===e?a.call(o(this)):a.call(o(this),i(e))}})},3750:function(e,t,r){var n=r(2218);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},3847:function(e,t,r){var n;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return function(e,t){var r,n,s,a,u,l,c,f,d,h=1,p=e.length,g="";for(n=0;n<p;n++)if("string"==typeof e[n])g+=e[n];else if("object"==typeof e[n]){if((a=e[n]).keys)for(r=t[h],s=0;s<a.keys.length;s++){if(null==r)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[s],a.keys[s-1]));r=r[a.keys[s]]}else r=a.param_no?t[a.param_no]:t[h++];if(i.not_type.test(a.type)&&i.not_primitive.test(a.type)&&r instanceof Function&&(r=r()),i.numeric_arg.test(a.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(o("[sprintf] expecting number but found %T",r));switch(i.number.test(a.type)&&(f=r>=0),a.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,a.width?parseInt(a.width):0);break;case"e":r=a.precision?parseFloat(r).toExponential(a.precision):parseFloat(r).toExponential();break;case"f":r=a.precision?parseFloat(r).toFixed(a.precision):parseFloat(r);break;case"g":r=a.precision?String(Number(r.toPrecision(a.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=a.precision?r.substring(0,a.precision):r;break;case"t":r=String(!!r),r=a.precision?r.substring(0,a.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=a.precision?r.substring(0,a.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=a.precision?r.substring(0,a.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}i.json.test(a.type)?g+=r:(!i.number.test(a.type)||f&&!a.sign?d="":(d=f?"+":"-",r=r.toString().replace(i.sign,"")),l=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",c=a.width-(d+r).length,u=a.width&&c>0?l.repeat(c):"",g+=a.align?d+r+u:"0"===l?d+u+r:u+d+r)}return g}(function(e){if(a[e])return a[e];var t,r=e,n=[],o=0;for(;r;){if(null!==(t=i.text.exec(r)))n.push(t[0]);else if(null!==(t=i.modulo.exec(r)))n.push("%");else{if(null===(t=i.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var s=[],u=t[2],l=[];if(null===(l=i.key.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(l[1]);""!==(u=u.substring(l[0].length));)if(null!==(l=i.key_access.exec(u)))s.push(l[1]);else{if(null===(l=i.index_access.exec(u)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(l[1])}t[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return a[e]=n}(e),arguments)}function s(e,t){return o.apply(null,[e].concat(t||[]))}var a=Object.create(null);t.sprintf=o,t.vsprintf=s,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=s,void 0===(n=function(){return{sprintf:o,vsprintf:s}}.call(t,r,t,e))||(e.exports=n))}()},3898:function(e,t,r){"use strict";var n=r(6130),i=r(1482),o=r(5207),s="startsWith",a=""[s];n(n.P+n.F*r(8256)(s),"String",{startsWith:function(e){var t=o(this,e,s),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return a?a.call(t,n,r):t.slice(r,r+n.length)===n}})},3957:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--aFfDV{position:absolute;left:5px;right:5px;z-index:1}.big--3hd8C{left:25px;right:25px;top:25px}",""]),i.locals={root:"root--aFfDV",big:"big--3hd8C"},t.A=i},4053:function(e,t,r){"use strict";var n=r(7551),i=r(5842),o=r(8968),s=r(6130),a=r(918),u=r(7001).KEY,l=r(4315),c=r(8645),f=r(7483),d=r(3052),h=r(6045),p=r(4851),g=r(1085),m=r(3150),y=r(4964),_=r(1339),v=r(3422),b=r(4396),S=r(6373),E=r(7007),w=r(924),T=r(1194),L=r(5714),O=r(8944),M=r(5860),A=L.f,P=O.f,R=T.f,I=n.Symbol,j=n.JSON,D=j&&j.stringify,N="prototype",C=h("_hidden"),x=h("toPrimitive"),k={}.propertyIsEnumerable,B=c("symbol-registry"),F=c("symbols"),U=c("op-symbols"),z=Object[N],V="function"==typeof I,q=n.QObject,$=!q||!q[N]||!q[N].findChild,G=o&&l((function(){return 7!=w(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=A(z,t);n&&delete z[t],P(e,t,r),n&&e!==z&&P(z,t,n)}:P,W=function(e){var t=F[e]=w(I[N]);return t._k=e,t},Y=V&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},H=function(e,t,r){return e===z&&H(U,t,r),_(e),t=S(t,!0),_(r),i(F,t)?(r.enumerable?(i(e,C)&&e[C][t]&&(e[C][t]=!1),r=w(r,{enumerable:E(0,!1)})):(i(e,C)||P(e,C,E(1,{})),e[C][t]=!0),G(e,t,r)):P(e,t,r)},Q=function(e,t){_(e);for(var r,n=m(t=b(t)),i=0,o=n.length;o>i;)H(e,r=n[i++],t[r]);return e},K=function(e){var t=k.call(this,e=S(e,!0));return!(this===z&&i(F,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,C)&&this[C][e])||t)},X=function(e,t){if(e=b(e),t=S(t,!0),e!==z||!i(F,t)||i(U,t)){var r=A(e,t);return!r||!i(F,t)||i(e,C)&&e[C][t]||(r.enumerable=!0),r}},J=function(e){for(var t,r=R(b(e)),n=[],o=0;r.length>o;)i(F,t=r[o++])||t==C||t==u||n.push(t);return n},Z=function(e){for(var t,r=e===z,n=R(r?U:b(e)),o=[],s=0;n.length>s;)!i(F,t=n[s++])||r&&!i(z,t)||o.push(F[t]);return o};V||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===z&&t.call(U,r),i(this,C)&&i(this[C],e)&&(this[C][e]=!1),G(this,e,E(1,r))};return o&&$&&G(z,e,{configurable:!0,set:t}),W(e)},a(I[N],"toString",(function(){return this._k})),L.f=X,O.f=H,r(4912).f=T.f=J,r(848).f=K,r(9883).f=Z,o&&!r(5545)&&a(z,"propertyIsEnumerable",K,!0),p.f=function(e){return W(h(e))}),s(s.G+s.W+s.F*!V,{Symbol:I});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var re=M(h.store),ne=0;re.length>ne;)g(re[ne++]);s(s.S+s.F*!V,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=I(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){$=!0},useSimple:function(){$=!1}}),s(s.S+s.F*!V,"Object",{create:function(e,t){return void 0===t?w(e):Q(w(e),t)},defineProperty:H,defineProperties:Q,getOwnPropertyDescriptor:X,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),j&&s(s.S+s.F*(!V||l((function(){var e=I();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(v(t)||void 0!==e)&&!Y(e))return y(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Y(t))return t}),n[1]=t,D.apply(j,n)}}),I[N][x]||r(4944)(I[N],x,I[N].valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},4117:function(e,t,r){for(var n=r(2606),i=r(5860),o=r(918),s=r(7551),a=r(4944),u=r(6249),l=r(6045),c=l("iterator"),f=l("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),g=0;g<p.length;g++){var m,y=p[g],_=h[y],v=s[y],b=v&&v.prototype;if(b&&(b[c]||a(b,c,d),b[f]||a(b,f,y),u[y]=d,_))for(m in n)b[m]||o(b,m,n[m],!0)}},4214:function(e,t,r){var n=r(8833),i=r(5860);r(6150)("keys",(function(){return function(e){return i(n(e))}}))},4315:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4396:function(e,t,r){var n=r(3750),i=r(555);e.exports=function(e){return n(i(e))}},4717:function(e,t,r){var n=r(4396),i=r(5714).f;r(6150)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(n(e),t)}}))},4776:function(e,t,r){var n=r(918);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},4851:function(e,t,r){t.f=r(6045)},4912:function(e,t,r){var n=r(7920),i=r(7019).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},4944:function(e,t,r){var n=r(8944),i=r(7007);e.exports=r(8968)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},4964:function(e,t,r){var n=r(2218);e.exports=Array.isArray||function(e){return"Array"==n(e)}},5207:function(e,t,r){var n=r(8560),i=r(555);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},5226:function(e,t,r){var n=r(7551),i=r(5723),o=r(8944).f,s=r(4912).f,a=r(8560),u=r(277),l=n.RegExp,c=l,f=l.prototype,d=/a/g,h=/a/g,p=new l(d)!==d;if(r(8968)&&(!p||r(4315)((function(){return h[r(6045)("match")]=!1,l(d)!=d||l(h)==h||"/a/i"!=l(d,"i")})))){l=function(e,t){var r=this instanceof l,n=a(e),o=void 0===t;return!r&&n&&e.constructor===l&&o?e:i(p?new c(n&&!o?e.source:e,t):c((n=e instanceof l)?e.source:e,n&&o?u.call(e):t),r?this:f,l)};for(var g=function(e){e in l||o(l,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},m=s(c),y=0;m.length>y;)g(m[y++]);f.constructor=l,l.prototype=f,r(918)(n,"RegExp",l)}r(6645)("RegExp")},5308:function(e,t,r){"use strict";var n=r(5545),i=r(6130),o=r(918),s=r(4944),a=r(6249),u=r(5463),l=r(7483),c=r(158),f=r(6045)("iterator"),d=!([].keys&&"next"in[].keys()),h="keys",p="values",g=function(){return this};e.exports=function(e,t,r,m,y,_,v){u(r,t,m);var b,S,E,w=function(e){if(!d&&e in M)return M[e];switch(e){case h:case p:return function(){return new r(this,e)}}return function(){return new r(this,e)}},T=t+" Iterator",L=y==p,O=!1,M=e.prototype,A=M[f]||M["@@iterator"]||y&&M[y],P=A||w(y),R=y?L?w("entries"):P:void 0,I="Array"==t&&M.entries||A;if(I&&(E=c(I.call(new e)))!==Object.prototype&&E.next&&(l(E,T,!0),n||"function"==typeof E[f]||s(E,f,g)),L&&A&&A.name!==p&&(O=!0,P=function(){return A.call(this)}),n&&!v||!d&&!O&&M[f]||s(M,f,P),a[t]=P,a[T]=g,y)if(b={values:L?P:w(p),keys:_?P:w(h),entries:R},v)for(S in b)S in M||o(M,S,b[S]);else i(i.P+i.F*(d||O),t,b);return b}},5319:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--8jrgo{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:12px;padding:0 8px;position:absolute;width:100%;z-index:1}.big--E4iSN{padding:0 25px 10px}.model-name--rPs-X{max-width:calc(100% - 17px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-right:5px}.model-name-responsive--oEXtj{font-size:calc(12px + 2vh);margin-right:calc(5px + .3vh)}.root--8jrgo .icon-responsive--NFVpB{height:100%;width:auto}@media screen and (max-height: 89px){.hide-on-small-spots--953LV{display:none}}",""]),i.locals={root:"root--8jrgo",big:"big--E4iSN","model-name":"model-name--rPs-X",modelName:"model-name--rPs-X","model-name-responsive":"model-name-responsive--oEXtj",modelNameResponsive:"model-name-responsive--oEXtj","icon-responsive":"icon-responsive--NFVpB",iconResponsive:"icon-responsive--NFVpB","hide-on-small-spots":"hide-on-small-spots--953LV",hideOnSmallSpots:"hide-on-small-spots--953LV"},t.A=i},5424:function(e,t,r){"use strict";var n,i,o,s,a=r(5545),u=r(7551),l=r(715),c=r(1103),f=r(6130),d=r(3422),h=r(3062),p=r(3059),g=r(5755),m=r(1849),y=r(5829).set,_=r(807)(),v=r(6063),b=r(2763),S=r(1139),E=r(7618),w="Promise",T=u.TypeError,L=u.process,O=L&&L.versions,M=O&&O.v8||"",A=u[w],P="process"==c(L),R=function(){},I=i=v.f,j=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[r(6045)("species")]=function(e){e(R,R)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==M.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(n){}}(),D=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},N=function(e,t){if(!e._n){e._n=!0;var r=e._c;_((function(){for(var n=e._v,i=1==e._s,o=0,s=function(t){var r,o,s,a=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{a?(i||(2==e._h&&k(e),e._h=1),!0===a?r=n:(c&&c.enter(),r=a(n),c&&(c.exit(),s=!0)),r===t.promise?l(T("Promise-chain cycle")):(o=D(r))?o.call(r,u,l):u(r)):l(n)}catch(f){c&&!s&&c.exit(),l(f)}};r.length>o;)s(r[o++]);e._c=[],e._n=!1,t&&!e._h&&C(e)}))}},C=function(e){y.call(u,(function(){var t,r,n,i=e._v,o=x(e);if(o&&(t=b((function(){P?L.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)})),e._h=P||x(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},x=function(e){return 1!==e._h&&0===(e._a||e._c).length},k=function(e){y.call(u,(function(){var t;P?L.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})}))},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),N(t,!0))},F=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw T("Promise can't be resolved itself");(t=D(e))?_((function(){var n={_w:r,_d:!1};try{t.call(e,l(F,n,1),l(B,n,1))}catch(i){B.call(n,i)}})):(r._v=e,r._s=1,N(r,!1))}catch(n){B.call({_w:r,_d:!1},n)}}};j||(A=function(e){p(this,A,w,"_h"),h(e),n.call(this);try{e(l(F,this,1),l(B,this,1))}catch(t){B.call(this,t)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(4776)(A.prototype,{then:function(e,t){var r=I(m(this,A));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=P?L.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&N(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=l(F,e,1),this.reject=l(B,e,1)},v.f=I=function(e){return e===A||e===s?new o(e):i(e)}),f(f.G+f.W+f.F*!j,{Promise:A}),r(7483)(A,w),r(6645)(w),s=r(9935)[w],f(f.S+f.F*!j,w,{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(a||!j),w,{resolve:function(e){return E(a&&this===s?A:this,e)}}),f(f.S+f.F*!(j&&r(600)((function(e){A.all(e).catch(R)}))),w,{all:function(e){var t=this,r=I(t),n=r.resolve,i=r.reject,o=b((function(){var r=[],o=0,s=1;g(e,!1,(function(e){var a=o++,u=!1;r.push(void 0),s++,t.resolve(e).then((function(e){u||(u=!0,r[a]=e,--s||n(r))}),i)})),--s||n(r)}));return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=I(t),n=r.reject,i=b((function(){g(e,!1,(function(e){t.resolve(e).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},5433:function(e,t,r){e.exports=!r(8968)&&!r(4315)((function(){return 7!=Object.defineProperty(r(2567)("div"),"a",{get:function(){return 7}}).a}))},5434:function(e,t,r){"use strict";var n=r(6130),i=r(7468)(2);n(n.P+n.F*!r(8019)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},5463:function(e,t,r){"use strict";var n=r(924),i=r(7007),o=r(7483),s={};r(4944)(s,r(6045)("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),o(e,t+" Iterator")}},5545:function(e){e.exports=!1},5605:function(e,t,r){r(8968)&&"g"!=/./g.flags&&r(8944).f(RegExp.prototype,"flags",{configurable:!0,get:r(277)})},5714:function(e,t,r){var n=r(848),i=r(7007),o=r(4396),s=r(6373),a=r(5842),u=r(5433),l=Object.getOwnPropertyDescriptor;t.f=r(8968)?l:function(e,t){if(e=o(e),t=s(t,!0),u)try{return l(e,t)}catch(r){}if(a(e,t))return i(!n.f.call(e,t),e[t])}},5723:function(e,t,r){var n=r(3422),i=r(301).set;e.exports=function(e,t,r){var o,s=t.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},5755:function(e,t,r){var n=r(715),i=r(1323),o=r(3295),s=r(1339),a=r(1482),u=r(9781),l={},c={},f=e.exports=function(e,t,r,f,d){var h,p,g,m,y=d?function(){return e}:u(e),_=n(r,f,t?2:1),v=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=a(e.length);h>v;v++)if((m=t?_(s(p=e[v])[0],p[1]):_(e[v]))===l||m===c)return m}else for(g=y.call(e);!(p=g.next()).done;)if((m=i(g,_,p.value,t))===l||m===c)return m};f.BREAK=l,f.RETURN=c},5829:function(e,t,r){var n,i,o,s=r(715),a=r(2864),u=r(2121),l=r(2567),c=r(7551),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,m=0,y={},_="onreadystatechange",v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){v.call(e.data)};d&&h||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++m]=function(){a("function"==typeof e?e:Function(e),t)},n(m),m},h=function(e){delete y[e]},"process"==r(2218)(f)?n=function(e){f.nextTick(s(v,e,1))}:g&&g.now?n=function(e){g.now(s(v,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,n=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):n=_ in l("script")?function(e){u.appendChild(l("script"))[_]=function(){u.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),e.exports={set:d,clear:h}},5842:function(e){var t={}.hasOwnProperty;e.exports=function(e,r){return t.call(e,r)}},5860:function(e,t,r){var n=r(7920),i=r(7019);e.exports=Object.keys||function(e){return n(e,i)}},5888:function(e,t,r){r(3653)("search",1,(function(e,t,r){return[function(r){"use strict";var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]}))},6045:function(e,t,r){var n=r(8645)("wks"),i=r(3052),o=r(7551).Symbol,s="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=n},6063:function(e,t,r){"use strict";var n=r(3062);function i(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)}e.exports.f=function(e){return new i(e)}},6130:function(e,t,r){var n=r(7551),i=r(9935),o=r(4944),s=r(918),a=r(715),u="prototype",l=function(e,t,r){var c,f,d,h,p=e&l.F,g=e&l.G,m=e&l.S,y=e&l.P,_=e&l.B,v=g?n:m?n[t]||(n[t]={}):(n[t]||{})[u],b=g?i:i[t]||(i[t]={}),S=b[u]||(b[u]={});for(c in g&&(r=t),r)d=((f=!p&&v&&void 0!==v[c])?v:r)[c],h=_&&f?a(d,n):y&&"function"==typeof d?a(Function.call,d):d,v&&s(v,c,d,e&l.U),b[c]!=d&&o(b,c,h),y&&S[c]!=d&&(S[c]=d)};n.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},6150:function(e,t,r){var n=r(6130),i=r(9935),o=r(4315);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",s)}},6249:function(e){e.exports={}},6373:function(e,t,r){var n=r(3422);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},6478:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--ujvuu{position:fixed;border:1px solid #555;z-index:2000000}.topLeft--gfCc0{top:10px;left:10px}.topRight--4kMk9{top:10px;right:10px}.bottomLeft--rwhF2{bottom:10px;left:10px}.bottomRight--sO8K2{bottom:10px;right:10px}.rootFullscreen--P6dU4{position:fixed;top:0;left:0;bottom:0;right:0;border:1px solid #555;z-index:2000000}.rootContent--aEiRU{width:100%;height:100%}.topRight--4kMk9.slideAnimation--K36g6,.bottomRight--sO8K2.slideAnimation--K36g6{-webkit-animation:slideInRight--dbosq .3s ease-in;animation:slideInRight--dbosq .3s ease-in}.topLeft--gfCc0.slideAnimation--K36g6,.bottomLeft--rwhF2.slideAnimation--K36g6{-webkit-animation:slideInLeft--V5X9D .3s ease-in;animation:slideInLeft--V5X9D .3s ease-in}.close-button--wsOv0{background:rgba(0,0,0,.7);border:1px solid #888;border-radius:0;outline:none;color:#fff;padding:5px 8px;top:0;right:0;position:absolute;cursor:pointer}.cta-button--ddtCz{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:5px 14px;background:-webkit-gradient(linear, left bottom, left top, from(rgba(162, 36, 44, 0.2)), to(rgba(162, 36, 44, 0.2))),red;background:linear-gradient(0deg, rgba(162, 36, 44, 0.2), rgba(162, 36, 44, 0.2)),red;-webkit-box-shadow:0 0 60px rgba(0,0,0,.08);box-shadow:0 0 60px rgba(0,0,0,.08);border-radius:16px;position:absolute;bottom:6px;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:#fff;text-transform:uppercase;text-decoration:none;font-size:14px;font-family:Source Sans Pro,sans-serif;line-height:1.3}@-webkit-keyframes slideInRight--dbosq{from{-webkit-transform:translateX(100%);transform:translateX(100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}@keyframes slideInRight--dbosq{from{-webkit-transform:translateX(100%);transform:translateX(100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}@-webkit-keyframes slideInLeft--V5X9D{from{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}@keyframes slideInLeft--V5X9D{from{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(0%);transform:translateX(0%)}}",""]),i.locals={root:"root--ujvuu",topLeft:"topLeft--gfCc0",topRight:"topRight--4kMk9",bottomLeft:"bottomLeft--rwhF2",bottomRight:"bottomRight--sO8K2",rootFullscreen:"rootFullscreen--P6dU4",rootContent:"rootContent--aEiRU",slideAnimation:"slideAnimation--K36g6",slideInRight:"slideInRight--dbosq",slideInLeft:"slideInLeft--V5X9D","close-button":"close-button--wsOv0",closeButton:"close-button--wsOv0","cta-button":"cta-button--ddtCz",ctaButton:"cta-button--ddtCz"},t.A=i},6483:function(e,t,r){var n=r(6130),i=r(4315),o=r(555),s=/"/g,a=function(e,t,r,n){var i=String(o(e)),a="<"+t;return""!==r&&(a+=" "+r+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+i+"</"+t+">"};e.exports=function(e,t){var r={};r[e]=t(a),n(n.P+n.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",r)}},6561:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var u,l,c=this._events[a],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,o),!0;case 6:return c.fn.call(c.context,t,n,i,o,s),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var d,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,i);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||i&&!a[u].once||n&&a[u].context!==n)&&l.push(a[u]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},6611:function(e,t,r){var n=r(6130),i=r(633)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},6617:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".layoutWrapper--zyz7H{height:100%;color:#fff;overflow:hidden;position:relative;font-size:22px}",""]),i.locals={layoutWrapper:"layoutWrapper--zyz7H"},t.A=i},6645:function(e,t,r){"use strict";var n=r(7551),i=r(8944),o=r(8968),s=r(6045)("species");e.exports=function(e){var t=n[e];o&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},6760:function(e,t,r){"use strict";var n=r(715),i=r(6130),o=r(8833),s=r(1323),a=r(3295),u=r(1482),l=r(7524),c=r(9781);i(i.S+i.F*!r(600)((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,i,f,d=o(e),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,y=0,_=c(d);if(m&&(g=n(g,p>2?arguments[2]:void 0,2)),null==_||h==Array&&a(_))for(r=new h(t=u(d.length));t>y;y++)l(r,y,m?g(d[y],y):d[y]);else for(f=_.call(d),r=new h;!(i=f.next()).done;y++)l(r,y,m?s(f,g,[i.value,y],!0):i.value);return r.length=y,r}})},6862:function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,l=u>>1,c=-7,f=r?i-1:0,d=r?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=a;c>0;o=256*o+e[t+f],f+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=l}return(h?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+h]=255&s,h+=p,s/=256,l-=8);e[r+h-p]|=128*g}},6891:function(e,t,r){"use strict";var n=r(6130),i=r(7468)(5),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(9553)(o)},6902:function(e,t,r){var n=r(6130),i=r(555),o=r(4315),s=r(1520),a="["+s+"]",u=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),c=function(e,t,r){var i={},a=o((function(){return!!s[e]()||"​"!="​"[e]()})),u=i[e]=a?t(f):s[e];r&&(i[r]=u),n(n.P+n.F*a,"String",i)},f=c.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=c},6966:function(e,t,r){var n=r(8074),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},7001:function(e,t,r){var n=r(3052)("meta"),i=r(3422),o=r(5842),s=r(8944).f,a=0,u=Object.isExtensible||function(){return!0},l=!r(4315)((function(){return u(Object.preventExtensions({}))})),c=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},f=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},onFreeze:function(e){return l&&f.NEED&&u(e)&&!o(e,n)&&c(e),e}}},7007:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7019:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},7468:function(e,t,r){var n=r(715),i=r(3750),o=r(8833),s=r(1482),a=r(8889);e.exports=function(e,t){var r=1==e,u=2==e,l=3==e,c=4==e,f=6==e,d=5==e||f,h=t||a;return function(t,a,p){for(var g,m,y=o(t),_=i(y),v=n(a,p,3),b=s(_.length),S=0,E=r?h(t,b):u?h(t,0):void 0;b>S;S++)if((d||S in _)&&(m=v(g=_[S],S,y),e))if(r)E[S]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return S;case 2:E.push(g)}else if(c)return!1;return f?-1:l||c?c:E}}},7483:function(e,t,r){var n=r(8944).f,i=r(5842),o=r(6045)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},7524:function(e,t,r){"use strict";var n=r(8944),i=r(7007);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},7551:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},7618:function(e,t,r){var n=r(1339),i=r(3422),o=r(6063);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},7797:function(e,t,r){var n=r(3422),i=r(4964),o=r(6045)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},7835:function(e,t,r){var n=r(8645)("keys"),i=r(3052);e.exports=function(e){return n[e]||(n[e]=i(e))}},7859:function(e,t,r){var n=r(4912),i=r(9883),o=r(1339),s=r(7551).Reflect;e.exports=s&&s.ownKeys||function(e){var t=n.f(o(e)),r=i.f;return r?t.concat(r(e)):t}},7893:function(e,t,r){"use strict";var n=r(6130),i=r(5207),o="includes";n(n.P+n.F*r(8256)(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},7920:function(e,t,r){var n=r(5842),i=r(4396),o=r(2629)(!1),s=r(7835)("IE_PROTO");e.exports=function(e,t){var r,a=i(e),u=0,l=[];for(r in a)r!=s&&n(a,r)&&l.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~o(l,r)||l.push(r));return l}},8019:function(e,t,r){"use strict";var n=r(4315);e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},8074:function(e){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},8256:function(e,t,r){var n=r(6045)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(i){}}return!0}},8273:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--tVeSu{background-color:rgba(0,0,0,.32);border-radius:2px;color:#fff;font-size:10px;padding:1px 5px;display:inline-block;position:relative;z-index:2}.root--tVeSu+.root--tVeSu{margin-left:3px}.big--nv2ND{font-weight:600;padding:5px 12px;font-size:15px;border-radius:3px}",""]),i.locals={root:"root--tVeSu",big:"big--nv2ND"},t.A=i},8502:function(e,t,r){"use strict";const n=r(3711),i=r(6862),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=u,t.IS=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=function(e){if(u.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?a(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return c(e),a(e<0?0:0|p(e))}function d(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(i)return n?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return A(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return L(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(l(e,o+n)!==l(t,n)){r=!1;break}if(r)return o}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(K(n))return s;e[r+s]=n}return s}function S(e,t,r,n){return H(W(t,e.length-r),e,r,n)}function E(e,t,r,n){return H(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return H(Y(t),e,r,n)}function T(e,t,r,n){return H(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function L(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(o=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=M));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(Q(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Q(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.IS;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(Q(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),l=this.slice(n,i),c=e.slice(t,r);for(let u=0;u<a;++u)if(l[u]!==c[u]){o=l[u],s=c[u];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const M=4096;function A(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=X[e[o]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function j(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i){V(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function C(e,t,r,n,i){V(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function x(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,t,r,n,o){return t=+t,r>>>=0,o||x(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,o){return t=+t,r>>>=0,o||x(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=J((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=J((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=J((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=J((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=J((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=J((function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);D(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=J((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=J((function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=u.isBuffer(e)?e:u.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const F={};function U(e,t,r){F[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function V(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new F.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||$(t,e.length-(r+1))}(n,i,o)}function q(e,t){if("number"!=typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,r){if(Math.floor(e)!==e)throw q(e,r),new F.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function W(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function J(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},8547:function(e,t,r){"use strict";var n,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(n){r=null}e[t]=r}return e[t]}}(),s=[];function a(e){for(var t=-1,r=0;r<s.length;r++)if(s[r].identifier===e){t=r;break}return t}function u(e,t){for(var r={},n=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],l=r[u]||0,c="".concat(u," ").concat(l);r[u]=l+1;var f=a(c),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(s[f].references++,s[f].updater(d)):s.push({identifier:c,updater:m(d,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,f=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=f(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function h(e,t,r){var n=r.css,i=r.media,o=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,g=0;function m(e,t){var r,n,i;if(t.singleton){var o=g++;r=p||(p=l(t)),n=d.bind(null,r,o,!1),i=d.bind(null,r,o,!0)}else r=l(t),n=h.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var r=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var i=a(r[n]);s[i].references--}for(var o=u(e,t),l=0;l<r.length;l++){var c=a(r[l]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}r=o}}}},8560:function(e,t,r){var n=r(3422),i=r(2218),o=r(6045)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},8562:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--\\+9vNo{height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;overflow:hidden}.root--\\+9vNo video{opacity:1;min-width:100%;min-height:100%;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);font-size:0;display:block}.root--\\+9vNo video[metaloaded]{-webkit-animation:videoFadeIn--R67vo .3s ease-in forwards;animation:videoFadeIn--R67vo .3s ease-in forwards}.inner--w8Qlv{min-width:100%;min-height:100%;border-radius:18px;overflow:hidden}.circle--tsF0N{border-radius:100%;position:relative}@-webkit-keyframes videoFadeIn--R67vo{from{opacity:0}to{opacity:1}}@keyframes videoFadeIn--R67vo{from{opacity:0}to{opacity:1}}",""]),i.locals={root:"root--+9vNo",videoFadeIn:"videoFadeIn--R67vo",inner:"inner--w8Qlv",circle:"circle--tsF0N"},t.A=i},8645:function(e,t,r){var n=r(9935),i=r(7551),o="__core-js_shared__",s=i[o]||(i[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(5545)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},8833:function(e,t,r){var n=r(555);e.exports=function(e){return Object(n(e))}},8889:function(e,t,r){var n=r(7797);e.exports=function(e,t){return new(n(e))(t)}},8944:function(e,t,r){var n=r(1339),i=r(5433),o=r(6373),s=Object.defineProperty;t.f=r(8968)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return s(e,t,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},8964:function(e,t,r){"use strict";var n=r(6130),i=r(7468)(1);n(n.P+n.F*!r(8019)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},8968:function(e,t,r){e.exports=!r(4315)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},9119:function(e,t,r){"use strict";var n=r(6130),i=r(1482),o=r(5207),s="endsWith",a=""[s];n(n.P+n.F*r(8256)(s),"String",{endsWith:function(e){var t=o(this,e,s),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),u=void 0===r?n:Math.min(i(r),n),l=String(e);return a?a.call(t,l,u):t.slice(u-l.length,u)===l}})},9120:function(e,t,r){var n=r(8944).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in i||r(8968)&&n(i,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},9233:function(e){e.exports=function(e,t){return{value:t,done:!!e}}},9266:function(e){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";function n(){var e=window.navigator.userAgent;return e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";function n(){var e=window,t=e.chrome,r=e.navigator,n=e.opr,i=r.vendor,o=r.userAgent,s=void 0!==n,a=o.indexOf("Edge")>-1,u=o.match("CriOS"),l=o.match("Chromium");return u||null!==t&&"undefined"!==t&&"Google Inc."===i&&!1===s&&!1===a||l}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";function n(){return window.navigator.userAgent.indexOf("Edge/")>0}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";function n(){return window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";function n(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),r=e.indexOf("Trident/");return t>0||r>0}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";function n(){var e=window.opera||window.opr,t=window.navigator.userAgent.match(/Opera|OPR\//);return e&&t}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";function n(){var e=window.navigator,t=e.vendor,r=e.userAgent,n=t&&t.indexOf("Apple")>-1,i=r&&-1==r.indexOf("CriOS")&&-1==r.indexOf("FxiOS");return n&&i}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";function n(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}r.r(t),r.d(t,"default",(function(){return n}))},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"ANDROID",(function(){return i})),r.d(n,"CHROME",(function(){return o})),r.d(n,"EDGE",(function(){return s})),r.d(n,"FIREFOX",(function(){return a})),r.d(n,"IE",(function(){return u})),r.d(n,"OPERA",(function(){return l})),r.d(n,"SAFARI",(function(){return c})),r.d(n,"UNKNOWN",(function(){return f}));var i="android",o="chrome",s="edge",a="firefox",u="ie",l="opera",c="safari",f="unknown",d=r(0),h=r(1),p=r(2),g=r(3),m=r(4),y=r(7),_=r(5),v=r(6);function b(){return Object(h.default)()?o:Object(v.default)()?c:Object(p.default)()?s:Object(g.default)()?a:Object(m.default)()?u:Object(d.default)()?i:Object(_.default)()?l:f}r.d(t,"detect",(function(){return b})),r.d(t,"browsers",(function(){return n})),r.d(t,"isAndroid",(function(){return d.default})),r.d(t,"isChrome",(function(){return h.default})),r.d(t,"isEdge",(function(){return p.default})),r.d(t,"isFirefox",(function(){return g.default})),r.d(t,"isIE",(function(){return m.default})),r.d(t,"isMobile",(function(){return y.default})),r.d(t,"isOpera",(function(){return _.default})),r.d(t,"isSafari",(function(){return v.default}))}])},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(0),i="cd1394e6-3fd1-4a2d-ae60-c9ae01f7ee89",o=new Error("Cannot identify whether incognito mode is active");function s(){var e=Object(n.detect)();return new Promise((function(t,r){var s=function(){return t(!0)},a=function(){return t(!1)},u=function(){return r(o)};if(e===n.browsers.CHROME||e===n.browsers.OPERA){var l=window.RequestFileSystem||window.webkitRequestFileSystem;return l?l(0,0,a,s):u()}if(e===n.browsers.FIREFOX){if(!window.indexedDB)return s();var c=window.indexedDB.open(i);c.onerror=s,c.onsuccess=a}if(e===n.browsers.IE||e===n.browsers.EDGE)return window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?a():s();if(e===n.browsers.SAFARI){try{localStorage[i]=i,localStorage.removeItem(i)}catch(e){return s()}try{window.openDatabase(null,null,null,null)}catch(e){return s()}return a()}return u()}))}}])},9318:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var s=i.apply(null,r);s&&e.push(s)}else if("object"===o)for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},9369:function(e,t,r){"use strict";var n=r(8833),i=r(6966),o=r(1482);e.exports=function(e){for(var t=n(this),r=o(t.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,r),u=s>2?arguments[2]:void 0,l=void 0===u?r:i(u,r);l>a;)t[a++]=e;return t}},9407:function(e,t,r){var n=r(8944),i=r(1339),o=r(5860);e.exports=r(8968)?Object.defineProperties:function(e,t){i(e);for(var r,s=o(t),a=s.length,u=0;a>u;)n.f(e,r=s[u++],t[r]);return e}},9553:function(e,t,r){var n=r(6045)("unscopables"),i=Array.prototype;null==i[n]&&r(4944)(i,n,{}),e.exports=function(e){i[n][e]=!0}},9679:function(e,t,r){"use strict";var n=r(1967),i=r.n(n)()((function(e){return e[1]}));i.push([e.id,".root--3KIsO{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.root--3KIsO small{font-size:smaller}.online--\\+zD2p{display:block;width:5px;height:5px;background-color:#fff;border-radius:50%;margin-right:5px}.big--e2RNt{width:13px;height:13px}.root_universal--o-\\+e0{font-size:12px;line-height:12px}",""]),i.locals={root:"root--3KIsO",online:"online--+zD2p",big:"big--e2RNt",root_universal:"root_universal--o-+e0",rootUniversal:"root_universal--o-+e0"},t.A=i},9681:function(e,t,r){var n=r(6130);n(n.P,"Array",{fill:r(9369)}),r(9553)("fill")},9781:function(e,t,r){var n=r(1103),i=r(6045)("iterator"),o=r(6249);e.exports=r(9935).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},9883:function(e,t){t.f=Object.getOwnPropertySymbols},9935:function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={id:e,exports:{}};return n[e](r,r.exports,o),r.exports}o.m=n,o.amdO={},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);o.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){s[e]=function(){return r[e]}}));return s.default=function(){return r},o.d(i,s),i},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,r){return o.f[r](e,t),t}),[]))},o.u=function(e){return e+".1b3c6f91afdefa580d60.js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r={},o.l=function(e,t,n,i){if(r[e])r[e].push(t);else{var s,a;if(void 0!==n)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var c=u[l];if(c.getAttribute("src")==e){s=c;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=e),r[e]=[t];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=r[e];if(delete r[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),a&&document.head.appendChild(s)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/static/9271e4b9/s/widgets/Spot/",function(){var e={628:0};o.f.j=function(t,r){var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise((function(r,i){n=e[t]=[r,i]}));r.push(n[2]=i);var s=o.p+o.u(t),a=new Error;o.l(s,(function(r){if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,n[1](a)}}),"chunk-"+t,t)}};var t=function(t,r){var n,i,s=r[0],a=r[1],u=r[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(u)u(o)}for(t&&t(r);l<s.length;l++)i=s[l],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunk=self.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),o.nc=void 0,function(){"use strict";o(4053),o(2714),o(4214),o(5434),o(4717),o(3619),o(2198),o(1457),o(2606),o(4117),o(5424),o(6760),o(1804),o(9120);function e(e,t){for(var r=[],n=[],i=arguments.length;i-- >2;)r.push(arguments[i]);for(;r.length;){var o=r.pop();if(o&&o.pop)for(i=o.length;i--;)r.push(o[i]);else null!=o&&!0!==o&&!1!==o&&n.push(o)}return"function"==typeof e?e(t||{},n):{nodeName:e,attributes:t||{},children:n,key:t&&t.key}}function t(e,t,r,n){var i,o=[].map,s=n&&n.children[0]||null,a=s&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:o.call(t.childNodes,(function(t){return 3===t.nodeType?t.nodeValue:e(t)}))}}(s),u=[],l=!0,c=g(e),f=function e(t,r,n){for(var i in n)"function"==typeof n[i]?function(e,i){n[e]=function(e){var o=i(e);return"function"==typeof o&&(o=o(y(t,c),n)),o&&o!==(r=y(t,c))&&!o.then&&p(c=m(t,g(r,o),c)),o}}(i,n[i]):e(t.concat(i),r[i]=g(r[i]),n[i]=g(n[i]));return n}([],c,g(t));return p(),f;function d(e){return"function"==typeof e?d(e(c,f)):null!=e?e:""}function h(){i=!i;var e=d(r);for(n&&!i&&(s=T(n,s,a,a=e)),l=!1;u.length;)u.pop()()}function p(){i||(i=!0,setTimeout(h))}function g(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}function m(e,t,r){var n={};return e.length?(n[e[0]]=e.length>1?m(e.slice(1),t,r[e[0]]):t,g(r,n)):t}function y(e,t){for(var r=0;r<e.length;)t=t[e[r++]];return t}function _(e){return e?e.key:null}function v(e){return e.currentTarget.events[e.type](e)}function b(e,t,r,n,i){if("key"===t);else if("style"===t)if("string"==typeof r)e.style.cssText=r;else for(var o in"string"==typeof n&&(n=e.style.cssText=""),g(n,r)){var s=null==r||null==r[o]?"":r[o];"-"===o[0]?e.style.setProperty(o,s):e.style[o]=s}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?n||(n=e.events[t]):e.events={},e.events[t]=r,r?n||e.addEventListener(t,v):e.removeEventListener(t,v)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!i?e[t]=null==r?"":r:null!=r&&!1!==r&&e.setAttribute(t,r),null!=r&&!1!==r||e.removeAttribute(t)}function S(e,t){var r="string"==typeof e||"number"==typeof e?document.createTextNode(e):(t=t||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),n=e.attributes;if(n){n.oncreate&&u.push((function(){n.oncreate(r)}));for(var i=0;i<e.children.length;i++)r.appendChild(S(e.children[i]=d(e.children[i]),t));for(var o in n)b(r,o,n[o],null,t)}return r}function E(e,t){var r=t.attributes;if(r){for(var n=0;n<t.children.length;n++)E(e.childNodes[n],t.children[n]);r.ondestroy&&r.ondestroy(e)}return e}function w(e,t,r){function n(){e.removeChild(E(t,r))}var i=r.attributes&&r.attributes.onremove;i?i(t,n):n()}function T(e,t,r,n,i){if(n===r);else if(null==r||r.nodeName!==n.nodeName){var o=S(n,i);e.insertBefore(o,t),null!=r&&w(e,t,r),t=o}else if(null==r.nodeName)t.nodeValue=n;else{!function(e,t,r,n){for(var i in g(t,r))r[i]!==("value"===i||"checked"===i?e[i]:t[i])&&b(e,i,r[i],t[i],n);var o=l?r.oncreate:r.onupdate;o&&u.push((function(){o(e,t)}))}(t,r.attributes,n.attributes,i=i||"svg"===n.nodeName);for(var s={},a={},c=[],f=r.children,h=n.children,p=0;p<f.length;p++){c[p]=t.childNodes[p],null!=(y=_(f[p]))&&(s[y]=[c[p],f[p]])}p=0;for(var m=0;m<h.length;){var y=_(f[p]),v=_(h[m]=d(h[m]));if(a[y])p++;else if(null==v||v!==_(f[p+1]))if(null==v||l)null==y&&(T(t,c[p],f[p],h[m],i),m++),p++;else{var E=s[v]||[];y===v?(T(t,E[0],E[1],h[m],i),p++):E[0]?T(t,t.insertBefore(E[0],c[p]),E[1],h[m],i):T(t,c[p],null,h[m],i),a[v]=h[m],m++}else null==y&&w(t,c[p],f[p]),p++}for(;p<f.length;)null==_(f[p])&&w(t,c[p],f[p]),p++;for(var p in s)a[p]||w(t,s[p][0],s[p][1])}return t}}o(7893),o(420);var r="URLSearchParams"in self,n="Symbol"in self&&"iterator"in Symbol,i="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(tv){return!1}}(),s="FormData"in self,a="ArrayBuffer"in self;if(a)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&u.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function m(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=g(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=f(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=f(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),d(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),d(e)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var r,n,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),v.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function S(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},_.call(b.prototype),_.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];E.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var T=self.DOMException;try{new T}catch(bb){(T=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),T.prototype.constructor=T}function L(e,t){return new Promise((function(r,n){var o=new b(e,t);if(o.signal&&o.signal.aborted)return n(new T("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new E(i,n))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.onabort=function(){n(new T("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}L.polyfill=!0,self.fetch||(self.fetch=L,self.Headers=h,self.Request=b,self.Response=E);o(1842),o(5888),o(1302);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}var N=function(e){return function(t){try{return e(t)}catch(tv){return t}}},C=N(decodeURIComponent),x=N(encodeURIComponent);function k(e){return Object.keys(e).reduce((function(t,r){var n=e[r],i=[x(r),void 0===n?null:x(n&&"object"===D(n)&&!Array.isArray(n)?JSON.stringify(n):n)].filter(Boolean);return[].concat(R(t),[i.join("=")])}),[]).join("&")}function B(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("&").reduce((function(e,t){var r=t.indexOf("="),n=-1===r,i=n?t:t.slice(0,r);return e[C(i)]=n?void 0:C(t.slice(r+1)),e}),{})}function F(e,t){var r=P(e.split("?"),2),n=r[0],i=r[1],o=P((void 0===i?"":i).split("#"),2),s=o[0],a=o[1],u=k(M(M({},s?B(s):{}),t));return u?"".concat(n,"?").concat(u).concat(a?"#".concat(a):""):e}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=document.createElement("a");t.href=e;var r=t.search.substring(1);return r?B(r):{}}function z(e){return(e||"").replace(/(.*?\.[^?/]+)([?:/]{1}|$).*/,"$1")}var V=function(e){return e.split("//")[0]},q=function(e){return z(e).split("//")[1]};function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function W(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}var Y=function(){return function(e,t,r){return t&&G(e.prototype,t),r&&G(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"subscribers",[])}),[{key:"get",value:function(e){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=F(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return window.fetch(n,r).then((function(r){if(!r.ok)throw new Error("".concat(r.status," - ").concat(r.statusText));t.onApiCall(e,"get",!0);var n=r.headers.get("Content-Type");return n&&n.includes("json")?r.json():r.text()})).catch((function(r){throw t.onApiCall(e,"get",!1),r}))}},{key:"post",value:function(e,t){var r=this;return window.fetch(e,{method:"POST",body:JSON.stringify(t)}).then((function(t){if(!t.ok)throw t;r.onApiCall(e,"post",!0);var n=t.headers.get("Content-Type");return n&&n.includes("json")?t.json():t.text()})).catch((function(t){throw r.onApiCall(e,"post",!1),t}))}},{key:"subscribe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.subscribers.push({callback:e,conditionFunction:t,deleteAfterCall:r})}},{key:"onApiCall",value:function(e,t,r){this.subscribers=this.subscribers.filter((function(n){var i=n.callback,o=n.conditionFunction,s=n.deleteAfterCall;return!(!o||o(e,t,r))||(i(e,t,r),!s)}))}}])}(),H=new Y;function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z(n.key),n)}}function J(e,t,r){return t&&X(e.prototype,t),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z(e){var t=function(e,t){if("object"!=Q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q(t)?t:t+""}var ee=function(){function e(){K(this,e)}return J(e,null,[{key:"getIsLocalStorageAvailable",value:function(){try{var e="___localStorageTest___";window.localStorage.setItem(e,"123");var t=window.localStorage.getItem(e);return window.localStorage.removeItem(e),"123"===t}catch(r){return!1}}},{key:"get",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.getIsLocalStorageAvailable()?window.localStorage.getItem(t):r}},{key:"set",value:function(t,r){return!!e.getIsLocalStorageAvailable()&&window.localStorage.setItem(t,r)}},{key:"delete",value:function(t){e.getIsLocalStorageAvailable()&&window.localStorage.removeItem(t)}},{key:"has",value:function(t){return!!e.getIsLocalStorageAvailable()&&Object.prototype.hasOwnProperty.call(window.localStorage,t)}}])}(),te=function(e){return e},re=!1,ne=function(e){if(!re){re=!0;try{o.p="".concat(z(e)).concat(o.p)}catch(tv){console.error("webpack path cannot be resolved",tv)}}},ie="stripchatWidgets_",oe={HAS_USER_AUTHORIZED_EVER:"".concat(ie,"_hasUserAuthorizedEver"),HAS_WIDGET_ISABELLA_SHOWN:"".concat(ie,"_hasIsabellaWidgetShown"),HAS_WIDGET_JOIN_SHOW_SHOWN:"".concat(ie,"_hasJoinHerShowWidgetShown"),HAS_WIDGET_STRIPBOT_SHOWN:"".concat(ie,"_hasStripbotWidgetShown"),IS_EXIT_POP_SHOWN_IN_SESSION:"".concat(ie,"_isExitPopShownInSession"),LAST_TEST_PARAMS:"".concat(ie,"_lastTestParams"),LAST_VIEWED_TIME:"".concat(ie,"_lastViewedTime"),WIDGET_CLOSED_BY_CLICK:"".concat(ie,"_widgetClosedByClick")};function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ae(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function ce(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==se(t)?t:t+""}var fe=Promise.resolve.bind(Promise),de=function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:te,o=function(){return function(e,t,r){return t&&le(e.prototype,t),r&&le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t||{},this.playerEnabled=!0}),[{key:"mount",value:function(o){var s,a=this,u=document,l=u.body,c=u.referrer;if(this.params.limitAfterClosure>0){var f=ee.get(oe.LAST_VIEWED_TIME);if(f)Date.now()-new Date(f).getTime()>6e4*this.params.limitAfterClosure?(ee.delete(oe.LAST_VIEWED_TIME),this.playerEnabled=!0):this.playerEnabled=!1}return this.playerEnabled?Promise.resolve(e).then((s=ne,function(e){var t=s(e);return t&&t.then?t.then((function(){return e})):e})).then((function(e){return r.init(i({Api:H,referrer:c,location:{hostname:q(e),href:F(e,a.params),origin:"".concat(V(e),"//").concat(q(e))},body:l,window:window,globals:{},performance:performance,LocalStorage:ee})).mount(t,n,o)})).then((function(e){var t=0,r={play:function(){return e.play(),t=1,Promise.resolve()},pause:function(){return e.pause(),t=0,Promise.resolve()},setParams:function(n){var i=!!t;return(i?r.pause():fe()).then((function(){return e.setParams(n).then((function(){return i?r.play():fe()}))}))},destroy:function(){return e.terminate(),ae(o.childNodes).reverse().forEach((function(e){o.removeChild(e)})),r.play=fe,r.pause=fe,r.destroy=fe,Promise.resolve()}};return r})):Promise.reject()}}])}();return o},he=function(e){var t="script#".concat(e),r=document.querySelectorAll("script"),n=1===r.length?r[0]:document.querySelector(t);if(!n)throw new Error("Script #".concat(e," not found"));return n},pe=o(9318),ge=o.n(pe),me=(o(1203),function(e){return null==e}),ye=(o(1412),"int"),_e="unsigned_int",ve="int_list",be="bool",Se="string",Ee="enum",we="string_list",Te="hex_color",Le="hex_list",Oe=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\s/g,"")},Me=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Ae=/[^0-9-]/,Pe=function(e,t,r){var n=t.min,i=t.max,o=t.disableNonNumeric,s=String(e),a=parseInt(e,10),u=r===_e?Math.abs(a):a;switch(!0){case Ae.test(s)&&o:case Number.isNaN(u):case!me(n)&&u<n:case!me(i)&&u>i:return!1;default:return!0}},Re=(o(8964),function(e){return 0===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").indexOf(e)}),Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return""===e?[]:(e||"").split(",").map((function(e){return e.trim()})).filter((function(e){return e||t}))},je=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,De=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\s/g,"")},Ne=function(e,t,r,n){var i=n.allowEmpty;switch(r){case _e:return Math.abs(parseInt(e,10));case ye:return parseInt(e,10);case ve:return(e||"").split(",").map((function(e){return parseInt(e,10)})).filter(Boolean);case be:return"boolean"==typeof e?e:1===parseInt(e,10);case Se:case Ee:return"".concat(e).trim();case we:return Ie(e,i);case Te:return De(e)&&Re("#",e)?e:"#".concat(e);case Le:return(e||"").split(",").map(De).filter((function(e){return je.test(e)})).map((function(e){return Re("#",e)?e:"#".concat(e)}));default:throw new Error("Unknown type ".concat(r))}};function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}var xe=["key","default","type","convertValue","isAccepted"];function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ue=function(e,t){return e.reduce((function(e,r){var n=r.key,i=r.default,o=r.type,s=r.convertValue,a=void 0===s?Ne:s,u=r.isAccepted,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(r,xe),c=!(n in t),f=me(i);if(c&&f)return e;var d=t[n],h=u?u(d,t):function(e){var t=e.value,r=e.type,n=e.options;switch(r){case _e:case ye:return Pe(t,n,r);case ve:return(t||"").split(",").some((function(e){return Pe(e,n)}));case be:return["1",1,"0",0].includes(t);case Se:return"".concat(t).trim();case Ee:return n.enum.includes(Oe(t));case we:return(t||"").split(",").some((function(e){return!!Oe(e)}));case Te:return Me.test(t);case Le:return(t||"").split(",").some((function(e){return Me.test(Oe(e))}));default:throw new Error("Unknown type ".concat(r))}}({value:d,type:o,options:l});return f&&!h?e:Be(Be({},e),{},Fe({},n,a(h&&d||function(e,t){return"function"==typeof e?e(t):e}(i,t),t,o,l)))}),{})},ze=function(e,t){return{event:e,effect:t,options:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}},Ve=function(e){var t=function(t){return{name:e,payload:t}};return t.effect=function(e){return ze(t,e)},t.effectOnce=function(e){return ze(t,e,{once:!0})},t.eventName=e,t},qe=Ve("App bootstrap"),$e=Ve("App initialization");function Ge(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ye=function(e){var t=[],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.map((function(e){if(e in r)return r[e];throw new Error('Dependency "'.concat(e,'" is empty!'))}));return e.apply(void 0,Ge(n))};return r.requires=function(){return t.push.apply(t,arguments),r},r};o(6891);function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ke=function(e){return Array.isArray(e)?e:[e]},Xe=function(e){var t=[],r=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e){return t.find((function(t){return t.event===e}))}(e);i?i.handlers.push([r,n]):t.push({event:e,handlers:[[r,n]]})};return{initialState:e,on:function(e,t){return Ke(e).forEach((function(e){r(e,t)})),this},once:function(e,t){return Ke(e).forEach((function(e){r(e,t,{once:!0})})),this},bind:function(e,r){t.forEach((function(t){var n=t.event;t.handlers.forEach((function(t){var i=He(t,2),o=i[0],s=function(e){return r(o(e))};i[1].once?e.once(n,s):e.on(n,s)}))}))}}},Je=Ve("App configuration"),Ze=Ve("Update config"),et=Ve("Update query");function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function rt(e){return function(e){if(Array.isArray(e))return nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=tt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var at=function(e){return function(t){return{config:ot(ot({},t.config),e)}}},ut=Ye((function(e,t){var r=t.fixedQueryParams,n={acceptedParamsConfig:[],initialConfig:{}},i=ot(ot({},U(e.href)),r),o=function(){return at(ot(ot(ot({},n.initialConfig),Ue(n.acceptedParamsConfig||[],i)),{},{acceptedQueryParamsConfig:n.acceptedParamsConfig,queryParams:i}))};return{reducer:Xe({config:{queryParams:{}}}).on($e,(function(){return o()})).on(et,(function(e){return Object.assign(i,e),o()})).on(Ze,at),effects:[Je.effect((function(e){var t=e.acceptedParamsConfig,r=void 0===t?[]:t,i=e.initialConfig,o=void 0===i?{}:i;n.acceptedParamsConfig=[].concat(rt(n.acceptedParamsConfig),rt(r)),n.initialConfig=ot(ot({},n.initialConfig),o)}))]}})).requires("location","globals"),lt=function(e){return qe.effect((function(){return function(t,r){return r(Je(e))}}))},ct=function(e){var t=e.config;return void 0===t?{queryParams:{}}:t},ft=ut,dt=function(e,t){return e&&t?{width:"".concat(e,"px"),height:"".concat(t,"px")}:e?{width:"".concat(e,"px"),height:"".concat(e*(185/330),"px")}:t?{width:"".concat(t*(330/185),"px"),height:"".concat(t,"px")}:{width:"".concat(330,"px"),height:"".concat(185,"px")}},ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).reduce((function(r,n){return e(t[n],n)&&(r[n]=t[n]),r}),{})};function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}var gt=function(e){return me(e)||""===e||Array.isArray(e)&&0===e.length||"object"===pt(e)&&0===Object.keys(e).length||"number"==typeof e&&e!=e};function mt(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _t=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.length;if(n<2)throw new Error("Selector should receive more than one argument!");var i=t[n-1],o=t.slice(0,n-1);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.apply(void 0,mt(o.map((function(e){return e.apply(void 0,t)}))))}},vt=(o(6611),["s","s","e","n","i","s","u","b","m","a","c","e","h","t"].reverse().join("")),bt=["h","s","a","c","p","i","r","t","s"].reverse().join(""),St=["t","a","h","c","p","i","r","t","s"].reverse().join(""),Et=function(e){return e.Alpha="alpha",e.Beta="beta",e.Gamma="gamma",e.Zeta="zeta",e}(Et||{}),wt=Object.values(Et);function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(r),!0).forEach((function(t){Mt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Tt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var At=_t(ct,(function(e){var t=e.modelsLimit,r=e.limit,n=void 0===r?1/0:r;return Math.min(n,t)})),Pt=_t(ct,(function(e){var t=e.lovescapeModelsLimit,r=e.limit,n=void 0===r?1/0:r;return Math.min(n,t)})),Rt=["".concat(bt,"R"),"forceClient","usePreroll","modelPromotion"],It=_t(ct,(function(e){return e.modelsApiParameters}),(function(e,t){return Ot(Ot({},ht((function(e,r){return!gt(e)&&t.includes(r)}),e.queryParams)),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce((function(e,r){return Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]),e}),{})}(Rt,e))})),jt=_t(It,At,(function(e,t){return Ot(Ot({},e),{},{limit:t})})),Dt=_t(It,Pt,(function(e,t){return Ot(Ot({},e),{},{limit:t})})),Nt=_t(ct,(function(e){return e.quality})),Ct={Cover:"cover",Contain:"contain"},xt={Top:"top",Bottom:"bottom",Left:"left",Right:"right"},kt="win_blur",Bt="win_focus",Ft="thumb_appear",Ut="thumb_disappear",zt={TopRight:"topRight",TopLeft:"topLeft",BottomRight:"bottomRight",BottomLeft:"bottomLeft"},Vt=o(8547),qt=o.n(Vt),$t=o(6478),Gt={insert:"head",singleton:!1},Wt=(qt()($t.A,Gt),$t.A.locals||{}),Yt=function(e,t){return function(){return e.apply(void 0,arguments)&&t.apply(void 0,arguments)}},Ht=function(e,t){return function(){return e.apply(void 0,arguments)||t.apply(void 0,arguments)}},Qt=(o(9119),Ve("Call to starts models loading")),Kt=Ve("Models started loading"),Xt=Ve("Models loaded"),Jt=Ve("Models not loaded"),Zt=Ve("Models ready"),er=Ve("Model thumb rendered"),tr=Ve("replace model"),rr=Ve("Models api parameters loaded"),nr=Ve("models, loading data from api"),ir=Ve("models, api response cached"),or=Ve("models, replace by random models"),sr=Ve("models, api data loaded"),ar=(Ve("models, set ml-event hash"),Ve("Impression ready")),ur=Ve("Tracking parameters loaded"),lr=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r[(e=0,t=r.length-1,Math.floor(Math.random()*(t-e+1)+e))]},cr=(o(9681),function(e){return e.Count="count",e.Weight="weight",e}({}));function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gr=function(e,t){return new Array(e[t]).fill(null).map((function(r,n){return hr(hr({},e),{},{name:t===cr.Count?"".concat(e.name,"_").concat(n+1):e.name})}))},mr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMQAAADEBAMAAAAyiJNYAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAnUExURUdwTJ4pL50oLp0oLp0oLp0oLp0pL50pL50oLqEsMqYyN54rMJwoLjw/TZYAAAAMdFJOUwBJ1J649YRn5R4NM2Y4jIcAAAVaSURBVHja7ZzPTxNBFMe3oMKuHmr8gRoONRoV0kMREw5yqL8gmh5E/BGkh+KPgKaHejEBOVRJMGgPaMR48FCNJh57MWrCQbvddgnzR8lvlnZn5r03MwdNv1eafjq7M++9+b4ZLKuppppq6r/Qm6e9ly+euXXrxcnLveNHtX+9/fRcge2Qf2l8XiPg04M0C5E3cEwT4MdZxtWJZxoAe+8xoU6VFAHOgQKTyO8pqhAiVxhAN6N0wvsCA8l/RCUcZGBdoC2FCYbQLGGR2A8ZSrfRDAdJWGEUTROwDAoByTjCSHoOJ7xjRF2FEtrSVISXAwa+OCOrDAqKTpYpqAp55W+ZkroAwTWthvDkYTfLFFU1Nl/BMzdSUEf44kc1zTSoJlx0TItyJt+19I23Mk1KcBH9uhAuj/CFadM1DiKlD+EafhP8t5HViagZXBOitXFIL2IoJNel9SK8xvz3jWnWK3PLjjtv25h21b/wBf2IkTpEXD+ivJOwhxlQZgei0wTij+nnVPek2pgRBefUVzOIuybXXcPq22uGEIxTuwwhWNLslN05beOmEGXTr2JFJRN1QXiV8NEcYsRE6RFa3ToFcwi/aDJABcNUi0lEzPTbZmxJ3+ZLXHimTCIqaxOKUwY+2Y8S51u81SkVAdUPUvGeRZQfPnQhVkNIO2fRIBG8aJ1f+dsieteJ2p0sC+ZsFYWYFmWlLKyYIw5i7ZemSFZGnTqFC6NAsjLAPtnKtHGgNalI3wXru8hbeVvLBuSJpoVf0obbdYbqpzhjtOJ2naF9iIK4QhCWH69BiA+SIkRYbPqQvocTlxSd4rQ6B0B8lqXWdnHFKB+GI0lpeQmCdUsRMqMsb+2WFL5FaqLY1HVrH9GCAxtlv2WjWM/vAkn3cNdl70KWmuSeQF6OcBUbBTFAuZlRc8BjgK1kVc3GT0J2qzklGx+EqBHyaXC6QGyiqErfKQMa6x9CPg085gjEaIji82lgX2xDPjaKz6eB8sCC/JTQDGuDtqE+1J2YQ+fTYIwDeVEhGdaBOSdV8FavC5tPg4sKtmFtSE2yfBos/tthH+0mNp7ycB+nUqQ1nhIIfyJJazytrlob+FmX1ItY2xSDbbsExWOvoOyoKqV7VsPZLBmCAb6Ec2lrhLZ4EvmTcngXfz0NOGmGfBvwQfhYU34jpiN83c0ftYi0XRG+7hLalY9hzcQk2tBGI6LoXjoWUcE3F7CI5S1EiynEdnSOmELM4/MLEuESmrhIxAgh/CMRGUIDFIcoU9q4OMQoJdvjEBlK9YhClCm7ERxilHS8AYXIkI4VxRDBv0I7aoIZRTdt44YYRZjn16kXsUx0AhCIHPEIFhxRpR4kgyMS1ONwYIRLPtQHRiRotjEC4VJ9YziC7yfacT0IV+HoNBCRIXcioIghclMIivBLxP4cHCE5Pi056gBBuDIjv18VIb9ZkAUgWhUeExAhGsVtemccOArA5QibKSG8x/JB7FFDQC6qLCghjkMajf1yF46PuAPqlqYVEMOga0mtjP6ggJfEZFaFYBSzwKtVKTLiJZAg3RxzEYPQIwQtRATiYuM0DTEMv54pPxeXDwkBXh/iDp28cA4ZBe6qrHwXE6sfxcwk7vxReK7wB590nE0HS7DNiecPYK9gh0ePytq7tA9fZNvHBFaXj39pDH+vNHTRuluP2u64P7X50nrHfpHuxoZFj+F5S6dS5NAGPoDUSDhd1EpojB7eeUuz6qNHeUo3oT56zJR0E+oDT4+lXwvE2EmbsooX9OVT1hssWUa0FWVnjlmGtBFlT0yaAqy3MPT9TwnO0r7RV7JMamLgqGVYRauppv4V/QUPoG/hUBLkNwAAAABJRU5ErkJggg==",yr="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjMzgzODM4IiB2aWV3Qm94PSIwIDAgMjE3IDQyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik02MS4zNTggMjMuNzU5aC00LjM1M2MtLjAxOSAxLjI2LjIxIDIuMzQ4LjY4OCAzLjI2NGE2LjQzNiA2LjQzNiAwIDAwMS45MzMgMi4yNjJjLjgxMS41OTIgMS43NDYgMS4wMjcgMi44MDYgMS4zMDMgMS4wNi4yNzcgMi4xNTMuNDE2IDMuMjc5LjQxNiAxLjM5NCAwIDIuNjItLjE2MyAzLjY4LS40ODcgMS4wNi0uMzI1IDEuOTQ3LS43NzggMi42NjMtMS4zNmE1LjY2MSA1LjY2MSAwIDAwMS42MTgtMi4wNzdjLjM2My0uODAxLjU0NC0xLjY3LjU0NC0yLjYwNSAwLTEuMTQ2LS4yNDMtMi4wODYtLjczLTIuODIxLS40ODctLjczNS0xLjA2NS0xLjMyMi0xLjczMy0xLjc2MWE3LjYxNiA3LjYxNiAwIDAwLTIuMDE5LS45NmMtLjY3Ny0uMi0xLjIwNy0uMzM4LTEuNTg5LS40MTUtMS4yOC0uMzI0LTIuMzE1LS41OTItMy4xMDctLjgwMi0uNzkyLS4yMS0xLjQxMy0uNDItMS44NjEtLjYzLS40NDktLjIxLS43NS0uNDM5LS45MDItLjY4Ny0uMTUzLS4yNDgtLjIzLS41NzMtLjIzLS45NzQgMC0uNDM5LjA5Ni0uODAxLjI4Ny0xLjA4OGEyLjQ4IDIuNDggMCAwMS43My0uNzE2IDIuOTEgMi45MSAwIDAxLjk4OC0uNCA1LjI3IDUuMjcgMCAwMTEuMDg4LS4xMTVjLjU1NCAwIDEuMDY0LjA0OCAxLjUzMi4xNDMuNDY4LjA5Ni44ODMuMjU4IDEuMjQ2LjQ4Ny4zNjMuMjI5LjY1NC41NDQuODczLjk0NS4yMi40LjM0OS45MDcuMzg3IDEuNTE4aDQuMzUzYzAtMS4xODQtLjIyNS0yLjE5MS0uNjczLTMuMDIyYTUuODY3IDUuODY3IDAgMDAtMS44MTktMi4wNDcgNy42NzggNy42NzggMCAwMC0yLjYyLTEuMTYgMTMuMDA4IDEzLjAwOCAwIDAwLTMuMDc4LS4zNThjLS45MTcgMC0xLjgzMy4xMjQtMi43NS4zNzNhNy42NzUgNy42NzUgMCAwMC0yLjQ2MiAxLjE0NSA2LjA5OCA2LjA5OCAwIDAwLTEuNzYxIDEuOTMzYy0uNDQ5Ljc3My0uNjczIDEuNjg1LS42NzMgMi43MzUgMCAuOTM1LjE3NiAxLjczMi41MyAyLjM5YTUuMDU3IDUuMDU3IDAgMDAxLjM4OCAxLjY0N2MuNTczLjQ0IDEuMjIyLjc5NyAxLjk0OCAxLjA3NC43MjUuMjc3IDEuNDcuNTExIDIuMjMzLjcwMi43NDUuMjEgMS40OC40IDIuMjA1LjU3My43MjYuMTcxIDEuMzc1LjM3MiAxLjk0OC42MDEuNTcyLjIzIDEuMDM1LjUxNSAxLjM4OC44Ni4zNTQuMzQzLjUzLjc5MS41MyAxLjM0NSAwIC41MTUtLjEzMy45NC0uNCAxLjI3NGEyLjgxMSAyLjgxMSAwIDAxLTEuMDAzLjc4OGMtLjQuMTktLjgzLjMyLTEuMjg5LjM4Ni0uNDU4LjA2Ny0uODg3LjEtMS4yODguMWE2LjgzNCA2LjgzNCAwIDAxLTEuNzE4LS4yMTQgNC4yNzcgNC4yNzcgMCAwMS0xLjQ0Ny0uNjU5IDMuMjUzIDMuMjUzIDAgMDEtLjk4OC0xLjE2Yy0uMjQ4LS40NzctLjM3Mi0xLjA2LS4zNzItMS43NDZ6bTIwLjA0Ni05Ljg4djE2LjY2Nkg4NS45VjEzLjg4aDYuMTI4VjEwLjFINzUuMjc1djMuNzhoNi4xMjl6bTE3LjQ2OCA1LjQ3di01Ljc1Nmg0LjkyNWMxLjAzMSAwIDEuODA0LjIyNCAyLjMyLjY3My41MTUuNDQ4Ljc3MyAxLjE2OS43NzMgMi4xNjIgMCAxLjAzLS4yNTggMS43NzUtLjc3MyAyLjIzMy0uNTE2LjQ1OS0xLjI4OS42ODgtMi4zMi42ODhoLTQuOTI1em0tNC40OTYtOS4yNXYyMC40NDZoNC40OTZ2LTcuOTloNC40OTZjMS4xMjYgMCAxLjkzNy4yNSAyLjQzNC43NDUuNDk2LjQ5Ny44MiAxLjI4Ljk3MyAyLjM0OS4xMTUuODIuMiAxLjY4LjI1OCAyLjU3Ny4wNTcuODk3LjIxIDEuNjcuNDU4IDIuMzJoNC40OTZhMy4wMSAzLjAxIDAgMDEtLjQ3Mi0xLjA0NiA5LjAyOSA5LjAyOSAwIDAxLS4yMy0xLjMwMyAyMi4zNzQgMjIuMzc0IDAgMDEtLjEtMS4zNDZjLS4wMTktLjQzOS0uMDM4LS44Mi0uMDU3LTEuMTQ1YTEyLjIyNSAxMi4yMjUgMCAwMC0uMjE1LTEuNTQ2IDUuMiA1LjIgMCAwMC0uNS0xLjQxOCAzLjg5IDMuODkgMCAwMC0uODg4LTEuMTE3Yy0uMzYzLS4zMTUtLjgyMS0uNTQ5LTEuMzc1LS43MDF2LS4wNThjMS4xNDUtLjQ1OCAxLjk3MS0xLjEyNiAyLjQ3Ny0yLjAwNC41MDYtLjg3OC43NTktMS45MTkuNzU5LTMuMTIyIDAtLjc4Mi0uMTM4LTEuNTEyLS40MTUtMi4xOWE1LjI4MyA1LjI4MyAwIDAwLTEuMjAzLTEuNzkgNS43MDEgNS43MDEgMCAwMC0xLjg5LTEuMjE3Yy0uNzM1LS4yOTYtMS41Ni0uNDQ0LTIuNDc3LS40NDRIOTQuMzc2em0yMC42NzUgMHYyMC40NDZoNC40OTZWMTAuMWgtNC40OTZ6bTEyLjk0NCA5LjYyMnYtNi4xMjhoMy40OTRhOS40NyA5LjQ3IDAgMDExLjQ4OS4xMTQgMy40OSAzLjQ5IDAgMDExLjI2LjQ0NGMuMzYyLjIyLjY1NC41My44NzMuOTMuMjIuNDAyLjMzLjkyNy4zMyAxLjU3NnMtLjExIDEuMTc0LS4zMyAxLjU3NWMtLjIyLjQtLjUxLjcxMS0uODczLjkzLS4zNjMuMjItLjc4My4zNjgtMS4yNi40NDRhOS40MTYgOS40MTYgMCAwMS0xLjQ5LjExNWgtMy40OTN6bS00LjQ5Ni05LjYyMnYyMC40NDZoNC40OTZ2LTcuMzNoNC43MjVjMS4yOCAwIDIuMzY3LS4xODcgMy4yNjUtLjU1OS44OTctLjM3MiAxLjYyNy0uODY0IDIuMTktMS40NzVhNS42NDYgNS42NDYgMCAwMDEuMjMyLTIuMTA0IDcuNzc2IDcuNzc2IDAgMDAuMzg2LTIuNDIgNy43NSA3Ljc1IDAgMDAtLjM4Ni0yLjQzNCA1LjY2NSA1LjY2NSAwIDAwLTEuMjMyLTIuMDljLS41NjMtLjYxMi0xLjI5My0xLjEwMy0yLjE5LTEuNDc1LS44OTgtLjM3My0xLjk4Ni0uNTU5LTMuMjY1LS41NTloLTkuMjJ6bTMzLjczNCA2LjE1N2gyLjcyYy0uMTUzLTEuMDg4LS40NzctMi4wNDgtLjk3My0yLjg3OGE3LjA4MSA3LjA4MSAwIDAwLTEuODYyLTIuMDc2IDguMTYgOC4xNiAwIDAwLTIuNTQ4LTEuMjYgMTAuNTEgMTAuNTEgMCAwMC0zLjAzNi0uNDNjLTEuNTY1IDAtMi45NTQuMjgyLTQuMTY2Ljg0NS0xLjIxMy41NjMtMi4yMjUgMS4zMzItMy4wMzYgMi4zMDUtLjgxMS45NzQtMS40MjcgMi4xMTUtMS44NDcgMy40MjItLjQyIDEuMzA4LS42MyAyLjcwNi0uNjMgNC4xOTYgMCAxLjQ4OS4xOTYgMi44ODIuNTg3IDQuMTguMzkxIDEuMjk5Ljk3OCAyLjQyNSAxLjc2MSAzLjM4Ljc4My45NTQgMS43NjYgMS43MDMgMi45NSAyLjI0NyAxLjE4My41NDUgMi41NjcuODE3IDQuMTUyLjgxNyAyLjYxNSAwIDQuNjc3LS43MTYgNi4xODUtMi4xNDggMS41MDktMS40MzIgMi4zOTYtMy40MzYgMi42NjQtNi4wMTRoLTIuNzJhNy44MDIgNy44MDIgMCAwMS0uNTE2IDIuMzQ4IDUuNjY3IDUuNjY3IDAgMDEtMS4xODkgMS44NzYgNS40MTMgNS40MTMgMCAwMS0xLjgwNCAxLjIzMmMtLjY5Ny4yOTUtMS40OTQuNDQzLTIuMzkuNDQzLTEuMjIzIDAtMi4yNzMtLjIyOS0zLjE1LS42ODdhNi4xNTIgNi4xNTIgMCAwMS0yLjE2My0xLjg0N2MtLjU2My0uNzczLS45NzgtMS42OC0xLjI0Ni0yLjcyYTEzLjI1IDEzLjI1IDAgMDEtLjQtMy4zMDhjMC0xLjA2OS4xMzMtMi4xLjQtMy4wOTNhNy45NzIgNy45NzIgMCAwMTEuMjQ2LTIuNjQ4IDYuMTg5IDYuMTg5IDAgMDEyLjE0OC0xLjg0OGMuODY4LS40NTggMS45MTQtLjY4NyAzLjEzNS0uNjg3IDEuNDMyIDAgMi42NjguMzYzIDMuNzA5IDEuMDg4IDEuMDQuNzI2IDEuNzEzIDEuODE0IDIuMDE5IDMuMjY1em02LjMtNi4xNTd2MjAuNDQ2aDIuNzJ2LTkuMzY0aDEwLjc2N3Y5LjM2NGgyLjcyVjEwLjFoLTIuNzJ2OC43OTFoLTEwLjc2N1YxMC4xaC0yLjcyem0yNC4xOTcgMTEuOTk5bDMuNDY1LTkuNTM2aC4wNThsMy40MDcgOS41MzZoLTYuOTN6bTIuMDM0LTExLjk5OWwtNy45NjEgMjAuNDQ2aDIuNzc3bDIuMjkxLTYuMTU2aDguNjQ5bDIuMjMzIDYuMTU2aDMuMDA3TDE5Mi43NyAxMC4xaC0zLjAwNnptMTcuNjQgMi4yOTF2MTguMTU1aDIuNzJWMTIuMzloNi44MTZWMTAuMWgtMTYuMzUydjIuMjloNi44MTZ6TTE3LjcgMzcuNzZzLS4yNzItLjA1LS4zMjEtLjA2NGMtLjc5NS0uMjEyLTEuNjE4LS4wMDMtMi4yMDguMjg1LS41NzQuMjgtLjMzLjE2My0uMzMuMTYzLS45NTguNDc1LTEuOTczLjkxMy0zLjAzOCAxLjMxNS0yLjg5NSAxLjA5MS02LjAyOCAxLjg3LTkuMTgyIDIuMzguMjgtLjQxNy41MzctLjgxNi43NzEtMS4xOTguNjMyLTEuMDMgMS40NDEtMi40OTkgMi4zODYtNC4yOTYgMCAwIC43OC0xLjM2IDEuMDktMi4wNzIuMzA4LS43MDYtLjA0OC0xLjM3Mi0uNDktMS44MDMtLjQ0NC0uNDMtMS4zNDQtMS4zOTgtMS4zNDQtMS4zOThDMS43NzcgMjcuNjgxIDAgMjMuNTA4IDAgMTkuMTMgMCA4LjczIDEwLjExNyAwIDIyLjkxIDAgMzUuNyAwIDQ1LjgxNyA4LjczIDQ1LjgxNyAxOS4xMjljMCA5LjgyOS05LjA0IDE4LjE2OC0yMC44MzUgMTkuMDUxLS4yNi4wMi0uNzgzLS4xODEtLjc4OS0uODE2LS4wMzUtMy44MTUtLjA3LTExLjQzMS0uMDctMTEuNDMxIDAtLjM1OC4yNDktLjc5NS41NTYtLjk3NWw4Ljc1OC05LjI0NmMuMjMtLjI0NC40MS0uNzEzLjQtMS4wNGwuMDE4LjU5YS44MTguODE4IDAgMDAtLjgxNy0uNzkybC0yMC43MDkuMDFjLS40MzggMC0uOC4zNTctLjgwOS43ODdsLjAxMi0uNjA0Yy0uMDA3LjMzMy4xOC44MDYuNDA1IDEuMDQ1bDguNzMyIDkuMjM3Yy4zMDMuMTg4LjU1LjYzLjU1Ljk4OCAwIDAtLjAxIDcuNjM4LjAxNCAxMS40NTguMDA0LjU4NC0uNTg0LjgwOC0uODcyLjc3OWEyOS4yMiAyOS4yMiAwIDAxLTIuNjYxLS40MXoiLz48L3N2Zz4=",_r="data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjZjFmMWYxIiB2aWV3Qm94PSIwIDAgMjE3IDQyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik02MS4zNTggMjMuNzU5aC00LjM1M2MtLjAxOSAxLjI2LjIxIDIuMzQ4LjY4OCAzLjI2NGE2LjQzNiA2LjQzNiAwIDAwMS45MzMgMi4yNjJjLjgxMS41OTIgMS43NDYgMS4wMjcgMi44MDYgMS4zMDMgMS4wNi4yNzcgMi4xNTMuNDE2IDMuMjc5LjQxNiAxLjM5NCAwIDIuNjItLjE2MyAzLjY4LS40ODcgMS4wNi0uMzI1IDEuOTQ3LS43NzggMi42NjMtMS4zNmE1LjY2MSA1LjY2MSAwIDAwMS42MTgtMi4wNzdjLjM2My0uODAxLjU0NC0xLjY3LjU0NC0yLjYwNSAwLTEuMTQ2LS4yNDMtMi4wODYtLjczLTIuODIxLS40ODctLjczNS0xLjA2NS0xLjMyMi0xLjczMy0xLjc2MWE3LjYxNiA3LjYxNiAwIDAwLTIuMDE5LS45NmMtLjY3Ny0uMi0xLjIwNy0uMzM4LTEuNTg5LS40MTUtMS4yOC0uMzI0LTIuMzE1LS41OTItMy4xMDctLjgwMi0uNzkyLS4yMS0xLjQxMy0uNDItMS44NjEtLjYzLS40NDktLjIxLS43NS0uNDM5LS45MDItLjY4Ny0uMTUzLS4yNDgtLjIzLS41NzMtLjIzLS45NzQgMC0uNDM5LjA5Ni0uODAxLjI4Ny0xLjA4OGEyLjQ4IDIuNDggMCAwMS43My0uNzE2IDIuOTEgMi45MSAwIDAxLjk4OC0uNCA1LjI3IDUuMjcgMCAwMTEuMDg4LS4xMTVjLjU1NCAwIDEuMDY0LjA0OCAxLjUzMi4xNDMuNDY4LjA5Ni44ODMuMjU4IDEuMjQ2LjQ4Ny4zNjMuMjI5LjY1NC41NDQuODczLjk0NS4yMi40LjM0OS45MDcuMzg3IDEuNTE4aDQuMzUzYzAtMS4xODQtLjIyNS0yLjE5MS0uNjczLTMuMDIyYTUuODY3IDUuODY3IDAgMDAtMS44MTktMi4wNDcgNy42NzggNy42NzggMCAwMC0yLjYyLTEuMTYgMTMuMDA4IDEzLjAwOCAwIDAwLTMuMDc4LS4zNThjLS45MTcgMC0xLjgzMy4xMjQtMi43NS4zNzNhNy42NzUgNy42NzUgMCAwMC0yLjQ2MiAxLjE0NSA2LjA5OCA2LjA5OCAwIDAwLTEuNzYxIDEuOTMzYy0uNDQ5Ljc3My0uNjczIDEuNjg1LS42NzMgMi43MzUgMCAuOTM1LjE3NiAxLjczMi41MyAyLjM5YTUuMDU3IDUuMDU3IDAgMDAxLjM4OCAxLjY0N2MuNTczLjQ0IDEuMjIyLjc5NyAxLjk0OCAxLjA3NC43MjUuMjc3IDEuNDcuNTExIDIuMjMzLjcwMi43NDUuMjEgMS40OC40IDIuMjA1LjU3My43MjYuMTcxIDEuMzc1LjM3MiAxLjk0OC42MDEuNTcyLjIzIDEuMDM1LjUxNSAxLjM4OC44Ni4zNTQuMzQzLjUzLjc5MS41MyAxLjM0NSAwIC41MTUtLjEzMy45NC0uNCAxLjI3NGEyLjgxMSAyLjgxMSAwIDAxLTEuMDAzLjc4OGMtLjQuMTktLjgzLjMyLTEuMjg5LjM4Ni0uNDU4LjA2Ny0uODg3LjEtMS4yODguMWE2LjgzNCA2LjgzNCAwIDAxLTEuNzE4LS4yMTQgNC4yNzcgNC4yNzcgMCAwMS0xLjQ0Ny0uNjU5IDMuMjUzIDMuMjUzIDAgMDEtLjk4OC0xLjE2Yy0uMjQ4LS40NzctLjM3Mi0xLjA2LS4zNzItMS43NDZ6bTIwLjA0Ni05Ljg4djE2LjY2Nkg4NS45VjEzLjg4aDYuMTI4VjEwLjFINzUuMjc1djMuNzhoNi4xMjl6bTE3LjQ2OCA1LjQ3di01Ljc1Nmg0LjkyNWMxLjAzMSAwIDEuODA0LjIyNCAyLjMyLjY3My41MTUuNDQ4Ljc3MyAxLjE2OS43NzMgMi4xNjIgMCAxLjAzLS4yNTggMS43NzUtLjc3MyAyLjIzMy0uNTE2LjQ1OS0xLjI4OS42ODgtMi4zMi42ODhoLTQuOTI1em0tNC40OTYtOS4yNXYyMC40NDZoNC40OTZ2LTcuOTloNC40OTZjMS4xMjYgMCAxLjkzNy4yNSAyLjQzNC43NDUuNDk2LjQ5Ny44MiAxLjI4Ljk3MyAyLjM0OS4xMTUuODIuMiAxLjY4LjI1OCAyLjU3Ny4wNTcuODk3LjIxIDEuNjcuNDU4IDIuMzJoNC40OTZhMy4wMSAzLjAxIDAgMDEtLjQ3Mi0xLjA0NiA5LjAyOSA5LjAyOSAwIDAxLS4yMy0xLjMwMyAyMi4zNzQgMjIuMzc0IDAgMDEtLjEtMS4zNDZjLS4wMTktLjQzOS0uMDM4LS44Mi0uMDU3LTEuMTQ1YTEyLjIyNSAxMi4yMjUgMCAwMC0uMjE1LTEuNTQ2IDUuMiA1LjIgMCAwMC0uNS0xLjQxOCAzLjg5IDMuODkgMCAwMC0uODg4LTEuMTE3Yy0uMzYzLS4zMTUtLjgyMS0uNTQ5LTEuMzc1LS43MDF2LS4wNThjMS4xNDUtLjQ1OCAxLjk3MS0xLjEyNiAyLjQ3Ny0yLjAwNC41MDYtLjg3OC43NTktMS45MTkuNzU5LTMuMTIyIDAtLjc4Mi0uMTM4LTEuNTEyLS40MTUtMi4xOWE1LjI4MyA1LjI4MyAwIDAwLTEuMjAzLTEuNzkgNS43MDEgNS43MDEgMCAwMC0xLjg5LTEuMjE3Yy0uNzM1LS4yOTYtMS41Ni0uNDQ0LTIuNDc3LS40NDRIOTQuMzc2em0yMC42NzUgMHYyMC40NDZoNC40OTZWMTAuMWgtNC40OTZ6bTEyLjk0NCA5LjYyMnYtNi4xMjhoMy40OTRhOS40NyA5LjQ3IDAgMDExLjQ4OS4xMTQgMy40OSAzLjQ5IDAgMDExLjI2LjQ0NGMuMzYyLjIyLjY1NC41My44NzMuOTMuMjIuNDAyLjMzLjkyNy4zMyAxLjU3NnMtLjExIDEuMTc0LS4zMyAxLjU3NWMtLjIyLjQtLjUxLjcxMS0uODczLjkzLS4zNjMuMjItLjc4My4zNjgtMS4yNi40NDRhOS40MTYgOS40MTYgMCAwMS0xLjQ5LjExNWgtMy40OTN6bS00LjQ5Ni05LjYyMnYyMC40NDZoNC40OTZ2LTcuMzNoNC43MjVjMS4yOCAwIDIuMzY3LS4xODcgMy4yNjUtLjU1OS44OTctLjM3MiAxLjYyNy0uODY0IDIuMTktMS40NzVhNS42NDYgNS42NDYgMCAwMDEuMjMyLTIuMTA0IDcuNzc2IDcuNzc2IDAgMDAuMzg2LTIuNDIgNy43NSA3Ljc1IDAgMDAtLjM4Ni0yLjQzNCA1LjY2NSA1LjY2NSAwIDAwLTEuMjMyLTIuMDljLS41NjMtLjYxMi0xLjI5My0xLjEwMy0yLjE5LTEuNDc1LS44OTgtLjM3My0xLjk4Ni0uNTU5LTMuMjY1LS41NTloLTkuMjJ6bTMzLjczNCA2LjE1N2gyLjcyYy0uMTUzLTEuMDg4LS40NzctMi4wNDgtLjk3My0yLjg3OGE3LjA4MSA3LjA4MSAwIDAwLTEuODYyLTIuMDc2IDguMTYgOC4xNiAwIDAwLTIuNTQ4LTEuMjYgMTAuNTEgMTAuNTEgMCAwMC0zLjAzNi0uNDNjLTEuNTY1IDAtMi45NTQuMjgyLTQuMTY2Ljg0NS0xLjIxMy41NjMtMi4yMjUgMS4zMzItMy4wMzYgMi4zMDUtLjgxMS45NzQtMS40MjcgMi4xMTUtMS44NDcgMy40MjItLjQyIDEuMzA4LS42MyAyLjcwNi0uNjMgNC4xOTYgMCAxLjQ4OS4xOTYgMi44ODIuNTg3IDQuMTguMzkxIDEuMjk5Ljk3OCAyLjQyNSAxLjc2MSAzLjM4Ljc4My45NTQgMS43NjYgMS43MDMgMi45NSAyLjI0NyAxLjE4My41NDUgMi41NjcuODE3IDQuMTUyLjgxNyAyLjYxNSAwIDQuNjc3LS43MTYgNi4xODUtMi4xNDggMS41MDktMS40MzIgMi4zOTYtMy40MzYgMi42NjQtNi4wMTRoLTIuNzJhNy44MDIgNy44MDIgMCAwMS0uNTE2IDIuMzQ4IDUuNjY3IDUuNjY3IDAgMDEtMS4xODkgMS44NzYgNS40MTMgNS40MTMgMCAwMS0xLjgwNCAxLjIzMmMtLjY5Ny4yOTUtMS40OTQuNDQzLTIuMzkuNDQzLTEuMjIzIDAtMi4yNzMtLjIyOS0zLjE1LS42ODdhNi4xNTIgNi4xNTIgMCAwMS0yLjE2My0xLjg0N2MtLjU2My0uNzczLS45NzgtMS42OC0xLjI0Ni0yLjcyYTEzLjI1IDEzLjI1IDAgMDEtLjQtMy4zMDhjMC0xLjA2OS4xMzMtMi4xLjQtMy4wOTNhNy45NzIgNy45NzIgMCAwMTEuMjQ2LTIuNjQ4IDYuMTg5IDYuMTg5IDAgMDEyLjE0OC0xLjg0OGMuODY4LS40NTggMS45MTQtLjY4NyAzLjEzNS0uNjg3IDEuNDMyIDAgMi42NjguMzYzIDMuNzA5IDEuMDg4IDEuMDQuNzI2IDEuNzEzIDEuODE0IDIuMDE5IDMuMjY1em02LjMtNi4xNTd2MjAuNDQ2aDIuNzJ2LTkuMzY0aDEwLjc2N3Y5LjM2NGgyLjcyVjEwLjFoLTIuNzJ2OC43OTFoLTEwLjc2N1YxMC4xaC0yLjcyem0yNC4xOTcgMTEuOTk5bDMuNDY1LTkuNTM2aC4wNThsMy40MDcgOS41MzZoLTYuOTN6bTIuMDM0LTExLjk5OWwtNy45NjEgMjAuNDQ2aDIuNzc3bDIuMjkxLTYuMTU2aDguNjQ5bDIuMjMzIDYuMTU2aDMuMDA3TDE5Mi43NyAxMC4xaC0zLjAwNnptMTcuNjQgMi4yOTF2MTguMTU1aDIuNzJWMTIuMzloNi44MTZWMTAuMWgtMTYuMzUydjIuMjloNi44MTZ6TTE3LjcgMzcuNzZzLS4yNzItLjA1LS4zMjEtLjA2NGMtLjc5NS0uMjEyLTEuNjE4LS4wMDMtMi4yMDguMjg1LS41NzQuMjgtLjMzLjE2My0uMzMuMTYzLS45NTguNDc1LTEuOTczLjkxMy0zLjAzOCAxLjMxNS0yLjg5NSAxLjA5MS02LjAyOCAxLjg3LTkuMTgyIDIuMzguMjgtLjQxNy41MzctLjgxNi43NzEtMS4xOTguNjMyLTEuMDMgMS40NDEtMi40OTkgMi4zODYtNC4yOTYgMCAwIC43OC0xLjM2IDEuMDktMi4wNzIuMzA4LS43MDYtLjA0OC0xLjM3Mi0uNDktMS44MDMtLjQ0NC0uNDMtMS4zNDQtMS4zOTgtMS4zNDQtMS4zOThDMS43NzcgMjcuNjgxIDAgMjMuNTA4IDAgMTkuMTMgMCA4LjczIDEwLjExNyAwIDIyLjkxIDAgMzUuNyAwIDQ1LjgxNyA4LjczIDQ1LjgxNyAxOS4xMjljMCA5LjgyOS05LjA0IDE4LjE2OC0yMC44MzUgMTkuMDUxLS4yNi4wMi0uNzgzLS4xODEtLjc4OS0uODE2LS4wMzUtMy44MTUtLjA3LTExLjQzMS0uMDctMTEuNDMxIDAtLjM1OC4yNDktLjc5NS41NTYtLjk3NWw4Ljc1OC05LjI0NmMuMjMtLjI0NC40MS0uNzEzLjQtMS4wNGwuMDE4LjU5YS44MTguODE4IDAgMDAtLjgxNy0uNzkybC0yMC43MDkuMDFjLS40MzggMC0uOC4zNTctLjgwOS43ODdsLjAxMi0uNjA0Yy0uMDA3LjMzMy4xOC44MDYuNDA1IDEuMDQ1bDguNzMyIDkuMjM3Yy4zMDMuMTg4LjU1LjYzLjU1Ljk4OCAwIDAtLjAxIDcuNjM4LjAxNCAxMS40NTguMDA0LjU4NC0uNTg0LjgwOC0uODcyLjc3OWEyOS4yMiAyOS4yMiAwIDAxLTIuNjYxLS40MXoiLz48L3N2Zz4=",vr=function(e){var t=e.hostname;return Re("gate.",t)},br=function(e){return e.hostname.replace(/^(creative|vr|gate)\./,"")},Sr=/(\..*){2,}/,Er=function(e){var t=e.hostname,r=e.protocol,n=void 0===r?"https:":r,i=e.search,o=B((void 0===i?"":i).replace("?",""));if(o.goDomain&&Sr.test(o.goDomain))return"".concat(n,"//").concat(o.goDomain);var s=null;return wt.forEach((function(e){t.includes("-".concat(e,"."))&&(s="-".concat(e,"."))})),s?"".concat(n,"//go").concat(s).concat(bt,".com"):t.includes("creative.",0)||t==="".concat(St,".com")||vr({hostname:t})?"".concat(n,"//go.").concat(br({hostname:t})):"".concat(n,"//g").concat(t.slice(1))},wr=function(e){var t=e.href,r=e.hostname,n=e.protocol,i=void 0===n?"https:":n,o=e.search;return"".concat(Er({hostname:r,protocol:i,search:o}),"/config?url=").concat(encodeURIComponent(t))},Tr=Ve("App initialized"),Lr=Ve("Uniqueness params calculated");function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(r),!0).forEach((function(t){Pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Or(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Or(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||jr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e){return function(e){if(Array.isArray(e))return Dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){if(e){if("string"==typeof e)return Dr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dr(e,t):void 0}}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Nr,Cr={headerLogoUrlBlack:yr,headerLogoUrl:_r,siteName:(Nr=St,Nr?Nr[0].toUpperCase()+Nr.slice(1).toLowerCase():""),domain:"".concat(St,".com"),appIconUrl:mr},xr=function(e,t){return t.get(wr(e))},kr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr;return Ye((function(t,r,n){return e(t,r).then((function(e){var r=e.whiteLabel,i=e.urls,o=e.features,s=e.parameters,a=void 0===s?{}:s,u=a.modelsApi,l=a.impression,c=a.tracking,f=e.abTest;if(f){var d="scab_".concat(f.name),h=!1!==f.sticky,p=h?n.get(d):null;if(f.variants=f.variants.reduce((function(e,t){return cr.Weight in t?e.push.apply(e,Ir(gr(t,cr.Weight))):cr.Count in t?e.push.apply(e,Ir(gr(t,cr.Count))):e.push(t),e}),[]),p&&f.variants.some((function(e){return e.name===p})))f.selectedVariant=p;else{var g=lr(f.variants);h&&n.set(d,g.name),f.selectedVariant=g.name}}var m=$e.effect((function(){return function(e,r){if(e.abTest){var i=e.abTest.variants.find((function(t){return t.name===e.abTest.selectedVariant}))||{},o=i.params;o&&r(et(o));var s=Date.now(),a=["seenAbTest_".concat(e.abTest.name),"seenDomain_".concat(t.hostname),"seenLanding_".concat(ct(e).landing)].reduce((function(e,t){var r,i=Rr(t.split("_"),1)[0],o=function(e){return parseInt(n.get(e),10)}(t),a=!(r=parseInt(String(o),10))||s-r>31968e7;return a&&n.set(t,s),Ar(Ar({},e),{},Pr({},i,Number(!a)))}),{});r(Lr(a))}}}));return{effects:[qe.effect((function(){return function(e,t){return t(rr(u),ur({impression:l,tracking:c}))}})),$e.effect((function(){return function(e,t){return t(Tr())}})),m],reducer:Xe({appInitialized:!1,origin:t.origin,urls:i,features:o,abTest:f,whiteLabelData:r||Ar(Ar({},Cr),t.hostname.endsWith(".local")?{domain:t.hostname.split(".").slice(-2).join(".")}:{})}).on(Lr,(function(e){return function(t){return{abTest:Ar(Ar({},t.abTest),{},{uniquenessParams:e})}}})).on($e,(function(){return{appInitialized:!0}}))}}))})).requires("location","Api","LocalStorage")};function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}function Fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Br(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Br(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zr=function(e,t){return e.urls[t]},Vr=function(e){return function(t){var r=t.features;return(void 0===r?{}:r)[e]||{}}},qr=function(e){return e.abTest},$r=(_t(ct,qr,(function(e,t){var r=e.landing;if(!t||String(t.landing).toLowerCase()!==String(r).toLowerCase())return{};var n=t.selectedVariant,i=t.variants.find((function(e){return e.name===n}))||{},o=i.params;return void 0===o?{}:o})),_t(ct,qr,(function(e,t){var r=e.landing;return t&&String(t.landing).toLowerCase()===String(r).toLowerCase()?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(r),!0).forEach((function(t){Ur(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({abTest:t.name,abTestVariant:t.selectedVariant},t.uniquenessParams):{}}))),Gr=kr,Wr=function(e){return e.prevailingGender};function Yr(e){return Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yr(e)}function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(r),!0).forEach((function(t){Kr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Yr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xr=function(e){return e.modelsMeta||{}},Jr=_t(Xr,ct,Vr("isNewModelApi"),(function(e,t,r){var n=t.player,i=r.enabled;return gt(e)?null:"".concat(n,"-").concat(i?"newAPI":"oldAPI")})),Zr=_t(Xr,(function(e){var t=e.modelsList;return(void 0===t?[]:t).length}),Jr,(function(e,t,r){return Qr(Qr({},e),{},{modelsCount:t,segment:r})}));function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(r),!0).forEach((function(t){nn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=en(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==en(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var on=function(e){return Object.keys(e).reduce((function(t,r){return rn(rn({},t),{},nn({},r,"boolean"!=typeof e[r]?e[r]:function(e){return!0===e?1:0}(e[r])))}),{})};function sn(e){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(e)}var an=["queryParams","landing","path","referrer","modelPromotion"],un=["queryParams","landing","referrer"];function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||pn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(r),!0).forEach((function(t){dn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=sn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hn(e){return function(e){if(Array.isArray(e))return gn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){if(e){if("string"==typeof e)return gn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gn(e,t):void 0}}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var yn,_n=function(e){return function(t,r){return e.includes(r)}},vn={referrer:!0},bn=Ht((function(e,t){return vn[t]}),(yn=gt,function(){return!yn.apply(void 0,arguments)})),Sn=function(e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"click",n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.isIncognito,i=e.trackingParameters,o=e.referrer,s=e.mlHash,a=e.mlHashTime,u=ct(e),l=u.queryParams,c=void 0===l?{}:l,f=u.landing,d=u.path,h=u.referrer,p=u.modelPromotion,g=mn(u,an),m=h||o;return on(ht(Yt(bn,_n([].concat(hn(i),["mlHash","mlHashTime","notifyAfterAV","modelPromotionId","modelId"]))),fn(fn(fn(fn(fn(fn(fn(fn({},c),g),r),Zr(e)),{},{path:t||c.path||d||"/",i:n,landing:f,referrer:m},s?{mlHash:s}:{}),a?{mlHashTime:a}:{}),null!=c&&c.notifyAfterAV?{notifyAfterAV:c.notifyAfterAV}:{}),{},{modelPromotion:p})))}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),i=Wr(e),o=fn(fn(fn({},n),"/"===n.path&&"male"===i?{path:"men"}:{}),$r(e));return F(zr(e,r),ct(e).encrypted?{e:btoa(k(o))}:o)},En=function(e,t,r){var n=ln(Sn(t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).split("?"),2),i=n[0],o=n[1];return"".concat(i).concat("/"===i[i.length-1]?"":"/","api/").concat(e,"?").concat(o)},wn={small:{width:150,height:113},middle:{width:180,height:135},big:{width:240,height:180}},Tn={small:{width:150,height:146},middle:{width:180,height:175},big:{width:240,height:232}},Ln={ON_HOVER:"onHover",ALL:"all",NOT_AT_ALL:"notAtAll"},On={HLS:"hls",CANVAS:"canvas"},Mn=("".concat(St,".com"),{S_CHAT_BEST:"SChatBest",DEFAULT:"default",SNAPSHOT:"snapshot",PREVIEW:"preview",AVATAR:"avatar",ML_PREVIEW:"mlPreview"}),An={best:Mn.DEFAULT,SCBest:Mn.S_CHAT_BEST},Pn={Direct:"direct",IfOnline:"ifOnline",IfOnlineNew:"ifOnlineNew"},Rn=[{models:[]}];function In(e){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(e)}function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(r),!0).forEach((function(t){Nn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=In(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=In(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==In(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cn=function(e,t,r,n){var i,o,s,a=ct(e),u=function(e){var t=e.linkToModel,r=e.modelPromotion,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.username,o=void 0===i?"":i,s=n.modelPromotionId,a=n.id,u=r?{modelPromotionId:s,modelId:a}:{};switch(t){case Pn.IfOnline:case Pn.IfOnlineNew:return{path:"/",query:Dn({onlineModels:o},u)};default:return{path:"/".concat(o),query:Dn({},u)}}}(a,t),l=u.path,c=u.query,f=void 0===c?{}:c;return Sn(e,l,Dn(Dn(Dn(Dn(Dn({},r),a.thumbType===Mn.DEFAULT?{thumbModelId:t.id,thumbUrl:t.thumbUrl}:{}),(i=t,o=a.sortBy,s=i.hasSignupRate,"signupRateSort"===o?{fromSignupRate:s}:{})),f),{},{filtersMatch:t.strict,modelId:t.id}),n)},xn=function(e){return e.Default="default",e.XH="xh",e.CB="cb",e}({}),kn=_t(ct,(function(e){var t=e.thumbSizeKey,r=e.design;return t?r===xn.CB?Tn[t]:wn[t]:{}})),Bn=function(e){var t=[];return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(e){return(t.find((function(t){return t.args.length===e.length&&t.args.every((function(t,r){return t===e[r]}))}))||{}).result}(n)||function(e,r){return t.push({args:e,result:r}),r}(n,e.apply(void 0,n))}},Fn=function(e){return!e.hidden};function Un(e){try{return e.self!==e.top}catch(tv){return!0}}var zn=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((function(){t=null,e.apply(void 0,i)}),r)}},Vn=Ve("Terminate"),qn=Ve("Window blurred"),$n=Ve("Window focused"),Gn=Ve("Window scrolled"),Wn=Ve("Window resized");function Yn(e){return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(e)}function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(r),!0).forEach((function(t){Kn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Yn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xn=function(e){return function(t){return{window:Qn(Qn({},t.window),e)}}},Jn=Ye((function(e,t){var r=Bn((function(e){return function(){return e(qn())}})),n=Bn((function(e){return function(){return e($n())}})),i=Bn((function(t){return function(){return t(Gn(e.scrollY))}})),o=function(t){return t(Wn({height:e.innerHeight,width:e.innerWidth}))},s=Bn((function(e){return zn((function(){return o(e)}),300)})),a=$e.effect((function(){return function(t,a){e.addEventListener("blur",r(a)),e.addEventListener("focus",n(a)),e.addEventListener("scroll",i(a)),e.addEventListener("resize",s(a)),o(a)}})),u=Vn.effect((function(){return function(t,o){e.removeEventListener("blur",r(o)),e.removeEventListener("focus",n(o)),e.removeEventListener("scroll",i(o)),e.removeEventListener("resize",s(o))}}));return{reducer:Xe({referrer:t,window:{iFramed:Un(e),hasFocus:Fn(e.document),scrollTop:0,height:e.innerHeight,width:e.innerWidth}}).on(Gn,(function(e){return Xn({scrollTop:e})})).on(Wn,Xn).on(qn,(function(){return Xn({hasFocus:!1})})).on($n,(function(){return Xn({hasFocus:!0})})),effects:[a,u],actions:{terminate:function(){return function(e,t){return t(Vn())}}}}})).requires("window","referrer"),Zn="appearance_and_behaviour",ei={acceptedParamsConfig:[{key:"nonNudeContent",title:"Non nude content",description:"Show only non nude content, if nonNudeContent=1, autoplay forced to notAtAll, backgroundImage Will be forsed to non nude",section:Zn,type:be,default:!1}]},ti=(Ye((function(){return{effects:[lt(ei)]}})),_t(ct,(function(e){return!!e.nonNudeContent}))),ri=_t(ti,ct,(function(e,t){var r=t.autoplay,n=t.queryParams;return e&&!n.autoplay||r===Ln.NOT_AT_ALL})),ni=(_t(ct,(function(e){return e.autoplayForce})),function(e){return!ri(e)}),ii=["ar-SA","zh-CN","hr-HR","cs-CZ","nl-NL","fi-FI","fr-FR","de-DE","el-GR","he-IL","hu-HU","it-IT","ja-JP","ko-KR","nb-NO","es-ES","pl-PL","pt-PT","pt-BR","ro-RO","ru-RU","sv-SE","th-TH","tr-TR","uk-UA","vi-VN"],oi="en",si=function(){};function ai(){var e=window.MediaSource||window.WebKitMediaSource;if(!e)return!1;var t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}var ui=o(8562),li={insert:"head",singleton:!1},ci=(qt()(ui.A,li),ui.A.locals||{});function fi(e){return fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fi(e)}function di(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hi=function(e){var t=e.createVideo,r=e.stream,n=e.modelId;return function(e){t({video:e,stream:r,modelId:n})}},pi=function(t){var r=t.modelId,n=t.stream,i=t.isCircleView,o=t.muted,s=void 0===o||o;return function(t,o){var a=o.createVideo,u=void 0===a?si:a,l=ai(),c=n.url.includes(".mp4");return e("div",{className:ci.root},e("div",{className:ge()(ci.inner,di({},ci.circle,i))},e("video",{key:r,id:r,oncreate:hi({createVideo:u,stream:n,modelId:r}),autoplay:l&&!c,playsinline:!0,preload:"none",muted:s,disableRemotePlayback:!0})))}},gi=function(t){var r=t.player,n=t.modelId,i=t.key,o=t.model,s=t.isCircleView,a=t.muted;switch(!0){case o.stream.local:case r===On.HLS:return e(pi,{stream:o.stream,key:i,modelId:n,isCircleView:s,muted:a});default:return null}},mi=o(1373),yi={insert:"head",singleton:!1},_i=(qt()(mi.A,yi),mi.A.locals||{});function vi(e){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Si(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(r),!0).forEach((function(t){Ei(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ei(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=vi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wi=null,Ti=function(){},Li=function(e,t){var r=t.play,n=void 0===r?Ti:r;return function(){n(e)}},Oi=function(e,t){var r=t.pause,n=void 0===r?Ti:r;return function(){n(e)}},Mi=function(e,t){var r=t.pause,n=void 0===r?Ti:r,i=t.play,o=void 0===i?Ti:i;return function(t){Array.from(document.querySelectorAll("button")).some((function(e){return e===t.target||e.contains(t.target)}))||(n(),wi=setTimeout((function(){o(e)}),300))}},Ai=function(){clearTimeout(wi)},Pi=function(t){var r=t.key,n=t.model,i=t.linkToSection,o=t.isPlayOnHoverEnabled,s=t.isPlayingEnabled,a=t.showModelName,u=t.content,l=void 0===u?function(){return null}:u,c=t.blurredBackground,f=void 0!==c&&c,d=t.blurredPrivate,h=void 0===d||d,p=t.header,g=void 0===p?null:p,m=t.footer,y=void 0===m?null:m,_=t.additionalClickParams,v=void 0===_?{}:_,b=t.modelUrlName,S=void 0===b?"click":b;return function(t,u){var c,d,p,m,_,b,E=u.onExitLinkClick,w=void 0===E?Ti:E,T=ct(t),L=T.player,O=T.playButton,M=T.thumbFit,A=T.thumbPlace,P=n.id,R=n.stream,I=o&&(!ti(t)||R.local),j=function(e){var t=e.thumbWidth,r=e.thumbHeight;return me(t)||me(r)?kn(e):{width:t,height:r}}(t),D=(null==n?void 0:n.prerollImageUrl)||(R.static?n.staticImageUrl:n.thumbUrl),N=Si(Si(Si({},"public"!==n.status&&h?{filter:"blur(25px)",transform:"scale(1.1)"}:{}),M===Ct.Contain?{backgroundImage:"url(".concat(D,")")}:{}),t.isThumbsSizeFixed?{width:"".concat(j.width,"px"),height:"".concat(j.height,"px")}:{}),C=function(e,t){return(e.playingState||{})[t]}(t,P),x=i?Sn(t):Cn(t,n,v,S);return e("a",{class:ge()(_i.root,Ei({},_i.withShadow,a)),href:x,id:"model-".concat(P),key:P,oncreate:(c=P,d=u,p=d.onItemCreate,m=void 0===p?Ti:p,_=d.observeIntersections,b=void 0===_?Ti:_,function(e){m({modelId:c}),b({key:"thumb",node:e,selector:function(){return{modelId:c}}})}),onmouseenter:I?Li(P,u):Ti,onmouseleave:I?Oi(P,u):Ti,ontouchcancel:I?Ai:Ti,ontouchend:I?Ai:Ti,ontouchstart:I||C?Mi(P,u):Ti,style:N,onclick:w,target:"_blank",rel:"noopener"},e("img",{style:{objectFit:M,objectPosition:A||"center"},class:_i.img,src:D,alt:t.i18n&&t.i18n.locale===oi?t.i18n.t("{$username} webcam, sex chat, nude photos, and sex videos").replace("{$username}",n.username):n.username}),f&&e("div",{className:_i.background,style:{backgroundImage:N.backgroundImage}}),e("div",{class:_i.header},g),s&&e(gi,{player:L,modelId:P,key:r,model:n,actions:u}),!C&&O&&e("svg",{class:_i.playButton,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("rect",{width:"48",height:"48",rx:"24",fill:"black","fill-opacity":"0.4"}),e("path",{d:"M18.5 18.618C18.5 17.8747 19.2823 17.3912 19.9472 17.7236L30.7111 23.1056C31.4482 23.4741 31.4482 24.5259 30.7111 24.8944L19.9472 30.2764C19.2823 30.6088 18.5 30.1253 18.5 29.382V18.618Z",fill:"white",stroke:"white",strokeLinecap:"round",strokeLinejoin:"round"})),e(l,null),e("div",{className:_i.footer},y))}},Ri=o(662),Ii={insert:"head",singleton:!1},ji=(qt()(Ri.A,Ii),Ri.A.locals,function(){return e("svg",{style:{display:"none"}},e("defs",null,e("symbol",{id:"icon-female"},e("path",{d:"m27,24.1c14.3,0 26,11.6 26,25.9c0,13.2 -9.8,24 -22.5,25.7l0,5.7l5.5,0l0,5.5l-5.5,0l0,5.5l-6.8,0l0,-5.5l-5.5,0l0,-5.5l5.5,0l0,-5.7c-12.8,-1.7 -22.6,-12.5 -22.6,-25.7c0,-14.3 11.6,-25.9 25.9,-25.9zm0,6.8c-10.6,0 -19.1,8.5 -19.1,19.1s8.5,19.1 19.1,19.1c10.6,0 19.1,-8.5 19.1,-19.1s-8.5,-19.1 -19.1,-19.1z",fill:"#D63F9B"})),e("symbol",{id:"icon-females"},e("g",{fill:"#D63F9B"},e("path",{d:"M33.4 24.1c5.1 0 9.8 1.5 13.8 4 3.9 2.5 7.1 5.9 9.2 10 1.9 3.6 2.9 7.6 2.9 11.9 0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.5-1.6.7-3.3.7-5.1 0-1.8-.2-3.5-.7-5.1-1.4-5-4.8-9.2-9.2-11.6-2.7-1.5-5.8-2.3-9.2-2.3-10.5 0-19.1 8.6-19.1 19.1s8.6 19.1 19.1 19.1c3.3 0 6.5-.9 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7h5.5v5.5h-5.5v5.5H30v-5.5h-5.5v-5.5H30v-5.7C17.3 74.1 7.5 63.2 7.5 50c0-14.3 11.6-25.9 25.9-25.9z"}),e("path",{d:"M66.6 24.1c14.3 0 25.9 11.6 25.9 25.9 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5H70v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7c-3.8-.5-7.3-1.8-10.4-3.8-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.6 19.1-19.1s-8.6-19.1-19.1-19.1c-3.3 0-6.5.9-9.2 2.4-1.3-1.9-2.9-3.7-4.6-5.2 4-2.6 8.7-4 13.8-4z"}))),e("symbol",{id:"icon-femaleTranny"},e("g",null,e("path",{d:"M30.1 24.1c5.1 0 9.8 1.5 13.8 4 3.9 2.5 7.1 5.9 9.2 10C55 41.7 56 45.7 56 50c0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.5-1.6.7-3.3.7-5.1 0-1.8-.2-3.5-.7-5.1-1.4-5-4.8-9.2-9.2-11.6-2.7-1.5-5.8-2.3-9.2-2.3C19.6 31 11 39.5 11 50.1s8.5 19.1 19.1 19.1c3.3 0 6.4-.8 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7H39v5.5h-5.5v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7C14 74 4.2 63.2 4.2 50c0-14.3 11.6-25.9 25.9-25.9z",fill:"#D63F9B"}),e("path",{d:"M49.5 71.9c-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1s-8.5-19.1-19.1-19.1c-3.3 0-6.5.9-9.2 2.4-1.3-1.9-2.9-3.7-4.6-5.2 4-2.5 8.8-4 13.8-4 6 0 11.4 2 15.8 5.4l5.1-5.1-4.7-4.7 16.2-1.9L93.8 34l-4.7-4.7-5.1 5c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5h-5.5v5.5H60v-5.5h-5.5v-5.5H60v-5.7c-3.9-.5-7.4-1.8-10.5-3.8zM31.3 20.7c4.2.2 8.1 1.3 11.7 3l4.1-4.1L31 17.7l.3 3z",fill:"#A862FF"}))),e("symbol",{id:"icon-male"},e("path",{d:"M82.4 17.7l-1.9 16.2-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7C75.9 64.4 64.3 76 50 76c-14.3 0-25.9-11.6-25.9-25.9s11.6-26 25.9-26c6 0 11.4 2 15.8 5.4l5.1-5.2-4.7-4.7 16.2-1.9zM50 30.9c-10.5 0-19.1 8.6-19.1 19.1S39.5 69.1 50 69.1c10.5 0 19.1-8.6 19.1-19.1S60.6 30.9 50 30.9z",fill:"#61ACEC"})),e("symbol",{id:"icon-maleFemale"},e("g",null,e("path",{d:"M95.8 17.7l-1.9 16.2-4.7-4.7-5.2 5.1c3.3 4.4 5.3 9.8 5.3 15.7 0 14.3-11.6 25.9-25.9 25.9-5.1 0-9.8-1.5-13.9-4-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1 0-10.1-7.9-18.4-17.9-19.1h-1.2c-3.3 0-6.5.9-9.2 2.4-1.3-1.9-2.9-3.7-4.6-5.2 4-2.5 8.8-4 13.8-4 5.7 0 11.3 1.9 15.8 5.4l5.1-5.1-4.7-4.7 16.3-2z",fill:"#61ACEC"}),e("path",{d:"M30.1 24.1c5.1 0 9.8 1.5 13.8 4 3.9 2.5 7.1 5.9 9.2 10C55 41.7 56 45.7 56 50c0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.5-1.6.7-3.3.7-5.1 0-1.8-.2-3.5-.7-5.1-1.4-5-4.8-9.2-9.2-11.6-2.7-1.5-5.8-2.3-9.2-2.3C19.6 31 11 39.5 11 50.1s8.5 19.1 19.1 19.1c3.3 0 6.4-.8 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7H39v5.5h-5.5v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7C14 74 4.2 63.2 4.2 50c0-14.3 11.6-25.9 25.9-25.9z",fill:"#D63F9B"}))),e("symbol",{id:"icon-males"},e("g",{fill:"#61ACEC"},e("path",{d:"M62.6 17.7l-1.9 16.2-4.7-4.8-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 4.3-1 8.4-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8 0 0 .7-3.4.7-5.2 0-10.6-8.6-19.1-19.1-19.1-10.6.1-19.2 8.7-19.2 19.3s8.6 19.1 19.1 19.1c3.3 0 6.4-.8 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2h-.2C39.7 74.6 35 76 30 76 15.7 76 4 64.4 4 50s11.6-26 26-26c6 0 11.5 2 15.8 5.4l5.2-5.2-4.7-4.7 16.3-1.8z"}),e("path",{d:"M95.8 17.7l-1.9 16.2-4.7-4.7-5.2 5.1c3.3 4.4 5.3 9.8 5.3 15.7 0 14.3-11.6 26-26 26-5.1 0-9.9-1.5-13.9-4-3.9-2.5-7.1-6-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.6 0 19.1-8.6 19.1-19.1 0-10.2-7.9-18.5-17.9-19.1l.8-6.8c5.2.4 9.9 2.3 13.8 5.3l5.2-5.2-4.7-4.7 16.3-1.9z"}))),e("symbol",{id:"icon-maleTranny"},e("g",null,e("path",{d:"M49.5 71.9c-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1 0-10.1-7.9-18.4-17.9-19.1l.8-6.8c5.2.4 9.9 2.3 13.8 5.3l5.1-5.1-4.7-4.7 16.2-1.9-1.9 16.2-4.7-4.7-5.1 5.1c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5h-5.5v5.5H60v-5.5h-5.5v-5.5H60v-5.7c-3.9-.5-7.4-1.8-10.5-3.8zM31.3 20.7c4.2.2 8.1 1.3 11.7 3l1.4-1.4-3.4-3.4-10-1.2.3 3z",fill:"#A862FF"}),e("path",{d:"M62.6 17.7l-1.9 16.2-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 4.3-1 8.4-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8 0 0 .7-3.4.7-5.2 0-10.5-8.5-19.1-19.1-19.1-10.5 0-19.1 8.5-19.1 19.1s8.5 19.1 19.1 19.1c3.3 0 6.4-.8 9.1-2.3 1.3 1.9 2.9 3.7 4.6 5.2h-.2c-4 2.5-8.6 3.9-13.7 3.9C15.8 75.9 4.2 64.3 4.2 50s11.6-25.9 25.9-25.9c6 0 11.4 2 15.8 5.4l5.1-5.1-4.7-4.7 16.3-2z",fill:"#61ACEC"}))),e("symbol",{id:"icon-tranny"},e("path",{d:"M50 24.1c6 0 11.4 2 15.8 5.4l5.1-5.1-4.7-4.7 16.2-1.9L80.5 34l-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5v5.5h-5.5v5.5h-6.8v-5.5h-5.5v-5.5h5.5v-5.7C33.9 74 24.1 63.2 24.1 50c0-5.9 2-11.4 5.3-15.8l-5.1-5.1-4.7 4.7-1.9-16.2 16.2 1.9-4.7 4.7 5.1 5.1c4.3-3.2 9.8-5.2 15.7-5.2zm0 6.8c-10.5 0-19.1 8.5-19.1 19.1S39.5 69.1 50 69.1c10.5 0 19.1-8.5 19.1-19.1S60.6 30.9 50 30.9z",fill:"#A862FF"})),e("symbol",{id:"icon-trannies"},e("g",{fill:"#A862FF"},e("path",{d:"M33.4 24.1c5.7 0 11.3 1.9 15.8 5.4l5.1-5.1-4.7-4.7 16.2-1.9L63.9 34l-4.7-4.7-5.2 5c3.4 4.5 5.3 10 5.3 15.7 0 4.3-1 8.3-2.9 11.9-2.1-1.8-3.7-4.1-4.6-6.8.4-1.6.7-3.3.7-5.1 0-10.5-8.5-19.1-19.1-19.1-10.5 0-19.1 8.5-19.1 19.1s8.5 19.1 19.1 19.1c3.3 0 6.5-.9 9.2-2.3 1.3 1.9 2.9 3.7 4.6 5.2-3.1 1.9-6.6 3.3-10.4 3.8v5.7h5.5V87h-5.5v5.5H30V87h-5.5v-5.5H30v-5.7C17.2 74 7.4 63.2 7.4 50c0-5.9 2-11.4 5.3-15.8l-5.1-5.1-4.7 4.7L1 17.7l16.2 1.9-4.7 4.7 5.1 5.1c4.4-3.3 9.8-5.3 15.8-5.3z"}),e("path",{d:"M52.7 71.9c-3.9-2.5-7.1-5.9-9.2-10.1-1.8-3.6-2.9-7.6-2.9-11.9 0-4.3 1-8.3 2.9-11.9 2.1 1.8 3.7 4.2 4.6 6.9-.4 1.6-.7 3.3-.7 5 0 1.7.2 3.4.7 5 1.4 5.1 4.7 9.3 9.2 11.8 2.7 1.5 5.9 2.4 9.2 2.4 10.5 0 19.1-8.5 19.1-19.1 0-10.1-7.9-18.4-17.9-19.1l.8-6.8c5.2.4 9.9 2.3 13.8 5.3l5.1-5.1-4.7-4.7L99 17.7l-1.9 16.2-4.7-4.7-5.2 5.2c3.3 4.4 5.3 9.8 5.3 15.7 0 13.2-9.8 24-22.5 25.7v5.7h5.5V87H70v5.5h-6.8V87h-5.5v-5.5h5.5v-5.7c-3.8-.6-7.4-1.9-10.5-3.9zM34.6 20.7c4.2.2 8.1 1.3 11.7 3l1.4-1.4-3.4-3.4-10.1-1.2.4 3z"})))))}),Di=(o(1972),o(8273)),Ni={insert:"head",singleton:!1},Ci=(qt()(Di.A,Ni),Di.A.locals||{});function xi(e){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xi(e)}function ki(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=xi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bi=function(t,r){var n=t.color,i=t.big;return e("div",{class:ge()(Ci.root,ki({},Ci.big,i)),style:{backgroundColor:n}},r)},Fi=o(9679),Ui={insert:"head",singleton:!1},zi=(qt()(Fi.A,Ui),Fi.A.locals||{});function Vi(e){return Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(e)}function qi(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Vi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $i=function(t){var r=t.color,n=t.big,i=t.dotColor,o=t.universal,s=n?"small":"span";return e(Bi,{color:r,big:n},e("div",{className:ge()(zi.root,qi({},zi.root_universal,o))},!o&&e("span",{className:ge()(zi.online,qi({},zi.big,n)),style:{backgroundColor:i}}),e(s,null,"LIVE")))},Gi=function(t){var r=t.big;return e(Bi,{color:"#566fff",big:r},"VR")},Wi=o(3520),Yi={insert:"head",singleton:!1},Hi=(qt()(Wi.A,Yi),Wi.A.locals||{}),Qi=function(t){var r=t.left,n=t.right;return e("div",{class:Hi.root},r&&e("div",{class:Hi.left},r),n&&e("div",{class:Hi.right},n))},Ki=o(3957),Xi={insert:"head",singleton:!1},Ji=(qt()(Ki.A,Xi),Ki.A.locals||{});function Zi(e){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(e)}function eo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Zi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var to=function(t){var r=t.liveBadge,n=t.showVRBadge,i=t.big,o=t.newDesign;return e("div",{class:ge()(Ji.root,eo({},Ji.big,i))},e(Qi,{newDesign:o,left:r,right:n?e(Gi,{big:i}):null}))},ro=function(e){var t=e.broadcastGender,r=e.gender;return"group"===t?r:t},no=function(e){return e.broadcastVR||function(e,t){return e&&e.length&&-1!==e.indexOf(t)}(e.tags,"autoTagVr")};function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},io.apply(null,arguments)}var oo=function(t,r){var n=t.href,i="http://www.w3.org/1999/xlink",o=function(e,t){n?e.setAttributeNS(i,"href",n):t&&n===t.href||e.removeAttributeNS(i,"href")};return e("use",io({},t,{oncreate:o,onupdate:o}),r)},so=function(t){var r=t.href,n=t.className,i=t.viewBox,o=void 0===i?"0 0 100 100":i;return e("svg",{class:ge()("icon",[n]),viewBox:o},e(oo,{href:r}))},ao=o(5319),uo={insert:"head",singleton:!1},lo=(qt()(ao.A,uo),ao.A.locals||{});function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}function fo(e){return function(e){if(Array.isArray(e))return ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ho(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ho(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function po(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=co(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==co(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var go=function(t){var r=t.rightBadges,n=t.leftBadges,i=t.model,o=t.responsive,s=t.hideOnSmallSpots,a=t.hideModelName,u=void 0!==a&&a,l=t.genderIcon,c=void 0===l||l,f=t.big,d=t.modelName,h=void 0===d?"":d;return e("div",{class:ge()(lo.root,po(po({},lo.big,f),lo.hideOnSmallSpots,s))},e(Qi,{left:i&&!u&&[e("div",{"qa-element":"model-name",className:ge()(lo.modelName,po({},lo.modelNameResponsive,o))},h||i.screenName||i.username)].concat(fo(c?[e(so,{href:"#icon-".concat(ro(i)),className:o?lo.iconResponsive:null})]:[]),fo(n?[n]:[])),right:r}))},mo=o(6617),yo={insert:"head",singleton:!1},_o=(qt()(mo.A,yo),mo.A.locals||{}),vo=o(1385),bo={insert:"head",singleton:!1},So=(qt()(vo.A,bo),vo.A.locals||{}),Eo=function(e){return!e},wo=function(t){var r=t.username,n=t.status;return function(t){var i=t.whiteLabelData||{},o=i.siteName,s=i.themePalette,a=(void 0===s?{}:s).primary,u=void 0===a?"#a2252d":a;return e("div",{className:So.root},e("div",null,e("h1",{className:So.head},r," is currently"," ",Eo(n)?"offline":"on private session"),Eo(n)?e("div",null,"Check out similar models on"," ",e("a",{target:"_blank",style:{color:u},href:En("goToTheRoom",t)},o)):e("div",null,"Check out her room on"," ",e("a",{target:"_blank",style:{color:u},href:Sn(t,"/".concat(r))},o))))}};function To(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Oo={},Mo=function(t){var r=t.fontSize,n=void 0===r?"22px":r,i=t.lpomega,o=void 0!==i&&i;return function(t){var r=ct(t),i=r.hideModelName,s=r.hideLiveBadge,a=r.liveBadgeColor,u=r.modelName,l=To(t.modelsList,1)[0],c=void 0===l?Oo:l,f="public"===c.status;return e("div",{className:_o.layoutWrapper,style:{fontSize:n}},e(ji,null),c===Oo?e(wo,{username:u}):[e(Pi,{key:"player",model:c,header:e(to,{showVRBadge:no(c)&&!o,liveBadge:!o&&!s&&e($i,{color:a})}),footer:!i&&!o&&e(go,{model:c}),isPlayingEnabled:ni(t)&&f,blurredBackground:o}),f?null:e(wo,{username:c.username,status:c.status})])}},Ao=(o(3898),o(3073),o(973),o(3847));function Po(e){return Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(e)}function Ro(){Ro=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new R(n||[]);return i(s,"_invoke",{value:O(e,r,a)}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",m={};function y(){}function _(){}function v(){}var b={};l(b,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==r&&n.call(E,s)&&(b=E);var w=v.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(i,o,s,a){var u=f(e[i],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Po(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,r,n){var i=d;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var u=M(a,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=f(t,r,n);if("normal"===l.type){if(i=n.done?g:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=g,n.method="throw",n.arg=l.arg)}}}function M(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=f(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Po(t)+" is not iterable")}return _.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:_,configurable:!0}),_.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,a,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new L(c(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(w),l(w,u,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Io(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return jo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jo(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Do(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}var No=function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Do(o,n,i,s,a,"next",e)}function a(e){Do(o,n,i,s,a,"throw",e)}s(void 0)}))}}(Ro().mark((function e(t){var r,n,i;return Ro().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Io(t),e.prev=1,r.s();case 3:if((n=r.n()).done){e.next=15;break}return i=n.value,e.prev=5,e.next=8,i();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5);case 13:e.next=3;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(1),r.e(e.t1);case 20:return e.prev=20,r.f(),e.finish(20);case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[1,17,20,23],[5,11]])})));return function(t){return e.apply(this,arguments)}}(),Co=No,xo=(o(1947),o(5226),["ar","br","cz","de","en","es","fr","gr","hu","it","jp","nl","no","pl","pt","ro","ru","sw","tr","ja","sv","el","cs","zh","ko"]);function ko(e){return function(e){if(Array.isArray(e))return Fo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(e,t){if(e){if("string"==typeof e)return Fo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fo(e,t):void 0}}function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Uo=function(e,t,r){var n,i=e.hostname,o=e.href,s=function(e){var t=e.match(new RegExp("^(.*\\.|)(".concat(xo.join("|"),")\\..*$")));return t&&t[2]}(i)||(null!==(n=U(o).language)&&void 0!==n?n:null)||t.language,a={hit:[],partialHit:[]};return r.forEach((function(e){if(e!==s){if(2===s.length||"-"===s[2]){var t=s.slice(0,2);e.startsWith(t)&&a.partialHit.push(e)}}else a.hit.push(e)})),[].concat(ko(a.hit),ko(a.partialHit),[oi])};function zo(e){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zo(e)}function Vo(){Vo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new R(n||[]);return i(s,"_invoke",{value:O(e,r,a)}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",m={};function y(){}function _(){}function v(){}var b={};l(b,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==r&&n.call(E,s)&&(b=E);var w=v.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(i,o,s,a){var u=f(e[i],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==zo(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,r,n){var i=d;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var u=M(a,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=f(t,r,n);if("normal"===l.type){if(i=n.done?g:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=g,n.method="throw",n.arg=l.arg)}}}function M(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=f(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(zo(t)+" is not iterable")}return _.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:_,configurable:!0}),_.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,a,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new L(c(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(w),l(w,u,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function qo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(r),!0).forEach((function(t){Ho(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Go(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function Wo(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Go(o,n,i,s,a,"next",e)}function a(e){Go(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Yo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qo(n.key),n)}}function Ho(e,t,r){return(t=Qo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qo(e){var t=function(e,t){if("object"!=zo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zo(t)?t:t+""}var Ko=function(){return function(e,t,r){return t&&Yo(e.prototype,t),r&&Yo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ho(this,"i18nPaths",void 0),Ho(this,"data",{}),Ho(this,"locale",oi),Ho(this,"hostname",void 0),Ho(this,"checkSameLocale",(function(e,t){return e.every((function(e){return e.locale===t}))})),this.hostname=r,this.i18nPaths=t}),[{key:"init",value:(t=Wo(Vo().mark((function e(t){var r,n,i,o,s,a=this;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.i18nPaths.map((function(e){return a.loadTranslationFile(e,t)})));case 2:return i=e.sent,o=i.reduce((function(e,t){var r=t.data;return $o($o({},e),r)}),{}),s=null!==(r=null===(n=i.at(0))||void 0===n?void 0:n.locale)&&void 0!==r?r:oi,this.checkSameLocale(i,s)?this.locale=s:this.locale=oi,this.data=o,e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"loadTranslationFile",value:(e=Wo(Vo().mark((function e(t,r){var n,i,s,a,u;return Vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.startsWith("/")?"/static/9271e4b9/s":o.p,i=n,s=t.startsWith("http")?t:"https://".concat(this.hostname).concat(i).concat(t),a=r.map((function(e){return Wo(Vo().mark((function t(){return Vo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.get("".concat(s,"/").concat(e,".json"));case 2:return t.t0=t.sent,t.t1=e,t.abrupt("return",{data:t.t0,locale:t.t1});case 5:case"end":return t.stop()}}),t)})))})),e.next=6,Co(a);case 6:return u=e.sent,e.abrupt("return",null!=u?u:{data:{},locale:oi});case 8:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"t",value:function(e,t){var r="number"==typeof t,n=r?function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("|");return r[function(e,t){switch(t){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":default:return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return 1===e?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"hy":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return 0===e||1===e?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return 1===e?0:e>=2&&e<=4?1:2;case"ga":return 1===e?0:2===e?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return 1===e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return 0===e?0:e%10==1&&e%100!=11?1:2;case"pl":return 1===e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return 1===e?0:2===e?1:8===e||11===e?2:3;case"ro":return 1===e?0:0===e||e%100>0&&e%100<20?1:2;case"ar":return 0===e?0:1===e?1:2===e?2:e>=3&&e<=10?3:e>=11&&e<=99?4:5}}(e,t.slice(0,2))]||r[0]||void 0}(this.data[e],t,this.locale):this.data[e];if(void 0===n)return e;try{return r?(0,Ao.sprintf)(n,t):n}catch(i){return console.error(i),n}}}]);var e,t}();function Xo(e,t,r){var n=Array.isArray(e)?e:[e];return new Ko(n,r.host||r.hostname).init(Uo(r,t.navigator,ii))}var Jo=function(t,r){var n=t.message,i=t.count,o=t.context;return function(t){return e("span",null,t.i18n.t(n||r[0],i,o))}};var Zo=function(t){var r=t.model,n=t.hideButton,i=t.closable,o=t.actions;return function(t){return e("div",{className:Wt.rootContent},e(Mo,{fontSize:"16px"}),i&&e("button",{className:Wt.closeButton,onclick:o.handleClose,type:"button"},"Close ad ×"),r&&!n&&e("a",{className:Wt.ctaButton,target:"_blank",href:Cn(t,r)},e(Jo,null,"Live sex")))}};function es(e){return es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(e)}function ts(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=es(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==es(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rs=function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t};function ns(e){return function(e){if(Array.isArray(e))return is(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return is(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?is(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function is(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var os,ss,as,us=(os=Array.isArray.bind(Array),ss=function(e){return"[".concat(e.reduce((function(e,t){var r=t.key,n=t.value;return me(n)?e:[].concat(ns(e),["".concat(r,"=").concat(n)])}),[]).join("|"),"]")},as=te,function(){return os.apply(void 0,arguments)?ss.apply(void 0,arguments):as.apply(void 0,arguments)});function ls(e){return ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ls(e)}var cs=["filterOptions"],fs=["models","defaultTags","total","prevailingGender"];function ds(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(r),!0).forEach((function(t){ps(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ps(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ls(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ls(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ls(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gs(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var ms=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.filterOptions,i=gs(r,cs),o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;return e.get(zr(t,s||"modelsApi"),on(hs(hs(hs({landing:ct(t).landing},i),n?{filterOptions:us(n)}:{}),i.stripcashR?{cb:Math.abs(rs("".concat(Math.random()).concat(Date.now())))}:{})),o?{credentials:"include",mode:"cors"}:{}).then((function(e){var t=e.models,r=e.defaultTags,n=void 0===r?[]:r,i=e.total;return{prevailingGender:e.prevailingGender,tags:n,meta:gs(e,fs),total:i,models:t}}))},ys=function(e){return function(t){return t.reduce((function(t,r){return t+(r[e]?1:0)}),0)}},_s=ys("inWatchHistory"),vs=ys("inFavorites");function bs(e){return bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bs(e)}function Ss(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(r),!0).forEach((function(t){ws(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ss(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ws(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=bs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ts={acceptedParamsConfig:[{key:"forceClient",type:be,default:!0,private:!0},{key:"usePreroll",section:Zn,type:be},{key:"strict",type:be,private:!0},{key:"tag",type:Se,convertValue:function(e){return"couple"===e?"couples":e},private:!0},{key:"limit",title:"Limit of models to show",description:"Limit can not be greater than defined by creative",type:ye,min:1,private:!0},{key:"stripcashR",title:"Retargeting",description:"Parameter to get in resposne necessary data and sorting for retargeting campaigns",section:Zn,type:be,default:!1},{key:"sortBy",private:!0,type:Ee,enum:["signupRateSort"]},{key:"linkToModel",title:"Link to model",description:"determines location of click by model, direct to models page or throw checking her online status",section:Zn,type:Ee,multiple:!1,enum:Object.values(Pn),default:Pn.IfOnlineNew,private:!0},{key:"modelPromotion",title:"Model promotion",description:"",section:Zn,type:be,default:!1}]};function Ls(e){return Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(e)}function Os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(r),!0).forEach((function(t){As(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Os(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function As(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ls(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ls(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ls(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ps=function(e,t){return Object.keys(e.stream.urls).reduce((function(e,r){return Ms(Ms({},e),{},As({},r,t))}),{})};function Rs(e){return Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rs(e)}function Is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function js(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(r),!0).forEach((function(t){Ds(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Is(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ds(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Rs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Rs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ns=function(e,t){var r;return 0===(null==t||null===(r=t.models)||void 0===r?void 0:r.length)?e:js(js({},e),{},{models:null==e?void 0:e.models.map((function(r,n){if(n<e.meta.requestedLimit){var i=null==t?void 0:t.models[n];return i?js(js(js({},r),i),{},{stream:js(js(js({},r.stream),i.stream),{},{urls:Ps(r,i.stream.url)})}):r}return r}))})};var Cs=function(e){return new Promise((function(t,r){var n=document.createElement("video");n.src=e,n.crossOrigin="anonymous",n.currentTime=1,n.onloadeddata=function(){var e=document.createElement("canvas");e.width=n.videoWidth,e.height=n.videoHeight,e.getContext("2d").drawImage(n,0,0,e.width,e.height),t(e.toDataURL("image/jpeg"))},n.onerror=function(e){return r(e)}}))},xs=function(){return{models:[]}},ks=function(e,t,r,n){var i=F(zr(r,"prerollsUrl"),{videosList:n.join(",")});return e.get(i).then((function(e){var t=e.videos,r=void 0===t?[]:t;return Promise.all(r.map((function(e){return Cs(e).then((function(e){return e})).catch((function(){return""}))}))).then((function(e){return{models:e.map((function(e,t){var n=r[t],i=function(e){return e.split("/").at(-1).split(".").shift()}(n);return{screenName:i,prerollImageUrl:e,stream:{url:n,urls:{original:n}}}}))}})).catch(xs)})).catch(xs)};function Bs(e){return Bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bs(e)}function Fs(e){return function(e){if(Array.isArray(e))return Us(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Us(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Us(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Us(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function zs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(r),!0).forEach((function(t){qs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Bs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $s=function(e){return e.slice(0,2).reduce((function(e,t){return Vs(Vs(Vs({},t),e),{},{models:[].concat(Fs(e.models),Fs(t.models))})}),{models:[]})};function Gs(e){return Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gs(e)}function Ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ys(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(r),!0).forEach((function(t){Hs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Gs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gs(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"modelsApi";return Ye((function(t,r){var n=sr.effectOnce((function(){return function(e,t){t(ar())}})),i=Xt.effect((function(){return function(e,t){return t(Zt())}})),o=tr.effect((function(e){var t=e.replaceBy.id;return function(e,r){return r(Zt({id:t}))}})),s=Qt.effect((function(n){return function(i,o){o(Kt());var s=ct(i),a=s.videosList,u=void 0===a?[]:a,l=s.landing,c=void 0===l?"":l,f=s.queryParams,d=u.length>0&&"LPAkira"===c,h=Ys(Ys({},jt(i)),n),p=[ms(t,i,h,"verticalModelsApi"!==e,e)];return"ls"===(null==f?void 0:f.lpversion)&&p.push(function(e,t,r,n){return new Promise((function(i){return ms(e,t,n,!0,r).then((function(e){return i(e)})).catch((function(){return i(Rn)}))}))}(t,i,"loveScapeModelsApi",Ys(Ys({},Dt(i)),n))),d&&p.push(ks(t,r,i,u)),Promise.all(p).then((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[Rn],r=t[0];return"ls"===(null==f?void 0:f.lpversion)&&(r=$s(t)),d&&(r=Ns(r,t.at(-1))),o((null===(e=r)||void 0===e||null===(e=e.models)||void 0===e?void 0:e.length)>0?Xt(r):Jt(Ys(Ys({},r),{},{requestParams:h})),sr(r))}))}}));return{reducer:Xe({prevailingGender:"female",isLoading:!1,modelsApiParameters:[],modelsList:[],isThumbsSizeFixed:!1,modelsMeta:{shownModelsCount:0,modelsInWatchHistoryCount:-1,modelsInFavoritesCount:-1}}).on(tr,(function(e){var t=e.modelId,r=e.replaceBy;return function(e){return{modelsList:e.modelsList.map((function(e){return e.id===t?r:e}))}}})).on(rr,(function(){return{modelsApiParameters:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}})).on(er,(function(){return function(e){var t=e.modelsMeta;return{modelsMeta:Es(Es({},t),{},{shownModelsCount:t.shownModelsCount+1})}}})).on(Kt,(function(){return function(){return{isLoading:!0}}})).on(sr,(function(e){var t=e.tags,r=e.meta,n=e.prevailingGender;return function(e){return{prevailingGender:n||e.prevailingGender,tags:t,isLoading:!1,modelsMeta:Es(Es(Es({},e.modelsMeta),r),{},{shownModelsCount:0})}}})).on(Xt,(function(e){var t=e.models;return function(e){return{modelsList:t,modelsMeta:Es(Es({},e.modelsMeta),{},{modelsInWatchHistoryCount:ct(e).stripcashR?_s(t):-1,modelsInFavoritesCount:ct(e).stripcashR?vs(t):-1})}}})),effects:[lt(Ts),i,o,n,s],actions:{onItemCreate:function(e){var t=e.modelId;return function(e,r){return r(er({modelId:t}))}}}}})).requires("Api","location")},Ks=Qs,Xs=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.forEach((function(t){return t(e)}))}},Js=function(e,t,r){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si,o=[],s=function(){return Xs.apply(void 0,o)()};t&&o.push(e(t,Xs(n,s),!0)),r&&o.push(e(r,Xs(i,s),!0))}},Zs=function(e,t){return function(r){return function(n,i,o){var s=jt(n);return i(et(t(r))),JSON.stringify(s)===JSON.stringify(jt(n))?Promise.resolve():(i(e()),new Promise(Js(o,Xt,Jt)).catch((function(e){var t=e.requestParams,r=new Error("Models response is empty!");return r.requestParams=t,Promise.reject(r)})))}}},ea=o(6561),ta=o.n(ea),ra=function(){var e=new(ta()),t={emit:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach((function(t){var r=t.name,n=t.payload;return e.emit(r,n)}))},on:function(r,n){return r.once?e.once(r.eventName,n):e.on(r.eventName,n),t},off:function(r,n){return e.off(r.eventName,n),t},once:function(r,n){return e.once(r.eventName,n),t}};return t};function na(e){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},na(e)}var ia=["$update","$effect"];function oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(r),!0).forEach((function(t){aa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function aa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=na(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==na(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ua(e){return function(e){if(Array.isArray(e))return la(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return la(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?la(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ca=function(e){var t,r=ua(e.modules),n=ra(),i=n.emit,o=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?n.once(e,t):n.on(e,t),function(){n.off(e,t)}};return{addModules:function(e){return r.push.apply(r,ua(e)),this},init:function(e){return t=Promise.all(r.map((function(t){return t(sa({},e))}))).then((function(e){return e.reduce((function(e,t){return{reducers:[].concat(ua(e.reducers),ua(t.reducer?[t.reducer]:[])),initialState:sa(sa({},e.initialState),(t.reducer||{}).initialState),effects:[].concat(ua(e.effects),ua(t.effects||[])),actions:Object.keys(t.actions||{}).reduce((function(e,r){return sa(sa({},e),{},aa({},r,(n=t.actions[r],function(e){return function(t){var r=n(e);return"function"==typeof r?r(t,i,o):r}})));var n}),e.actions)}}),{initialState:{},reducers:[],effects:[],actions:{$effect:function(e){return function(t){"function"==typeof e&&e(t,i,o)}},$update:function(e){return function(t){return"function"==typeof e?e(t):e}}}})})),this},mount:function(e,r,o){return o&&o.firstChild&&o.insertBefore(document.createElement("div"),o.firstChild),t.then((function(t){var s,a=t.initialState,u=t.actions,l=t.reducers,c=t.effects,f=e(a,u,r,o),d=f.$update,h=f.$effect,p=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(f,ia);return l.forEach((function(e){return e.bind(n,d)})),(s=c,s.reduce((function(e,t){return e.concat(t)}),[])).forEach((function(e){var t=e.event,r=e.effect,i=function(e){return h(r(e))};e.options.once?n.once(t,i):n.on(t,i)})),i(qe(),$e()),p.dispatch=i,p}))}}};function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?da(Object(r),!0).forEach((function(t){pa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fa(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ga(e){return function(e){if(Array.isArray(e))return ma(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ma(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ma(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ya=function(e){var t=e.video,r=e.onPlay,n=e.onError,i=e.onMetaLoaded,o=function(){return n({fatal:!1,type:"mp4"})};t.addEventListener("loadedmetadata",i),t.addEventListener("error",o),t.addEventListener("abort",o),t.addEventListener("timeupdate",r)},_a={height:"auto",width:"100%",maxHeight:"unset"},va={width:"auto",height:"100%",maxWidth:"unset"},ba={height:"100%",width:"100%"},Sa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=r.thumbFit,i=r.thumbPlace,o={};if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){if(n===Ct.Contain)o=ba;else{var s=e.parentElement,a=s.offsetHeight,u=s.offsetWidth,l=t.height,c=void 0===l?e.videoHeight:l,f=t.width;o=u/a-(void 0===f?e.videoWidth:f)/c>0?_a:va}i&&Object.values(xt).includes(i)&&(o.objectPosition=i)}Object.assign(e.style,o)};var Ea=function(e){switch(e){case Mn.S_CHAT_BEST:return"popularSnapshotUrl";case Mn.PREVIEW:return"previewUrl";case Mn.AVATAR:return"avatarUrl";case Mn.ML_PREVIEW:return"mlPreviewImage";default:return"snapshotUrl"}},wa=_t(ct,(function(e,t){return t}),(function(e,t){var r=e.thumbType;if(!e.queryParams.thumbType&&t.staticImageUrl)return"staticImageUrl";var n=Ea(r);return t[n]?n:Ea()})),Ta=function(e,t){return!!function(e,t){return t.thumbsByModelId[e]||{}}(e,t).visible},La=function(e){var t=ti(e);return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).stream;return t?e.local:!e.static}},Oa=function(e,t,r){if("vertical"===ct(e).landing)return!0;var n=e.window,i=n.hasFocus,o=n.iFramed;if(e.limitExceeded||!e.modelsList[r]||!La(e)(e.modelsList[r]))return!1;var s=Ta(t,e);return ct(e).autoplay===Ln.ALL&&(s&&(o||i))},Ma=function(e,t){for(var r=0;r<t.length;){if(e(t[r]))return r;r+=1}return-1},Aa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.modelsList.map((function(e){return e.id})).filter((function(e){return!t||e===t}))},Pa=Ve("Model start playing"),Ra=Ve("Model(s) stop playing"),Ia=Ve("Model(s) is playing"),ja=Ve("Player is gone"),Da=Ve("Player data downloaded"),Na=Ve("Player disabled"),Ca=Ve("Player enabled"),xa=Ve("Window blured or focused"),ka=Ve("Send playback error"),Ba=Ve("Set failed to play count"),Fa=o(8502);function Ua(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var za="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==o.g?o.g:{};function Va(e){return e&&e.__esModule?e.default:e}var qa={},$a={},Ga=za.parcelRequire5d5f;null==Ga&&((Ga=function(e){if(e in qa)return qa[e].exports;if(e in $a){var t=$a[e];delete $a[e];var r={id:e,exports:{}};return qa[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){$a[e]=t},za.parcelRequire5d5f=Ga),Ga.register("8NFq9",(function(e,t){Ua(e.exports,"default",(function(){return Ga("a8VW4").__decorate})),Ga("a8VW4")})),Ga.register("a8VW4",(function(e,t){function r(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}Ua(e.exports,"__decorate",(function(){return r})),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError})),Ga.register("eQOGK",(function(e,t){Ua(e.exports,"default",(function(){return r}));var r=function(e,t,r){if(!r||"function"!=typeof r.value)throw new TypeError(`Only methods can be decorated with @bind. <${t}> is not a method!`);return{configurable:!0,get(){const e=r.value?.bind(this);return Object.defineProperty(this,t,{value:e,configurable:!0,writable:!0}),e}}}})),Ga.register("3mtZ4",(function(e,t){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",a=32,u=128,l=1/0,c=9007199254740991,f=NaN,d=4294967295,h=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",a],["partialRight",64],["rearg",256]],p="[object Arguments]",g="[object Array]",m="[object Boolean]",y="[object Date]",_="[object Error]",v="[object Function]",b="[object GeneratorFunction]",S="[object Map]",E="[object Number]",w="[object Object]",T="[object Promise]",L="[object RegExp]",O="[object Set]",M="[object String]",A="[object Symbol]",P="[object WeakMap]",R="[object ArrayBuffer]",I="[object DataView]",j="[object Float32Array]",D="[object Float64Array]",N="[object Int8Array]",C="[object Int16Array]",x="[object Int32Array]",k="[object Uint8Array]",B="[object Uint8ClampedArray]",F="[object Uint16Array]",U="[object Uint32Array]",z=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,W=RegExp($.source),Y=RegExp(G.source),H=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),re=/^\s+/,ne=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,de=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,me=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,be="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Se="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",we="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Le="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="["+Le+"]",Me="["+be+"]",Ae="\\d+",Pe="["+Se+"]",Re="["+Ee+"]",Ie="[^\ud800-\udfff"+Le+Ae+Se+Ee+we+"]",je="\ud83c[\udffb-\udfff]",De="[^\ud800-\udfff]",Ne="(?:\ud83c[\udde6-\uddff]){2}",Ce="[\ud800-\udbff][\udc00-\udfff]",xe="["+we+"]",ke="\\u200d",Be="(?:"+Re+"|"+Ie+")",Fe="(?:"+xe+"|"+Ie+")",Ue="(?:['’](?:d|ll|m|re|s|t|ve))?",ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ve="(?:"+Me+"|"+je+")?",qe="["+Te+"]?",$e=qe+Ve+"(?:"+ke+"(?:"+[De,Ne,Ce].join("|")+")"+qe+Ve+")*",Ge="(?:"+[Pe,Ne,Ce].join("|")+")"+$e,We="(?:"+[De+Me+"?",Me,Ne,Ce,"[\ud800-\udfff]"].join("|")+")",Ye=RegExp("['’]","g"),He=RegExp(Me,"g"),Qe=RegExp(je+"(?="+je+")|"+We+$e,"g"),Ke=RegExp([xe+"?"+Re+"+"+Ue+"(?="+[Oe,xe,"$"].join("|")+")",Fe+"+"+ze+"(?="+[Oe,xe+Be,"$"].join("|")+")",xe+"?"+Be+"+"+Ue,xe+"+"+ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ae,Ge].join("|"),"g"),Xe=RegExp("["+ke+"\ud800-\udfff"+be+Te+"]"),Je=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ze=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],et=-1,tt={};tt[j]=tt[D]=tt[N]=tt[C]=tt[x]=tt[k]=tt[B]=tt[F]=tt[U]=!0,tt[p]=tt[g]=tt[R]=tt[m]=tt[I]=tt[y]=tt[_]=tt[v]=tt[S]=tt[E]=tt[w]=tt[L]=tt[O]=tt[M]=tt[P]=!1;var rt={};rt[p]=rt[g]=rt[R]=rt[I]=rt[m]=rt[y]=rt[j]=rt[D]=rt[N]=rt[C]=rt[x]=rt[S]=rt[E]=rt[w]=rt[L]=rt[O]=rt[M]=rt[A]=rt[k]=rt[B]=rt[F]=rt[U]=!0,rt[_]=rt[v]=rt[P]=!1;var nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},it=parseFloat,ot=parseInt,st="object"==typeof za&&za&&za.Object===Object&&za,at="object"==typeof self&&self&&self.Object===Object&&self,ut=st||at||Function("return this")(),lt=t&&!t.nodeType&&t,ct=lt&&e&&!e.nodeType&&e,ft=ct&&ct.exports===lt,dt=ft&&st.process,ht=function(){try{return ct&&ct.require&&ct.require("util").types||dt&&dt.binding&&dt.binding("util")}catch(e){}}(),pt=ht&&ht.isArrayBuffer,gt=ht&&ht.isDate,mt=ht&&ht.isMap,yt=ht&&ht.isRegExp,_t=ht&&ht.isSet,vt=ht&&ht.isTypedArray;function bt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function St(e,t,r,n){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(n,s,r(s),e)}return n}function Et(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function wt(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Lt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function Ot(e,t){return!(null==e||!e.length)&&xt(e,t,0)>-1}function Mt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function At(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Pt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Rt(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r}function It(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function jt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Dt=Ut("length");function Nt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Ct(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function xt(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Ct(e,Bt,r)}function kt(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}function Bt(e){return e!=e}function Ft(e,t){var r=null==e?0:e.length;return r?qt(e,t)/r:f}function Ut(e){return function(t){return null==t?r:t[e]}}function zt(e){return function(t){return null==e?r:e[t]}}function Vt(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function qt(e,t){for(var n,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function $t(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Gt(e){return e?e.slice(0,ar(e)+1).replace(re,""):e}function Wt(e){return function(t){return e(t)}}function Yt(e,t){return At(t,(function(t){return e[t]}))}function Ht(e,t){return e.has(t)}function Qt(e,t){for(var r=-1,n=e.length;++r<n&&xt(t,e[r],0)>-1;);return r}function Kt(e,t){for(var r=e.length;r--&&xt(t,e[r],0)>-1;);return r}var Xt=zt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Jt=zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zt(e){return"\\"+nt[e]}function er(e){return Xe.test(e)}function tr(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function rr(e,t){return function(r){return e(t(r))}}function nr(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];a!==t&&a!==s||(e[r]=s,o[i++]=r)}return o}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function or(e){return er(e)?function(e){for(var t=Qe.lastIndex=0;Qe.test(e);)++t;return t}(e):Dt(e)}function sr(e){return er(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function ar(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var ur=zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),lr=function e(t){var o,ne=(t=null==t?ut:lr.defaults(ut.Object(),t,lr.pick(ut,Ze))).Array,be=t.Date,Se=t.Error,Ee=t.Function,we=t.Math,Te=t.Object,Le=t.RegExp,Oe=t.String,Me=t.TypeError,Ae=ne.prototype,Pe=Ee.prototype,Re=Te.prototype,Ie=t["__core-js_shared__"],je=Pe.toString,De=Re.hasOwnProperty,Ne=0,Ce=(o=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",xe=Re.toString,ke=je.call(Te),Be=ut._,Fe=Le("^"+je.call(De).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=ft?t.Buffer:r,ze=t.Symbol,Ve=t.Uint8Array,qe=Ue?Ue.allocUnsafe:r,$e=rr(Te.getPrototypeOf,Te),Ge=Te.create,We=Re.propertyIsEnumerable,Qe=Ae.splice,Xe=ze?ze.isConcatSpreadable:r,nt=ze?ze.iterator:r,st=ze?ze.toStringTag:r,at=function(){try{var e=ao(Te,"defineProperty");return e({},"",{}),e}catch(e){}}(),lt=t.clearTimeout!==ut.clearTimeout&&t.clearTimeout,ct=be&&be.now!==ut.Date.now&&be.now,dt=t.setTimeout!==ut.setTimeout&&t.setTimeout,ht=we.ceil,Dt=we.floor,zt=Te.getOwnPropertySymbols,cr=Ue?Ue.isBuffer:r,fr=t.isFinite,dr=Ae.join,hr=rr(Te.keys,Te),pr=we.max,gr=we.min,mr=be.now,yr=t.parseInt,_r=we.random,vr=Ae.reverse,br=ao(t,"DataView"),Sr=ao(t,"Map"),Er=ao(t,"Promise"),wr=ao(t,"Set"),Tr=ao(t,"WeakMap"),Lr=ao(Te,"create"),Or=Tr&&new Tr,Mr={},Ar=ko(br),Pr=ko(Sr),Rr=ko(Er),Ir=ko(wr),jr=ko(Tr),Dr=ze?ze.prototype:r,Nr=Dr?Dr.valueOf:r,Cr=Dr?Dr.toString:r;function xr(e){if(ea(e)&&!qs(e)&&!(e instanceof Ur)){if(e instanceof Fr)return e;if(De.call(e,"__wrapped__"))return Bo(e)}return new Fr(e)}var kr=function(){function e(){}return function(t){if(!Zs(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Br(){}function Fr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Ur(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function zr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $r(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new qr;++t<r;)this.add(e[t])}function Gr(e){var t=this.__data__=new Vr(e);this.size=t.size}function Wr(e,t){var r=qs(e),n=!r&&Vs(e),i=!r&&!n&&Ys(e),o=!r&&!n&&!i&&ua(e),s=r||n||i||o,a=s?$t(e.length,Oe):[],u=a.length;for(var l in e)!t&&!De.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||go(l,u))||a.push(l);return a}function Yr(e){var t=e.length;return t?e[$n(0,t-1)]:r}function Hr(e,t){return Io(Li(e),nn(t,0,e.length))}function Qr(e){return Io(Li(e))}function Kr(e,t,n){(n!==r&&!Fs(e[t],n)||n===r&&!(t in e))&&tn(e,t,n)}function Xr(e,t,n){var i=e[t];De.call(e,t)&&Fs(i,n)&&(n!==r||t in e)||tn(e,t,n)}function Jr(e,t){for(var r=e.length;r--;)if(Fs(e[r][0],t))return r;return-1}function Zr(e,t,r,n){return ln(e,(function(e,i,o){t(n,e,r(e),o)})),n}function en(e,t){return e&&Oi(t,Ra(t),e)}function tn(e,t,r){"__proto__"==t&&at?at(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function rn(e,t){for(var n=-1,i=t.length,o=ne(i),s=null==e;++n<i;)o[n]=s?r:La(e,t[n]);return o}function nn(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function on(e,t,n,i,o,s){var a,u=1&t,l=2&t,c=4&t;if(n&&(a=o?n(e,i,o,s):n(e)),a!==r)return a;if(!Zs(e))return e;var f=qs(e);if(f){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&De.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!u)return Li(e,a)}else{var d=co(e),h=d==v||d==b;if(Ys(e))return vi(e,u);if(d==w||d==p||h&&!o){if(a=l||h?{}:ho(e),!u)return l?function(e,t){return Oi(e,lo(e),t)}(e,function(e,t){return e&&Oi(t,Ia(t),e)}(a,e)):function(e,t){return Oi(e,uo(e),t)}(e,en(a,e))}else{if(!rt[d])return o?e:{};a=function(e,t,r){var n,i=e.constructor;switch(t){case R:return bi(e);case m:case y:return new i(+e);case I:return function(e,t){var r=t?bi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case j:case D:case N:case C:case x:case k:case B:case F:case U:return Si(e,r);case S:return new i;case E:case M:return new i(e);case L:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new i;case A:return n=e,Nr?Te(Nr.call(n)):{}}}(e,d,u)}}s||(s=new Gr);var g=s.get(e);if(g)return g;s.set(e,a),oa(e)?e.forEach((function(r){a.add(on(r,t,n,r,e,s))})):ta(e)&&e.forEach((function(r,i){a.set(i,on(r,t,n,i,e,s))}));var _=f?r:(c?l?eo:Zi:l?Ia:Ra)(e);return Et(_||e,(function(r,i){_&&(r=e[i=r]),Xr(a,i,on(r,t,n,i,e,s))})),a}function sn(e,t,n){var i=n.length;if(null==e)return!i;for(e=Te(e);i--;){var o=n[i],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function an(e,t,i){if("function"!=typeof e)throw new Me(n);return Mo((function(){e.apply(r,i)}),t)}function un(e,t,r,n){var i=-1,o=Ot,s=!0,a=e.length,u=[],l=t.length;if(!a)return u;r&&(t=At(t,Wt(r))),n?(o=Mt,s=!1):t.length>=200&&(o=Ht,s=!1,t=new $r(t));e:for(;++i<a;){var c=e[i],f=null==r?c:r(c);if(c=n||0!==c?c:0,s&&f==f){for(var d=l;d--;)if(t[d]===f)continue e;u.push(c)}else o(t,f,n)||u.push(c)}return u}xr.templateSettings={escape:H,evaluate:Q,interpolate:K,variable:"",imports:{_:xr}},xr.prototype=Br.prototype,xr.prototype.constructor=xr,Fr.prototype=kr(Br.prototype),Fr.prototype.constructor=Fr,Ur.prototype=kr(Br.prototype),Ur.prototype.constructor=Ur,zr.prototype.clear=function(){this.__data__=Lr?Lr(null):{},this.size=0},zr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zr.prototype.get=function(e){var t=this.__data__;if(Lr){var n=t[e];return n===i?r:n}return De.call(t,e)?t[e]:r},zr.prototype.has=function(e){var t=this.__data__;return Lr?t[e]!==r:De.call(t,e)},zr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Lr&&t===r?i:t,this},Vr.prototype.clear=function(){this.__data__=[],this.size=0},Vr.prototype.delete=function(e){var t=this.__data__,r=Jr(t,e);return!(r<0||(r==t.length-1?t.pop():Qe.call(t,r,1),--this.size,0))},Vr.prototype.get=function(e){var t=this.__data__,n=Jr(t,e);return n<0?r:t[n][1]},Vr.prototype.has=function(e){return Jr(this.__data__,e)>-1},Vr.prototype.set=function(e,t){var r=this.__data__,n=Jr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new zr,map:new(Sr||Vr),string:new zr}},qr.prototype.delete=function(e){var t=oo(this,e).delete(e);return this.size-=t?1:0,t},qr.prototype.get=function(e){return oo(this,e).get(e)},qr.prototype.has=function(e){return oo(this,e).has(e)},qr.prototype.set=function(e,t){var r=oo(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},$r.prototype.add=$r.prototype.push=function(e){return this.__data__.set(e,i),this},$r.prototype.has=function(e){return this.__data__.has(e)},Gr.prototype.clear=function(){this.__data__=new Vr,this.size=0},Gr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Gr.prototype.get=function(e){return this.__data__.get(e)},Gr.prototype.has=function(e){return this.__data__.has(e)},Gr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Vr){var n=r.__data__;if(!Sr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new qr(n)}return r.set(e,t),this.size=r.size,this};var ln=Pi(yn),cn=Pi(_n,!0);function fn(e,t){var r=!0;return ln(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function dn(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(u===r?a==a&&!aa(a):n(a,u)))var u=a,l=s}return l}function hn(e,t){var r=[];return ln(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function pn(e,t,r,n,i){var o=-1,s=e.length;for(r||(r=po),i||(i=[]);++o<s;){var a=e[o];t>0&&r(a)?t>1?pn(a,t-1,r,n,i):Pt(i,a):n||(i[i.length]=a)}return i}var gn=Ri(),mn=Ri(!0);function yn(e,t){return e&&gn(e,t,Ra)}function _n(e,t){return e&&mn(e,t,Ra)}function vn(e,t){return Lt(t,(function(t){return Ks(e[t])}))}function bn(e,t){for(var n=0,i=(t=gi(t,e)).length;null!=e&&n<i;)e=e[xo(t[n++])];return n&&n==i?e:r}function Sn(e,t,r){var n=t(e);return qs(e)?n:Pt(n,r(e))}function En(e){return null==e?e===r?"[object Undefined]":"[object Null]":st&&st in Te(e)?function(e){var t=De.call(e,st),n=e[st];try{e[st]=r;var i=!0}catch(e){}var o=xe.call(e);return i&&(t?e[st]=n:delete e[st]),o}(e):function(e){return xe.call(e)}(e)}function wn(e,t){return e>t}function Tn(e,t){return null!=e&&De.call(e,t)}function Ln(e,t){return null!=e&&t in Te(e)}function On(e,t,n){for(var i=n?Mt:Ot,o=e[0].length,s=e.length,a=s,u=ne(s),l=1/0,c=[];a--;){var f=e[a];a&&t&&(f=At(f,Wt(t))),l=gr(f.length,l),u[a]=!n&&(t||o>=120&&f.length>=120)?new $r(a&&f):r}f=e[0];var d=-1,h=u[0];e:for(;++d<o&&c.length<l;){var p=f[d],g=t?t(p):p;if(p=n||0!==p?p:0,!(h?Ht(h,g):i(c,g,n))){for(a=s;--a;){var m=u[a];if(!(m?Ht(m,g):i(e[a],g,n)))continue e}h&&h.push(g),c.push(p)}}return c}function Mn(e,t,n){var i=null==(e=To(e,t=gi(t,e)))?e:e[xo(Qo(t))];return null==i?r:bt(i,e,n)}function An(e){return ea(e)&&En(e)==p}function Pn(e,t,n,i,o){return e===t||(null==e||null==t||!ea(e)&&!ea(t)?e!=e&&t!=t:function(e,t,n,i,o,s){var a=qs(e),u=qs(t),l=a?g:co(e),c=u?g:co(t),f=(l=l==p?w:l)==w,d=(c=c==p?w:c)==w,h=l==c;if(h&&Ys(e)){if(!Ys(t))return!1;a=!0,f=!1}if(h&&!f)return s||(s=new Gr),a||ua(e)?Xi(e,t,n,i,o,s):function(e,t,r,n,i,o,s){switch(r){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!o(new Ve(e),new Ve(t)));case m:case y:case E:return Fs(+e,+t);case _:return e.name==t.name&&e.message==t.message;case L:case M:return e==t+"";case S:var a=tr;case O:var u=1&n;if(a||(a=ir),e.size!=t.size&&!u)return!1;var l=s.get(e);if(l)return l==t;n|=2,s.set(e,t);var c=Xi(a(e),a(t),n,i,o,s);return s.delete(e),c;case A:if(Nr)return Nr.call(e)==Nr.call(t)}return!1}(e,t,l,n,i,o,s);if(!(1&n)){var v=f&&De.call(e,"__wrapped__"),b=d&&De.call(t,"__wrapped__");if(v||b){var T=v?e.value():e,P=b?t.value():t;return s||(s=new Gr),o(T,P,n,i,s)}}return!!h&&(s||(s=new Gr),function(e,t,n,i,o,s){var a=1&n,u=Zi(e),l=u.length;if(l!=Zi(t).length&&!a)return!1;for(var c=l;c--;){var f=u[c];if(!(a?f in t:De.call(t,f)))return!1}var d=s.get(e),h=s.get(t);if(d&&h)return d==t&&h==e;var p=!0;s.set(e,t),s.set(t,e);for(var g=a;++c<l;){var m=e[f=u[c]],y=t[f];if(i)var _=a?i(y,m,f,t,e,s):i(m,y,f,e,t,s);if(!(_===r?m===y||o(m,y,n,i,s):_)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,i,o,s))}(e,t,n,i,Pn,o))}function Rn(e,t,n,i){var o=n.length,s=o,a=!i;if(null==e)return!s;for(e=Te(e);o--;){var u=n[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<s;){var l=(u=n[o])[0],c=e[l],f=u[1];if(a&&u[2]){if(c===r&&!(l in e))return!1}else{var d=new Gr;if(i)var h=i(c,f,l,e,t,d);if(!(h===r?Pn(f,c,3,i,d):h))return!1}}return!0}function In(e){return!(!Zs(e)||(t=e,Ce&&Ce in t))&&(Ks(e)?Fe:pe).test(ko(e));var t}function jn(e){return"function"==typeof e?e:null==e?ru:"object"==typeof e?qs(e)?kn(e[0],e[1]):xn(e):fu(e)}function Dn(e){if(!bo(e))return hr(e);var t=[];for(var r in Te(e))De.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Nn(e,t){return e<t}function Cn(e,t){var r=-1,n=Gs(e)?ne(e.length):[];return ln(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}function xn(e){var t=so(e);return 1==t.length&&t[0][2]?Eo(t[0][0],t[0][1]):function(r){return r===e||Rn(r,e,t)}}function kn(e,t){return yo(e)&&So(t)?Eo(xo(e),t):function(n){var i=La(n,e);return i===r&&i===t?Oa(n,e):Pn(t,i,3)}}function Bn(e,t,n,i,o){e!==t&&gn(t,(function(s,a){if(o||(o=new Gr),Zs(s))!function(e,t,n,i,o,s,a){var u=Lo(e,n),l=Lo(t,n),c=a.get(l);if(c)Kr(e,n,c);else{var f=s?s(u,l,n+"",e,t,a):r,d=f===r;if(d){var h=qs(l),p=!h&&Ys(l),g=!h&&!p&&ua(l);f=l,h||p||g?qs(u)?f=u:Ws(u)?f=Li(u):p?(d=!1,f=vi(l,!0)):g?(d=!1,f=Si(l,!0)):f=[]:na(l)||Vs(l)?(f=u,Vs(u)?f=ma(u):Zs(u)&&!Ks(u)||(f=ho(l))):d=!1}d&&(a.set(l,f),o(f,l,i,s,a),a.delete(l)),Kr(e,n,f)}}(e,t,a,n,Bn,i,o);else{var u=i?i(Lo(e,a),s,a+"",e,t,o):r;u===r&&(u=s),Kr(e,a,u)}}),Ia)}function Fn(e,t){var n=e.length;if(n)return go(t+=t<0?n:0,n)?e[t]:r}function Un(e,t,r){t=t.length?At(t,(function(e){return qs(e)?function(t){return bn(t,1===e.length?e[0]:e)}:e})):[ru];var n=-1;return t=At(t,Wt(io())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Cn(e,(function(e,r,i){return{criteria:At(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;++n<s;){var u=Ei(i[n],o[n]);if(u)return n>=a?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function zn(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=bn(e,s);r(a,s)&&Qn(o,gi(s,e),a)}return o}function Vn(e,t,r,n){var i=n?kt:xt,o=-1,s=t.length,a=e;for(e===t&&(t=Li(t)),r&&(a=At(e,Wt(r)));++o<s;)for(var u=0,l=t[o],c=r?r(l):l;(u=i(a,c,u,n))>-1;)a!==e&&Qe.call(a,u,1),Qe.call(e,u,1);return e}function qn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==o){var o=i;go(i)?Qe.call(e,i,1):ai(e,i)}}return e}function $n(e,t){return e+Dt(_r()*(t-e+1))}function Gn(e,t){var r="";if(!e||t<1||t>c)return r;do{t%2&&(r+=e),(t=Dt(t/2))&&(e+=e)}while(t);return r}function Wn(e,t){return Ao(wo(e,t,ru),e+"")}function Yn(e){return Yr(Fa(e))}function Hn(e,t){var r=Fa(e);return Io(r,nn(t,0,r.length))}function Qn(e,t,n,i){if(!Zs(e))return e;for(var o=-1,s=(t=gi(t,e)).length,a=s-1,u=e;null!=u&&++o<s;){var l=xo(t[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var f=u[l];(c=i?i(f,l,u):r)===r&&(c=Zs(f)?f:go(t[o+1])?[]:{})}Xr(u,l,c),u=u[l]}return e}var Kn=Or?function(e,t){return Or.set(e,t),e}:ru,Xn=at?function(e,t){return at(e,"toString",{configurable:!0,enumerable:!1,value:Za(t),writable:!0})}:ru;function Jn(e){return Io(Fa(e))}function Zn(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=ne(i);++n<i;)o[n]=e[n+t];return o}function ei(e,t){var r;return ln(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ti(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var o=n+i>>>1,s=e[o];null!==s&&!aa(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return ri(e,t,ru,r)}function ri(e,t,n,i){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,u=null===t,l=aa(t),c=t===r;o<s;){var f=Dt((o+s)/2),d=n(e[f]),h=d!==r,p=null===d,g=d==d,m=aa(d);if(a)var y=i||g;else y=c?g&&(i||h):u?g&&h&&(i||!p):l?g&&h&&!p&&(i||!m):!p&&!m&&(i?d<=t:d<t);y?o=f+1:s=f}return gr(s,4294967294)}function ni(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var s=e[r],a=t?t(s):s;if(!r||!Fs(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function ii(e){return"number"==typeof e?e:aa(e)?f:+e}function oi(e){if("string"==typeof e)return e;if(qs(e))return At(e,oi)+"";if(aa(e))return Cr?Cr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function si(e,t,r){var n=-1,i=Ot,o=e.length,s=!0,a=[],u=a;if(r)s=!1,i=Mt;else if(o>=200){var l=t?null:Gi(e);if(l)return ir(l);s=!1,i=Ht,u=new $r}else u=t?[]:a;e:for(;++n<o;){var c=e[n],f=t?t(c):c;if(c=r||0!==c?c:0,s&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),a.push(c)}else i(u,f,r)||(u!==a&&u.push(f),a.push(c))}return a}function ai(e,t){return null==(e=To(e,t=gi(t,e)))||delete e[xo(Qo(t))]}function ui(e,t,r,n){return Qn(e,t,r(bn(e,t)),n)}function li(e,t,r,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&t(e[o],o,e););return r?Zn(e,n?0:o,n?o+1:i):Zn(e,n?o+1:0,n?i:o)}function ci(e,t){var r=e;return r instanceof Ur&&(r=r.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))}),r)}function fi(e,t,r){var n=e.length;if(n<2)return n?si(e[0]):[];for(var i=-1,o=ne(n);++i<n;)for(var s=e[i],a=-1;++a<n;)a!=i&&(o[i]=un(o[i]||s,e[a],t,r));return si(pn(o,1),t,r)}function di(e,t,n){for(var i=-1,o=e.length,s=t.length,a={};++i<o;){var u=i<s?t[i]:r;n(a,e[i],u)}return a}function hi(e){return Ws(e)?e:[]}function pi(e){return"function"==typeof e?e:ru}function gi(e,t){return qs(e)?e:yo(e,t)?[e]:Co(ya(e))}var mi=Wn;function yi(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:Zn(e,t,n)}var _i=lt||function(e){return ut.clearTimeout(e)};function vi(e,t){if(t)return e.slice();var r=e.length,n=qe?qe(r):new e.constructor(r);return e.copy(n),n}function bi(e){var t=new e.constructor(e.byteLength);return new Ve(t).set(new Ve(e)),t}function Si(e,t){var r=t?bi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,s=aa(e),a=t!==r,u=null===t,l=t==t,c=aa(t);if(!u&&!c&&!s&&e>t||s&&a&&l&&!u&&!c||i&&a&&l||!n&&l||!o)return 1;if(!i&&!s&&!c&&e<t||c&&n&&o&&!i&&!s||u&&n&&o||!a&&o||!l)return-1}return 0}function wi(e,t,r,n){for(var i=-1,o=e.length,s=r.length,a=-1,u=t.length,l=pr(o-s,0),c=ne(u+l),f=!n;++a<u;)c[a]=t[a];for(;++i<s;)(f||i<o)&&(c[r[i]]=e[i]);for(;l--;)c[a++]=e[i++];return c}function Ti(e,t,r,n){for(var i=-1,o=e.length,s=-1,a=r.length,u=-1,l=t.length,c=pr(o-a,0),f=ne(c+l),d=!n;++i<c;)f[i]=e[i];for(var h=i;++u<l;)f[h+u]=t[u];for(;++s<a;)(d||i<o)&&(f[h+r[s]]=e[i++]);return f}function Li(e,t){var r=-1,n=e.length;for(t||(t=ne(n));++r<n;)t[r]=e[r];return t}function Oi(e,t,n,i){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var u=t[s],l=i?i(n[u],e[u],u,n,e):r;l===r&&(l=e[u]),o?tn(n,u,l):Xr(n,u,l)}return n}function Mi(e,t){return function(r,n){var i=qs(r)?St:Zr,o=t?t():{};return i(r,e,io(n,2),o)}}function Ai(e){return Wn((function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&mo(n[0],n[1],a)&&(s=o<3?r:s,o=1),t=Te(t);++i<o;){var u=n[i];u&&e(t,u,i,s)}return t}))}function Pi(e,t){return function(r,n){if(null==r)return r;if(!Gs(r))return e(r,n);for(var i=r.length,o=t?i:-1,s=Te(r);(t?o--:++o<i)&&!1!==n(s[o],o,s););return r}}function Ri(e){return function(t,r,n){for(var i=-1,o=Te(t),s=n(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===r(o[u],u,o))break}return t}}function Ii(e){return function(t){var n=er(t=ya(t))?sr(t):r,i=n?n[0]:t.charAt(0),o=n?yi(n,1).join(""):t.slice(1);return i[e]()+o}}function ji(e){return function(t){return Rt(Ka(Va(t).replace(Ye,"")),e,"")}}function Di(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=kr(e.prototype),n=e.apply(r,t);return Zs(n)?n:r}}function Ni(e){return function(t,n,i){var o=Te(t);if(!Gs(t)){var s=io(n,3);t=Ra(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,i);return a>-1?o[s?t[a]:a]:r}}function Ci(e){return Ji((function(t){var i=t.length,o=i,s=Fr.prototype.thru;for(e&&t.reverse();o--;){var a=t[o];if("function"!=typeof a)throw new Me(n);if(s&&!u&&"wrapper"==ro(a))var u=new Fr([],!0)}for(o=u?o:i;++o<i;){var l=ro(a=t[o]),c="wrapper"==l?to(a):r;u=c&&_o(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ro(c[0])].apply(u,c[3]):1==a.length&&_o(a)?u[l]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&qs(r))return u.plant(r).value();for(var n=0,o=i?t[n].apply(this,e):r;++n<i;)o=t[n].call(this,o);return o}}))}function xi(e,t,n,i,o,s,a,l,c,f){var d=t&u,h=1&t,p=2&t,g=24&t,m=512&t,y=p?r:Di(e);return function u(){for(var _=arguments.length,v=ne(_),b=_;b--;)v[b]=arguments[b];if(g)var S=no(u),E=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,S);if(i&&(v=wi(v,i,o,g)),s&&(v=Ti(v,s,a,g)),_-=E,g&&_<f){var w=nr(v,S);return qi(e,t,xi,u.placeholder,n,v,w,l,c,f-_)}var T=h?n:this,L=p?T[e]:e;return _=v.length,l?v=function(e,t){for(var n=e.length,i=gr(t.length,n),o=Li(e);i--;){var s=t[i];e[i]=go(s,n)?o[s]:r}return e}(v,l):m&&_>1&&v.reverse(),d&&c<_&&(v.length=c),this&&this!==ut&&this instanceof u&&(L=y||Di(L)),L.apply(T,v)}}function ki(e,t){return function(r,n){return function(e,t,r,n){return yn(e,(function(e,i,o){t(n,r(e),i,o)})),n}(r,e,t(n),{})}}function Bi(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=oi(n),i=oi(i)):(n=ii(n),i=ii(i)),o=e(n,i)}return o}}function Fi(e){return Ji((function(t){return t=At(t,Wt(io())),Wn((function(r){var n=this;return e(t,(function(e){return bt(e,n,r)}))}))}))}function Ui(e,t){var n=(t=t===r?" ":oi(t)).length;if(n<2)return n?Gn(t,e):t;var i=Gn(t,ht(e/or(t)));return er(t)?yi(sr(i),0,e).join(""):i.slice(0,e)}function zi(e){return function(t,n,i){return i&&"number"!=typeof i&&mo(t,n,i)&&(n=i=r),t=da(t),n===r?(n=t,t=0):n=da(n),function(e,t,r,n){for(var i=-1,o=pr(ht((t-e)/(r||1)),0),s=ne(o);o--;)s[n?o:++i]=e,e+=r;return s}(t,n,i=i===r?t<n?1:-1:da(i),e)}}function Vi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ga(t),r=ga(r)),e(t,r)}}function qi(e,t,n,i,o,s,u,l,c,f){var d=8&t;t|=d?a:64,4&(t&=~(d?64:a))||(t&=-4);var h=[e,t,o,d?s:r,d?u:r,d?r:s,d?r:u,l,c,f],p=n.apply(r,h);return _o(e)&&Oo(p,h),p.placeholder=i,Po(p,e,t)}function $i(e){var t=we[e];return function(e,r){if(e=ga(e),(r=null==r?0:gr(ha(r),292))&&fr(e)){var n=(ya(e)+"e").split("e");return+((n=(ya(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Gi=wr&&1/ir(new wr([,-0]))[1]==l?function(e){return new wr(e)}:au;function Wi(e){return function(t){var r=co(t);return r==S?tr(t):r==O?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return At(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Yi(e,t,i,o,l,c,f,d){var h=2&t;if(!h&&"function"!=typeof e)throw new Me(n);var p=o?o.length:0;if(p||(t&=-97,o=l=r),f=f===r?f:pr(ha(f),0),d=d===r?d:ha(d),p-=l?l.length:0,64&t){var g=o,m=l;o=l=r}var y=h?r:to(e),_=[e,t,i,o,l,g,m,c,f,d];if(y&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,a=n==u&&8==r||n==u&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!o&&!a)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?wi(c,l,t[4]):l,e[4]=c?nr(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Ti(c,l,t[6]):l,e[6]=c?nr(e[5],s):t[6]),(l=t[7])&&(e[7]=l),n&u&&(e[8]=null==e[8]?t[8]:gr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(_,y),e=_[0],t=_[1],i=_[2],o=_[3],l=_[4],!(d=_[9]=_[9]===r?h?0:e.length:pr(_[9]-p,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||16==t?function(e,t,n){var i=Di(e);return function o(){for(var s=arguments.length,a=ne(s),u=s,l=no(o);u--;)a[u]=arguments[u];var c=s<3&&a[0]!==l&&a[s-1]!==l?[]:nr(a,l);return(s-=c.length)<n?qi(e,t,xi,o.placeholder,r,a,c,r,r,n-s):bt(this&&this!==ut&&this instanceof o?i:e,this,a)}}(e,t,d):t!=a&&33!=t||l.length?xi.apply(r,_):function(e,t,r,n){var i=1&t,o=Di(e);return function t(){for(var s=-1,a=arguments.length,u=-1,l=n.length,c=ne(l+a),f=this&&this!==ut&&this instanceof t?o:e;++u<l;)c[u]=n[u];for(;a--;)c[u++]=arguments[++s];return bt(f,i?r:this,c)}}(e,t,i,o);else var v=function(e,t,r){var n=1&t,i=Di(e);return function t(){return(this&&this!==ut&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,i);return Po((y?Kn:Oo)(v,_),e,t)}function Hi(e,t,n,i){return e===r||Fs(e,Re[n])&&!De.call(i,n)?t:e}function Qi(e,t,n,i,o,s){return Zs(e)&&Zs(t)&&(s.set(t,e),Bn(e,t,r,Qi,s),s.delete(t)),e}function Ki(e){return na(e)?r:e}function Xi(e,t,n,i,o,s){var a=1&n,u=e.length,l=t.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(e),f=s.get(t);if(c&&f)return c==t&&f==e;var d=-1,h=!0,p=2&n?new $r:r;for(s.set(e,t),s.set(t,e);++d<u;){var g=e[d],m=t[d];if(i)var y=a?i(m,g,d,t,e,s):i(g,m,d,e,t,s);if(y!==r){if(y)continue;h=!1;break}if(p){if(!jt(t,(function(e,t){if(!Ht(p,t)&&(g===e||o(g,e,n,i,s)))return p.push(t)}))){h=!1;break}}else if(g!==m&&!o(g,m,n,i,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Ji(e){return Ao(wo(e,r,$o),e+"")}function Zi(e){return Sn(e,Ra,uo)}function eo(e){return Sn(e,Ia,lo)}var to=Or?function(e){return Or.get(e)}:au;function ro(e){for(var t=e.name+"",r=Mr[t],n=De.call(Mr,t)?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function no(e){return(De.call(xr,"placeholder")?xr:e).placeholder}function io(){var e=xr.iteratee||nu;return e=e===nu?jn:e,arguments.length?e(arguments[0],arguments[1]):e}function oo(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function so(e){for(var t=Ra(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,So(i)]}return t}function ao(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return In(n)?n:r}var uo=zt?function(e){return null==e?[]:(e=Te(e),Lt(zt(e),(function(t){return We.call(e,t)})))}:pu,lo=zt?function(e){for(var t=[];e;)Pt(t,uo(e)),e=$e(e);return t}:pu,co=En;function fo(e,t,r){for(var n=-1,i=(t=gi(t,e)).length,o=!1;++n<i;){var s=xo(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&Js(i)&&go(s,i)&&(qs(e)||Vs(e))}function ho(e){return"function"!=typeof e.constructor||bo(e)?{}:kr($e(e))}function po(e){return qs(e)||Vs(e)||!!(Xe&&e&&e[Xe])}function go(e,t){var r=typeof e;return!!(t=null==t?c:t)&&("number"==r||"symbol"!=r&&me.test(e))&&e>-1&&e%1==0&&e<t}function mo(e,t,r){if(!Zs(r))return!1;var n=typeof t;return!!("number"==n?Gs(r)&&go(t,r.length):"string"==n&&t in r)&&Fs(r[t],e)}function yo(e,t){if(qs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!aa(e))||J.test(e)||!X.test(e)||null!=t&&e in Te(t)}function _o(e){var t=ro(e),r=xr[t];if("function"!=typeof r||!(t in Ur.prototype))return!1;if(e===r)return!0;var n=to(r);return!!n&&e===n[0]}(br&&co(new br(new ArrayBuffer(1)))!=I||Sr&&co(new Sr)!=S||Er&&co(Er.resolve())!=T||wr&&co(new wr)!=O||Tr&&co(new Tr)!=P)&&(co=function(e){var t=En(e),n=t==w?e.constructor:r,i=n?ko(n):"";if(i)switch(i){case Ar:return I;case Pr:return S;case Rr:return T;case Ir:return O;case jr:return P}return t});var vo=Ie?Ks:gu;function bo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function So(e){return e==e&&!Zs(e)}function Eo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in Te(n))}}function wo(e,t,n){return t=pr(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=pr(r.length-t,0),s=ne(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=ne(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),bt(e,this,a)}}function To(e,t){return t.length<2?e:bn(e,Zn(t,0,-1))}function Lo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oo=Ro(Kn),Mo=dt||function(e,t){return ut.setTimeout(e,t)},Ao=Ro(Xn);function Po(e,t,r){var n=t+"";return Ao(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Et(h,(function(r){var n="_."+r[0];t&r[1]&&!Ot(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(se):[]}(n),r)))}function Ro(e){var t=0,n=0;return function(){var i=mr(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Io(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var s=$n(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var jo,Do,No,Co=(jo=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Z,(function(e,r,n,i){t.push(n?i.replace(le,"$1"):r||e)})),t},Do=Ds(jo,(function(e){return 500===No.size&&No.clear(),e})),No=Do.cache,Do);function xo(e){if("string"==typeof e||aa(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ko(e){if(null!=e){try{return je.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Bo(e){if(e instanceof Ur)return e.clone();var t=new Fr(e.__wrapped__,e.__chain__);return t.__actions__=Li(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fo=Wn((function(e,t){return Ws(e)?un(e,pn(t,1,Ws,!0)):[]})),Uo=Wn((function(e,t){var n=Qo(t);return Ws(n)&&(n=r),Ws(e)?un(e,pn(t,1,Ws,!0),io(n,2)):[]})),zo=Wn((function(e,t){var n=Qo(t);return Ws(n)&&(n=r),Ws(e)?un(e,pn(t,1,Ws,!0),r,n):[]}));function Vo(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ha(r);return i<0&&(i=pr(n+i,0)),Ct(e,io(t,3),i)}function qo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=ha(n),o=n<0?pr(i+o,0):gr(o,i-1)),Ct(e,io(t,3),o,!0)}function $o(e){return null!=e&&e.length?pn(e,1):[]}function Go(e){return e&&e.length?e[0]:r}var Wo=Wn((function(e){var t=At(e,hi);return t.length&&t[0]===e[0]?On(t):[]})),Yo=Wn((function(e){var t=Qo(e),n=At(e,hi);return t===Qo(n)?t=r:n.pop(),n.length&&n[0]===e[0]?On(n,io(t,2)):[]})),Ho=Wn((function(e){var t=Qo(e),n=At(e,hi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?On(n,r,t):[]}));function Qo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Ko=Wn(Xo);function Xo(e,t){return e&&e.length&&t&&t.length?Vn(e,t):e}var Jo=Ji((function(e,t){var r=null==e?0:e.length,n=rn(e,t);return qn(e,At(t,(function(e){return go(e,r)?+e:e})).sort(Ei)),n}));function Zo(e){return null==e?e:vr.call(e)}var es=Wn((function(e){return si(pn(e,1,Ws,!0))})),ts=Wn((function(e){var t=Qo(e);return Ws(t)&&(t=r),si(pn(e,1,Ws,!0),io(t,2))})),rs=Wn((function(e){var t=Qo(e);return t="function"==typeof t?t:r,si(pn(e,1,Ws,!0),r,t)}));function ns(e){if(!e||!e.length)return[];var t=0;return e=Lt(e,(function(e){if(Ws(e))return t=pr(e.length,t),!0})),$t(t,(function(t){return At(e,Ut(t))}))}function is(e,t){if(!e||!e.length)return[];var n=ns(e);return null==t?n:At(n,(function(e){return bt(t,r,e)}))}var os=Wn((function(e,t){return Ws(e)?un(e,t):[]})),ss=Wn((function(e){return fi(Lt(e,Ws))})),as=Wn((function(e){var t=Qo(e);return Ws(t)&&(t=r),fi(Lt(e,Ws),io(t,2))})),us=Wn((function(e){var t=Qo(e);return t="function"==typeof t?t:r,fi(Lt(e,Ws),r,t)})),ls=Wn(ns),cs=Wn((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,is(e,n)}));function fs(e){var t=xr(e);return t.__chain__=!0,t}function ds(e,t){return t(e)}var hs=Ji((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return rn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Ur&&go(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:ds,args:[o],thisArg:r}),new Fr(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)})),ps=Mi((function(e,t,r){De.call(e,r)?++e[r]:tn(e,r,1)})),gs=Ni(Vo),ms=Ni(qo);function ys(e,t){return(qs(e)?Et:ln)(e,io(t,3))}function _s(e,t){return(qs(e)?wt:cn)(e,io(t,3))}var vs=Mi((function(e,t,r){De.call(e,r)?e[r].push(t):tn(e,r,[t])})),bs=Wn((function(e,t,r){var n=-1,i="function"==typeof t,o=Gs(e)?ne(e.length):[];return ln(e,(function(e){o[++n]=i?bt(t,e,r):Mn(e,t,r)})),o})),Ss=Mi((function(e,t,r){tn(e,r,t)}));function Es(e,t){return(qs(e)?At:Cn)(e,io(t,3))}var ws=Mi((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]})),Ts=Wn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&mo(e,t[0],t[1])?t=[]:r>2&&mo(t[0],t[1],t[2])&&(t=[t[0]]),Un(e,pn(t,1),[])})),Ls=ct||function(){return ut.Date.now()};function Os(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Yi(e,u,r,r,r,r,t)}function Ms(e,t){var i;if("function"!=typeof t)throw new Me(n);return e=ha(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var As=Wn((function(e,t,r){var n=1;if(r.length){var i=nr(r,no(As));n|=a}return Yi(e,n,t,r,i)})),Ps=Wn((function(e,t,r){var n=3;if(r.length){var i=nr(r,no(Ps));n|=a}return Yi(t,n,e,r,i)}));function Rs(e,t,i){var o,s,a,u,l,c,f=0,d=!1,h=!1,p=!0;if("function"!=typeof e)throw new Me(n);function g(t){var n=o,i=s;return o=s=r,f=t,u=e.apply(i,n)}function m(e){var n=e-c;return c===r||n>=t||n<0||h&&e-f>=a}function y(){var e=Ls();if(m(e))return _(e);l=Mo(y,function(e){var r=t-(e-c);return h?gr(r,a-(e-f)):r}(e))}function _(e){return l=r,p&&o?g(e):(o=s=r,u)}function v(){var e=Ls(),n=m(e);if(o=arguments,s=this,c=e,n){if(l===r)return function(e){return f=e,l=Mo(y,t),d?g(e):u}(c);if(h)return _i(l),l=Mo(y,t),g(c)}return l===r&&(l=Mo(y,t)),u}return t=ga(t)||0,Zs(i)&&(d=!!i.leading,a=(h="maxWait"in i)?pr(ga(i.maxWait)||0,t):a,p="trailing"in i?!!i.trailing:p),v.cancel=function(){l!==r&&_i(l),f=0,o=c=s=l=r},v.flush=function(){return l===r?u:_(Ls())},v}var Is=Wn((function(e,t){return an(e,1,t)})),js=Wn((function(e,t,r){return an(e,ga(t)||0,r)}));function Ds(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Me(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ds.Cache||qr),r}function Ns(e){if("function"!=typeof e)throw new Me(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ds.Cache=qr;var Cs=mi((function(e,t){var r=(t=1==t.length&&qs(t[0])?At(t[0],Wt(io())):At(pn(t,1),Wt(io()))).length;return Wn((function(n){for(var i=-1,o=gr(n.length,r);++i<o;)n[i]=t[i].call(this,n[i]);return bt(e,this,n)}))})),xs=Wn((function(e,t){var n=nr(t,no(xs));return Yi(e,a,r,t,n)})),ks=Wn((function(e,t){var n=nr(t,no(ks));return Yi(e,64,r,t,n)})),Bs=Ji((function(e,t){return Yi(e,256,r,r,r,t)}));function Fs(e,t){return e===t||e!=e&&t!=t}var Us=Vi(wn),zs=Vi((function(e,t){return e>=t})),Vs=An(function(){return arguments}())?An:function(e){return ea(e)&&De.call(e,"callee")&&!We.call(e,"callee")},qs=ne.isArray,$s=pt?Wt(pt):function(e){return ea(e)&&En(e)==R};function Gs(e){return null!=e&&Js(e.length)&&!Ks(e)}function Ws(e){return ea(e)&&Gs(e)}var Ys=cr||gu,Hs=gt?Wt(gt):function(e){return ea(e)&&En(e)==y};function Qs(e){if(!ea(e))return!1;var t=En(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!na(e)}function Ks(e){if(!Zs(e))return!1;var t=En(e);return t==v||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xs(e){return"number"==typeof e&&e==ha(e)}function Js(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function Zs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ea(e){return null!=e&&"object"==typeof e}var ta=mt?Wt(mt):function(e){return ea(e)&&co(e)==S};function ra(e){return"number"==typeof e||ea(e)&&En(e)==E}function na(e){if(!ea(e)||En(e)!=w)return!1;var t=$e(e);if(null===t)return!0;var r=De.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&je.call(r)==ke}var ia=yt?Wt(yt):function(e){return ea(e)&&En(e)==L},oa=_t?Wt(_t):function(e){return ea(e)&&co(e)==O};function sa(e){return"string"==typeof e||!qs(e)&&ea(e)&&En(e)==M}function aa(e){return"symbol"==typeof e||ea(e)&&En(e)==A}var ua=vt?Wt(vt):function(e){return ea(e)&&Js(e.length)&&!!tt[En(e)]},la=Vi(Nn),ca=Vi((function(e,t){return e<=t}));function fa(e){if(!e)return[];if(Gs(e))return sa(e)?sr(e):Li(e);if(nt&&e[nt])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[nt]());var t=co(e);return(t==S?tr:t==O?ir:Fa)(e)}function da(e){return e?(e=ga(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ha(e){var t=da(e),r=t%1;return t==t?r?t-r:t:0}function pa(e){return e?nn(ha(e),0,d):0}function ga(e){if("number"==typeof e)return e;if(aa(e))return f;if(Zs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Zs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var r=he.test(e);return r||ge.test(e)?ot(e.slice(2),r?2:8):de.test(e)?f:+e}function ma(e){return Oi(e,Ia(e))}function ya(e){return null==e?"":oi(e)}var _a=Ai((function(e,t){if(bo(t)||Gs(t))Oi(t,Ra(t),e);else for(var r in t)De.call(t,r)&&Xr(e,r,t[r])})),va=Ai((function(e,t){Oi(t,Ia(t),e)})),ba=Ai((function(e,t,r,n){Oi(t,Ia(t),e,n)})),Sa=Ai((function(e,t,r,n){Oi(t,Ra(t),e,n)})),Ea=Ji(rn),wa=Wn((function(e,t){e=Te(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&mo(t[0],t[1],o)&&(i=1);++n<i;)for(var s=t[n],a=Ia(s),u=-1,l=a.length;++u<l;){var c=a[u],f=e[c];(f===r||Fs(f,Re[c])&&!De.call(e,c))&&(e[c]=s[c])}return e})),Ta=Wn((function(e){return e.push(r,Qi),bt(Da,r,e)}));function La(e,t,n){var i=null==e?r:bn(e,t);return i===r?n:i}function Oa(e,t){return null!=e&&fo(e,t,Ln)}var Ma=ki((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=xe.call(t)),e[t]=r}),Za(ru)),Aa=ki((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=xe.call(t)),De.call(e,t)?e[t].push(r):e[t]=[r]}),io),Pa=Wn(Mn);function Ra(e){return Gs(e)?Wr(e):Dn(e)}function Ia(e){return Gs(e)?Wr(e,!0):function(e){if(!Zs(e))return function(e){var t=[];if(null!=e)for(var r in Te(e))t.push(r);return t}(e);var t=bo(e),r=[];for(var n in e)("constructor"!=n||!t&&De.call(e,n))&&r.push(n);return r}(e)}var ja=Ai((function(e,t,r){Bn(e,t,r)})),Da=Ai((function(e,t,r,n){Bn(e,t,r,n)})),Na=Ji((function(e,t){var r={};if(null==e)return r;var n=!1;t=At(t,(function(t){return t=gi(t,e),n||(n=t.length>1),t})),Oi(e,eo(e),r),n&&(r=on(r,7,Ki));for(var i=t.length;i--;)ai(r,t[i]);return r})),Ca=Ji((function(e,t){return null==e?{}:function(e,t){return zn(e,t,(function(t,r){return Oa(e,r)}))}(e,t)}));function xa(e,t){if(null==e)return{};var r=At(eo(e),(function(e){return[e]}));return t=io(t),zn(e,r,(function(e,r){return t(e,r[0])}))}var ka=Wi(Ra),Ba=Wi(Ia);function Fa(e){return null==e?[]:Yt(e,Ra(e))}var Ua=ji((function(e,t,r){return t=t.toLowerCase(),e+(r?za(t):t)}));function za(e){return Qa(ya(e).toLowerCase())}function Va(e){return(e=ya(e))&&e.replace(ye,Xt).replace(He,"")}var qa=ji((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),$a=ji((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Ga=Ii("toLowerCase"),Wa=ji((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()})),Ya=ji((function(e,t,r){return e+(r?" ":"")+Qa(t)})),Ha=ji((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Qa=Ii("toUpperCase");function Ka(e,t,n){return e=ya(e),(t=n?r:t)===r?function(e){return Je.test(e)}(e)?function(e){return e.match(Ke)||[]}(e):function(e){return e.match(ae)||[]}(e):e.match(t)||[]}var Xa=Wn((function(e,t){try{return bt(e,r,t)}catch(e){return Qs(e)?e:new Se(e)}})),Ja=Ji((function(e,t){return Et(t,(function(t){t=xo(t),tn(e,t,As(e[t],e))})),e}));function Za(e){return function(){return e}}var eu=Ci(),tu=Ci(!0);function ru(e){return e}function nu(e){return jn("function"==typeof e?e:on(e,1))}var iu=Wn((function(e,t){return function(r){return Mn(r,e,t)}})),ou=Wn((function(e,t){return function(r){return Mn(e,r,t)}}));function su(e,t,r){var n=Ra(t),i=vn(t,n);null!=r||Zs(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=vn(t,Ra(t)));var o=!(Zs(r)&&"chain"in r&&!r.chain),s=Ks(e);return Et(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__);return(r.__actions__=Li(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Pt([this.value()],arguments))})})),e}function au(){}var uu=Fi(At),lu=Fi(Tt),cu=Fi(jt);function fu(e){return yo(e)?Ut(xo(e)):function(e){return function(t){return bn(t,e)}}(e)}var du=zi(),hu=zi(!0);function pu(){return[]}function gu(){return!1}var mu,yu=Bi((function(e,t){return e+t}),0),_u=$i("ceil"),vu=Bi((function(e,t){return e/t}),1),bu=$i("floor"),Su=Bi((function(e,t){return e*t}),1),Eu=$i("round"),wu=Bi((function(e,t){return e-t}),0);return xr.after=function(e,t){if("function"!=typeof t)throw new Me(n);return e=ha(e),function(){if(--e<1)return t.apply(this,arguments)}},xr.ary=Os,xr.assign=_a,xr.assignIn=va,xr.assignInWith=ba,xr.assignWith=Sa,xr.at=Ea,xr.before=Ms,xr.bind=As,xr.bindAll=Ja,xr.bindKey=Ps,xr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qs(e)?e:[e]},xr.chain=fs,xr.chunk=function(e,t,n){t=(n?mo(e,t,n):t===r)?1:pr(ha(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,s=0,a=ne(ht(i/t));o<i;)a[s++]=Zn(e,o,o+=t);return a},xr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var o=e[t];o&&(i[n++]=o)}return i},xr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ne(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Pt(qs(r)?Li(r):[r],pn(t,1))},xr.cond=function(e){var t=null==e?0:e.length,r=io();return e=t?At(e,(function(e){if("function"!=typeof e[1])throw new Me(n);return[r(e[0]),e[1]]})):[],Wn((function(r){for(var n=-1;++n<t;){var i=e[n];if(bt(i[0],this,r))return bt(i[1],this,r)}}))},xr.conforms=function(e){return function(e){var t=Ra(e);return function(r){return sn(r,e,t)}}(on(e,1))},xr.constant=Za,xr.countBy=ps,xr.create=function(e,t){var r=kr(e);return null==t?r:en(r,t)},xr.curry=function e(t,n,i){var o=Yi(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},xr.curryRight=function e(t,n,i){var o=Yi(t,16,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},xr.debounce=Rs,xr.defaults=wa,xr.defaultsDeep=Ta,xr.defer=Is,xr.delay=js,xr.difference=Fo,xr.differenceBy=Uo,xr.differenceWith=zo,xr.drop=function(e,t,n){var i=null==e?0:e.length;return i?Zn(e,(t=n||t===r?1:ha(t))<0?0:t,i):[]},xr.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?Zn(e,0,(t=i-(t=n||t===r?1:ha(t)))<0?0:t):[]},xr.dropRightWhile=function(e,t){return e&&e.length?li(e,io(t,3),!0,!0):[]},xr.dropWhile=function(e,t){return e&&e.length?li(e,io(t,3),!0):[]},xr.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&mo(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=ha(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:ha(i))<0&&(i+=o),i=n>i?0:pa(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},xr.filter=function(e,t){return(qs(e)?Lt:hn)(e,io(t,3))},xr.flatMap=function(e,t){return pn(Es(e,t),1)},xr.flatMapDeep=function(e,t){return pn(Es(e,t),l)},xr.flatMapDepth=function(e,t,n){return n=n===r?1:ha(n),pn(Es(e,t),n)},xr.flatten=$o,xr.flattenDeep=function(e){return null!=e&&e.length?pn(e,l):[]},xr.flattenDepth=function(e,t){return null!=e&&e.length?pn(e,t=t===r?1:ha(t)):[]},xr.flip=function(e){return Yi(e,512)},xr.flow=eu,xr.flowRight=tu,xr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},xr.functions=function(e){return null==e?[]:vn(e,Ra(e))},xr.functionsIn=function(e){return null==e?[]:vn(e,Ia(e))},xr.groupBy=vs,xr.initial=function(e){return null!=e&&e.length?Zn(e,0,-1):[]},xr.intersection=Wo,xr.intersectionBy=Yo,xr.intersectionWith=Ho,xr.invert=Ma,xr.invertBy=Aa,xr.invokeMap=bs,xr.iteratee=nu,xr.keyBy=Ss,xr.keys=Ra,xr.keysIn=Ia,xr.map=Es,xr.mapKeys=function(e,t){var r={};return t=io(t,3),yn(e,(function(e,n,i){tn(r,t(e,n,i),e)})),r},xr.mapValues=function(e,t){var r={};return t=io(t,3),yn(e,(function(e,n,i){tn(r,n,t(e,n,i))})),r},xr.matches=function(e){return xn(on(e,1))},xr.matchesProperty=function(e,t){return kn(e,on(t,1))},xr.memoize=Ds,xr.merge=ja,xr.mergeWith=Da,xr.method=iu,xr.methodOf=ou,xr.mixin=su,xr.negate=Ns,xr.nthArg=function(e){return e=ha(e),Wn((function(t){return Fn(t,e)}))},xr.omit=Na,xr.omitBy=function(e,t){return xa(e,Ns(io(t)))},xr.once=function(e){return Ms(2,e)},xr.orderBy=function(e,t,n,i){return null==e?[]:(qs(t)||(t=null==t?[]:[t]),qs(n=i?r:n)||(n=null==n?[]:[n]),Un(e,t,n))},xr.over=uu,xr.overArgs=Cs,xr.overEvery=lu,xr.overSome=cu,xr.partial=xs,xr.partialRight=ks,xr.partition=ws,xr.pick=Ca,xr.pickBy=xa,xr.property=fu,xr.propertyOf=function(e){return function(t){return null==e?r:bn(e,t)}},xr.pull=Ko,xr.pullAll=Xo,xr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Vn(e,t,io(r,2)):e},xr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Vn(e,t,r,n):e},xr.pullAt=Jo,xr.range=du,xr.rangeRight=hu,xr.rearg=Bs,xr.reject=function(e,t){return(qs(e)?Lt:hn)(e,Ns(io(t,3)))},xr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;for(t=io(t,3);++n<o;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return qn(e,i),r},xr.rest=function(e,t){if("function"!=typeof e)throw new Me(n);return Wn(e,t=t===r?t:ha(t))},xr.reverse=Zo,xr.sampleSize=function(e,t,n){return t=(n?mo(e,t,n):t===r)?1:ha(t),(qs(e)?Hr:Hn)(e,t)},xr.set=function(e,t,r){return null==e?e:Qn(e,t,r)},xr.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Qn(e,t,n,i)},xr.shuffle=function(e){return(qs(e)?Qr:Jn)(e)},xr.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&mo(e,t,n)?(t=0,n=i):(t=null==t?0:ha(t),n=n===r?i:ha(n)),Zn(e,t,n)):[]},xr.sortBy=Ts,xr.sortedUniq=function(e){return e&&e.length?ni(e):[]},xr.sortedUniqBy=function(e,t){return e&&e.length?ni(e,io(t,2)):[]},xr.split=function(e,t,n){return n&&"number"!=typeof n&&mo(e,t,n)&&(t=n=r),(n=n===r?d:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!ia(t))&&!(t=oi(t))&&er(e)?yi(sr(e),0,n):e.split(t,n):[]},xr.spread=function(e,t){if("function"!=typeof e)throw new Me(n);return t=null==t?0:pr(ha(t),0),Wn((function(r){var n=r[t],i=yi(r,0,t);return n&&Pt(i,n),bt(e,this,i)}))},xr.tail=function(e){var t=null==e?0:e.length;return t?Zn(e,1,t):[]},xr.take=function(e,t,n){return e&&e.length?Zn(e,0,(t=n||t===r?1:ha(t))<0?0:t):[]},xr.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?Zn(e,(t=i-(t=n||t===r?1:ha(t)))<0?0:t,i):[]},xr.takeRightWhile=function(e,t){return e&&e.length?li(e,io(t,3),!1,!0):[]},xr.takeWhile=function(e,t){return e&&e.length?li(e,io(t,3)):[]},xr.tap=function(e,t){return t(e),e},xr.throttle=function(e,t,r){var i=!0,o=!0;if("function"!=typeof e)throw new Me(n);return Zs(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Rs(e,t,{leading:i,maxWait:t,trailing:o})},xr.thru=ds,xr.toArray=fa,xr.toPairs=ka,xr.toPairsIn=Ba,xr.toPath=function(e){return qs(e)?At(e,xo):aa(e)?[e]:Li(Co(ya(e)))},xr.toPlainObject=ma,xr.transform=function(e,t,r){var n=qs(e),i=n||Ys(e)||ua(e);if(t=io(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:Zs(e)&&Ks(o)?kr($e(e)):{}}return(i?Et:yn)(e,(function(e,n,i){return t(r,e,n,i)})),r},xr.unary=function(e){return Os(e,1)},xr.union=es,xr.unionBy=ts,xr.unionWith=rs,xr.uniq=function(e){return e&&e.length?si(e):[]},xr.uniqBy=function(e,t){return e&&e.length?si(e,io(t,2)):[]},xr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?si(e,r,t):[]},xr.unset=function(e,t){return null==e||ai(e,t)},xr.unzip=ns,xr.unzipWith=is,xr.update=function(e,t,r){return null==e?e:ui(e,t,pi(r))},xr.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:ui(e,t,pi(n),i)},xr.values=Fa,xr.valuesIn=function(e){return null==e?[]:Yt(e,Ia(e))},xr.without=os,xr.words=Ka,xr.wrap=function(e,t){return xs(pi(t),e)},xr.xor=ss,xr.xorBy=as,xr.xorWith=us,xr.zip=ls,xr.zipObject=function(e,t){return di(e||[],t||[],Xr)},xr.zipObjectDeep=function(e,t){return di(e||[],t||[],Qn)},xr.zipWith=cs,xr.entries=ka,xr.entriesIn=Ba,xr.extend=va,xr.extendWith=ba,su(xr,xr),xr.add=yu,xr.attempt=Xa,xr.camelCase=Ua,xr.capitalize=za,xr.ceil=_u,xr.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=ga(n))==n?n:0),t!==r&&(t=(t=ga(t))==t?t:0),nn(ga(e),t,n)},xr.clone=function(e){return on(e,4)},xr.cloneDeep=function(e){return on(e,5)},xr.cloneDeepWith=function(e,t){return on(e,5,t="function"==typeof t?t:r)},xr.cloneWith=function(e,t){return on(e,4,t="function"==typeof t?t:r)},xr.conformsTo=function(e,t){return null==t||sn(e,t,Ra(t))},xr.deburr=Va,xr.defaultTo=function(e,t){return null==e||e!=e?t:e},xr.divide=vu,xr.endsWith=function(e,t,n){e=ya(e),t=oi(t);var i=e.length,o=n=n===r?i:nn(ha(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},xr.eq=Fs,xr.escape=function(e){return(e=ya(e))&&Y.test(e)?e.replace(G,Jt):e},xr.escapeRegExp=function(e){return(e=ya(e))&&te.test(e)?e.replace(ee,"\\$&"):e},xr.every=function(e,t,n){var i=qs(e)?Tt:fn;return n&&mo(e,t,n)&&(t=r),i(e,io(t,3))},xr.find=gs,xr.findIndex=Vo,xr.findKey=function(e,t){return Nt(e,io(t,3),yn)},xr.findLast=ms,xr.findLastIndex=qo,xr.findLastKey=function(e,t){return Nt(e,io(t,3),_n)},xr.floor=bu,xr.forEach=ys,xr.forEachRight=_s,xr.forIn=function(e,t){return null==e?e:gn(e,io(t,3),Ia)},xr.forInRight=function(e,t){return null==e?e:mn(e,io(t,3),Ia)},xr.forOwn=function(e,t){return e&&yn(e,io(t,3))},xr.forOwnRight=function(e,t){return e&&_n(e,io(t,3))},xr.get=La,xr.gt=Us,xr.gte=zs,xr.has=function(e,t){return null!=e&&fo(e,t,Tn)},xr.hasIn=Oa,xr.head=Go,xr.identity=ru,xr.includes=function(e,t,r,n){e=Gs(e)?e:Fa(e),r=r&&!n?ha(r):0;var i=e.length;return r<0&&(r=pr(i+r,0)),sa(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&xt(e,t,r)>-1},xr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:ha(r);return i<0&&(i=pr(n+i,0)),xt(e,t,i)},xr.inRange=function(e,t,n){return t=da(t),n===r?(n=t,t=0):n=da(n),function(e,t,r){return e>=gr(t,r)&&e<pr(t,r)}(e=ga(e),t,n)},xr.invoke=Pa,xr.isArguments=Vs,xr.isArray=qs,xr.isArrayBuffer=$s,xr.isArrayLike=Gs,xr.isArrayLikeObject=Ws,xr.isBoolean=function(e){return!0===e||!1===e||ea(e)&&En(e)==m},xr.isBuffer=Ys,xr.isDate=Hs,xr.isElement=function(e){return ea(e)&&1===e.nodeType&&!na(e)},xr.isEmpty=function(e){if(null==e)return!0;if(Gs(e)&&(qs(e)||"string"==typeof e||"function"==typeof e.splice||Ys(e)||ua(e)||Vs(e)))return!e.length;var t=co(e);if(t==S||t==O)return!e.size;if(bo(e))return!Dn(e).length;for(var r in e)if(De.call(e,r))return!1;return!0},xr.isEqual=function(e,t){return Pn(e,t)},xr.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Pn(e,t,r,n):!!i},xr.isError=Qs,xr.isFinite=function(e){return"number"==typeof e&&fr(e)},xr.isFunction=Ks,xr.isInteger=Xs,xr.isLength=Js,xr.isMap=ta,xr.isMatch=function(e,t){return e===t||Rn(e,t,so(t))},xr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Rn(e,t,so(t),n)},xr.isNaN=function(e){return ra(e)&&e!=+e},xr.isNative=function(e){if(vo(e))throw new Se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return In(e)},xr.isNil=function(e){return null==e},xr.isNull=function(e){return null===e},xr.isNumber=ra,xr.isObject=Zs,xr.isObjectLike=ea,xr.isPlainObject=na,xr.isRegExp=ia,xr.isSafeInteger=function(e){return Xs(e)&&e>=-9007199254740991&&e<=c},xr.isSet=oa,xr.isString=sa,xr.isSymbol=aa,xr.isTypedArray=ua,xr.isUndefined=function(e){return e===r},xr.isWeakMap=function(e){return ea(e)&&co(e)==P},xr.isWeakSet=function(e){return ea(e)&&"[object WeakSet]"==En(e)},xr.join=function(e,t){return null==e?"":dr.call(e,t)},xr.kebabCase=qa,xr.last=Qo,xr.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=ha(n))<0?pr(i+o,0):gr(o,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,o):Ct(e,Bt,o,!0)},xr.lowerCase=$a,xr.lowerFirst=Ga,xr.lt=la,xr.lte=ca,xr.max=function(e){return e&&e.length?dn(e,ru,wn):r},xr.maxBy=function(e,t){return e&&e.length?dn(e,io(t,2),wn):r},xr.mean=function(e){return Ft(e,ru)},xr.meanBy=function(e,t){return Ft(e,io(t,2))},xr.min=function(e){return e&&e.length?dn(e,ru,Nn):r},xr.minBy=function(e,t){return e&&e.length?dn(e,io(t,2),Nn):r},xr.stubArray=pu,xr.stubFalse=gu,xr.stubObject=function(){return{}},xr.stubString=function(){return""},xr.stubTrue=function(){return!0},xr.multiply=Su,xr.nth=function(e,t){return e&&e.length?Fn(e,ha(t)):r},xr.noConflict=function(){return ut._===this&&(ut._=Be),this},xr.noop=au,xr.now=Ls,xr.pad=function(e,t,r){e=ya(e);var n=(t=ha(t))?or(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Ui(Dt(i),r)+e+Ui(ht(i),r)},xr.padEnd=function(e,t,r){e=ya(e);var n=(t=ha(t))?or(e):0;return t&&n<t?e+Ui(t-n,r):e},xr.padStart=function(e,t,r){e=ya(e);var n=(t=ha(t))?or(e):0;return t&&n<t?Ui(t-n,r)+e:e},xr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),yr(ya(e).replace(re,""),t||0)},xr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&mo(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=da(e),t===r?(t=e,e=0):t=da(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=_r();return gr(e+o*(t-e+it("1e-"+((o+"").length-1))),t)}return $n(e,t)},xr.reduce=function(e,t,r){var n=qs(e)?Rt:Vt,i=arguments.length<3;return n(e,io(t,4),r,i,ln)},xr.reduceRight=function(e,t,r){var n=qs(e)?It:Vt,i=arguments.length<3;return n(e,io(t,4),r,i,cn)},xr.repeat=function(e,t,n){return t=(n?mo(e,t,n):t===r)?1:ha(t),Gn(ya(e),t)},xr.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},xr.result=function(e,t,n){var i=-1,o=(t=gi(t,e)).length;for(o||(o=1,e=r);++i<o;){var s=null==e?r:e[xo(t[i])];s===r&&(i=o,s=n),e=Ks(s)?s.call(e):s}return e},xr.round=Eu,xr.runInContext=e,xr.sample=function(e){return(qs(e)?Yr:Yn)(e)},xr.size=function(e){if(null==e)return 0;if(Gs(e))return sa(e)?or(e):e.length;var t=co(e);return t==S||t==O?e.size:Dn(e).length},xr.snakeCase=Wa,xr.some=function(e,t,n){var i=qs(e)?jt:ei;return n&&mo(e,t,n)&&(t=r),i(e,io(t,3))},xr.sortedIndex=function(e,t){return ti(e,t)},xr.sortedIndexBy=function(e,t,r){return ri(e,t,io(r,2))},xr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ti(e,t);if(n<r&&Fs(e[n],t))return n}return-1},xr.sortedLastIndex=function(e,t){return ti(e,t,!0)},xr.sortedLastIndexBy=function(e,t,r){return ri(e,t,io(r,2),!0)},xr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var r=ti(e,t,!0)-1;if(Fs(e[r],t))return r}return-1},xr.startCase=Ya,xr.startsWith=function(e,t,r){return e=ya(e),r=null==r?0:nn(ha(r),0,e.length),t=oi(t),e.slice(r,r+t.length)==t},xr.subtract=wu,xr.sum=function(e){return e&&e.length?qt(e,ru):0},xr.sumBy=function(e,t){return e&&e.length?qt(e,io(t,2)):0},xr.template=function(e,t,n){var i=xr.templateSettings;n&&mo(e,t,n)&&(t=r),e=ya(e),t=ba({},t,i,Hi);var o,s,a=ba({},t.imports,i.imports,Hi),u=Ra(a),l=Yt(a,u),c=0,f=t.interpolate||_e,d="__p += '",h=Le((t.escape||_e).source+"|"+f.source+"|"+(f===K?ce:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),p="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++et+"]")+"\n";e.replace(h,(function(t,r,n,i,a,u){return n||(n=i),d+=e.slice(c,u).replace(ve,Zt),r&&(o=!0,d+="' +\n__e("+r+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),d+="';\n";var g=De.call(t,"variable")&&t.variable;if(g){if(ue.test(g))throw new Se("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(z,""):d).replace(V,"$1").replace(q,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Xa((function(){return Ee(u,p+"return "+d).apply(r,l)}));if(m.source=d,Qs(m))throw m;return m},xr.times=function(e,t){if((e=ha(e))<1||e>c)return[];var r=d,n=gr(e,d);t=io(t),e-=d;for(var i=$t(n,t);++r<e;)t(r);return i},xr.toFinite=da,xr.toInteger=ha,xr.toLength=pa,xr.toLower=function(e){return ya(e).toLowerCase()},xr.toNumber=ga,xr.toSafeInteger=function(e){return e?nn(ha(e),-9007199254740991,c):0===e?e:0},xr.toString=ya,xr.toUpper=function(e){return ya(e).toUpperCase()},xr.trim=function(e,t,n){if((e=ya(e))&&(n||t===r))return Gt(e);if(!e||!(t=oi(t)))return e;var i=sr(e),o=sr(t);return yi(i,Qt(i,o),Kt(i,o)+1).join("")},xr.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===r))return e.slice(0,ar(e)+1);if(!e||!(t=oi(t)))return e;var i=sr(e);return yi(i,0,Kt(i,sr(t))+1).join("")},xr.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===r))return e.replace(re,"");if(!e||!(t=oi(t)))return e;var i=sr(e);return yi(i,Qt(i,sr(t))).join("")},xr.truncate=function(e,t){var n=30,i="...";if(Zs(t)){var o="separator"in t?t.separator:o;n="length"in t?ha(t.length):n,i="omission"in t?oi(t.omission):i}var s=(e=ya(e)).length;if(er(e)){var a=sr(e);s=a.length}if(n>=s)return e;var u=n-or(i);if(u<1)return i;var l=a?yi(a,0,u).join(""):e.slice(0,u);if(o===r)return l+i;if(a&&(u+=l.length-u),ia(o)){if(e.slice(u).search(o)){var c,f=l;for(o.global||(o=Le(o.source,ya(fe.exec(o))+"g")),o.lastIndex=0;c=o.exec(f);)var d=c.index;l=l.slice(0,d===r?u:d)}}else if(e.indexOf(oi(o),u)!=u){var h=l.lastIndexOf(o);h>-1&&(l=l.slice(0,h))}return l+i},xr.unescape=function(e){return(e=ya(e))&&W.test(e)?e.replace($,ur):e},xr.uniqueId=function(e){var t=++Ne;return ya(e)+t},xr.upperCase=Ha,xr.upperFirst=Qa,xr.each=ys,xr.eachRight=_s,xr.first=Go,su(xr,(mu={},yn(xr,(function(e,t){De.call(xr.prototype,t)||(mu[t]=e)})),mu),{chain:!1}),xr.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){xr[e].placeholder=xr})),Et(["drop","take"],(function(e,t){Ur.prototype[e]=function(n){n=n===r?1:pr(ha(n),0);var i=this.__filtered__&&!t?new Ur(this):this.clone();return i.__filtered__?i.__takeCount__=gr(n,i.__takeCount__):i.__views__.push({size:gr(n,d),type:e+(i.__dir__<0?"Right":"")}),i},Ur.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Et(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Ur.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:io(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),Et(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Ur.prototype[e]=function(){return this[r](1).value()[0]}})),Et(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Ur.prototype[e]=function(){return this.__filtered__?new Ur(this):this[r](1)}})),Ur.prototype.compact=function(){return this.filter(ru)},Ur.prototype.find=function(e){return this.filter(e).head()},Ur.prototype.findLast=function(e){return this.reverse().find(e)},Ur.prototype.invokeMap=Wn((function(e,t){return"function"==typeof e?new Ur(this):this.map((function(r){return Mn(r,e,t)}))})),Ur.prototype.reject=function(e){return this.filter(Ns(io(e)))},Ur.prototype.slice=function(e,t){e=ha(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Ur(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=ha(t))<0?n.dropRight(-t):n.take(t-e)),n)},Ur.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ur.prototype.toArray=function(){return this.take(d)},yn(Ur.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=xr[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(xr.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,u=t instanceof Ur,l=a[0],c=u||qs(t),f=function(e){var t=o.apply(xr,Pt([e],a));return i&&d?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=s&&!d,g=u&&!h;if(!s&&c){t=g?t:new Ur(this);var m=e.apply(t,a);return m.__actions__.push({func:ds,args:[f],thisArg:r}),new Fr(m,d)}return p&&g?e.apply(this,a):(m=this.thru(f),p?i?m.value()[0]:m.value():m)})})),Et(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);xr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(qs(i)?i:[],e)}return this[r]((function(r){return t.apply(qs(r)?r:[],e)}))}})),yn(Ur.prototype,(function(e,t){var r=xr[t];if(r){var n=r.name+"";De.call(Mr,n)||(Mr[n]=[]),Mr[n].push({name:t,func:r})}})),Mr[xi(r,2).name]=[{name:"wrapper",func:r}],Ur.prototype.clone=function(){var e=new Ur(this.__wrapped__);return e.__actions__=Li(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Li(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Li(this.__views__),e},Ur.prototype.reverse=function(){if(this.__filtered__){var e=new Ur(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ur.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=qs(e),n=t<0,i=r?e.length:0,o=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=gr(t,e+s);break;case"takeRight":e=pr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,l=n?a:s-1,c=this.__iteratees__,f=c.length,d=0,h=gr(u,this.__takeCount__);if(!r||!n&&i==u&&h==u)return ci(e,this.__actions__);var p=[];e:for(;u--&&d<h;){for(var g=-1,m=e[l+=t];++g<f;){var y=c[g],_=y.iteratee,v=y.type,b=_(m);if(2==v)m=b;else if(!b){if(1==v)continue e;break e}}p[d++]=m}return p},xr.prototype.at=hs,xr.prototype.chain=function(){return fs(this)},xr.prototype.commit=function(){return new Fr(this.value(),this.__chain__)},xr.prototype.next=function(){this.__values__===r&&(this.__values__=fa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},xr.prototype.plant=function(e){for(var t,n=this;n instanceof Br;){var i=Bo(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},xr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Ur){var t=e;return this.__actions__.length&&(t=new Ur(this)),(t=t.reverse()).__actions__.push({func:ds,args:[Zo],thisArg:r}),new Fr(t,this.__chain__)}return this.thru(Zo)},xr.prototype.toJSON=xr.prototype.valueOf=xr.prototype.value=function(){return ci(this.__wrapped__,this.__actions__)},xr.prototype.first=xr.prototype.head,nt&&(xr.prototype[nt]=function(){return this}),xr}();"function"==typeof define&&o.amdO?(ut._=lr,define((function(){return lr}))):ct?((ct.exports=lr)._=lr,lt._=lr):ut._=lr}).call(this)})),Ga.register("3264a",(function(e,t){let r;var n;Ua(e.exports,"ECommand",(function(){return r})),(n=r||(r={})).CONNECT_TO_ROOM="connectToRoom",n.MODULES_INFO_AVAILABLE="modulesInfoAvailable",n.MODULE_LIFECYCLE_EVENT_AVAILABLE="moduleLifecycleEventAvailable",n.CLIENT_CONNECTED="clientConnected",n.CLIENT_INFO_AVAILABLE="clientInfoAvailable",n.CLIENT_DISCONNECTED="clientDisconnected"})),Ga.register("iVqGx",(function(e,t){e.exports=o.e(84).then(o.t.bind(o,3084,23)).then((()=>Ga("8GHQT")))})),Ga("8NFq9");var Wa=Ga("a8VW4");function Ya(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==za?za:void 0}"undefined"==typeof globalThis&&(globalThis=Ya());const Ha="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==za&&za;function Qa(e){try{new e("")}catch(e){return!1}return!0}"function"==typeof Ha.Event&&Qa(Ha.Event)||(Ha.Event=function(e,t){this.bubbles=!!t&&!!t.bubbles,this.cancelable=!!t&&!!t.cancelable,this.composed=!!t&&!!t.composed,this.type=e}),void 0!==Ha.EventTarget&&Qa(Ha.EventTarget)||(Ha.EventTarget=function(){function e(){this.__listeners=new Map}return e.prototype=Object.create(Object.prototype),e.prototype.addEventListener=function(e,t,r){if(arguments.length<2)throw new TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);const n=this.__listeners,i=e.toString();n.has(i)||n.set(i,new Map);const o=n.get(i);o.has(t)||o.set(t,r)},e.prototype.removeEventListener=function(e,t,r){if(arguments.length<2)throw new TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);const n=this.__listeners,i=e.toString();if(n.has(i)){const e=n.get(i);e.has(t)&&e.delete(t)}},e.prototype.dispatchEvent=function(e){if(!(e instanceof Event))throw new TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");const t=e.type,r=this.__listeners.get(t);if(r)for(const[n,i]of r.entries()){try{"function"==typeof n?n.call(this,e):n&&"function"==typeof n.handleEvent&&n.handleEvent(e)}catch(e){setTimeout((()=>{throw e}))}i&&i.once&&r.delete(n)}return!0},e}());class Ka{constructor(){Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}addEventListener(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}removeEventListener(e,t){if(!(e in this.listeners))return;const r=this.listeners[e];for(let n=0,i=r.length;n<i;n++)if(r[n].callback===t)return void r.splice(n,1)}dispatchEvent(e){if(!(e.type in this.listeners))return;const t=this.listeners[e.type].slice();for(let r=0,n=t.length;r<n;r++){const n=t[r];try{n.callback.call(this,e)}catch(e){Promise.resolve().then((()=>{throw e}))}n.options&&n.options.once&&this.removeEventListener(e.type,n.callback)}return!e.defaultPrevented}}class Xa extends Ka{constructor(){super(),this.listeners||Ka.call(this),Object.defineProperty(this,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(this,"reason",{value:void 0,writable:!0,configurable:!0})}toString(){return"[object AbortSignal]"}dispatchEvent(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}}class Ja{constructor(){Object.defineProperty(this,"signal",{value:new Xa,writable:!0,configurable:!0})}abort(e){const t=new Event("abort");let r=e;void 0===r&&(r=new Error("This operation was aborted"),r.name="AbortError"),this.signal.reason=r,this.signal.dispatchEvent(t)}toString(){return"[object AbortController]"}}!function(e){(function(e){return"function"==typeof e.Request&&!Object.prototype.hasOwnProperty.call(e.Request.prototype,"signal")||!e.AbortController})(e)&&("undefined"!=typeof Symbol&&Symbol.toStringTag&&(Ja.prototype[Symbol.toStringTag]="AbortController",Xa.prototype[Symbol.toStringTag]="AbortSignal"),e.AbortController=Ja,e.AbortSignal=Xa)}("undefined"!=typeof self?self:za);const Za=Ya();"function"!=typeof Za.queueMicrotask&&(Za.queueMicrotask=function(e){Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(...t){const r=isNaN(t[0])?1:Number(t[0]);return r?Array.prototype.reduce.call(this,(function(t,n){return Array.isArray(n)?t.push(...e.call(n,r-1)):t.push(n),t}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(...e){return this.map(...e).flat()},writable:!0}),Ga("8NFq9"),Wa=Ga("a8VW4");var eu,tu,ru,nu,iu,ou,su,au,uu,lu,cu,fu,du="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==za?za:{};function hu(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==du?du:void 0}"undefined"==typeof globalThis&&(globalThis=hu());let pu="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==du&&du;function gu(e){try{new e("")}catch(e){return!1}return!0}"function"==typeof pu.Event&&gu(pu.Event)||(pu.Event=function(e,t){this.bubbles=!!t&&!!t.bubbles,this.cancelable=!!t&&!!t.cancelable,this.composed=!!t&&!!t.composed,this.type=e}),void 0!==pu.EventTarget&&gu(pu.EventTarget)||(pu.EventTarget=function(){function e(){this.__listeners=new Map}return e.prototype=Object.create(Object.prototype),e.prototype.addEventListener=function(e,t,r){if(arguments.length<2)throw TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);let n=this.__listeners,i=e.toString();n.has(i)||n.set(i,new Map);let o=n.get(i);o.has(t)||o.set(t,r)},e.prototype.removeEventListener=function(e,t,r){if(arguments.length<2)throw TypeError(`TypeError: Failed to execute 'addEventListener' on 'EventTarget': 2 arguments required, but only ${arguments.length} present.`);let n=this.__listeners,i=e.toString();if(n.has(i)){let e=n.get(i);e.has(t)&&e.delete(t)}},e.prototype.dispatchEvent=function(e){if(!(e instanceof Event))throw TypeError("Failed to execute 'dispatchEvent' on 'EventTarget': parameter 1 is not of type 'Event'.");let t=e.type,r=this.__listeners.get(t);if(r)for(let[n,i]of r.entries()){try{"function"==typeof n?n.call(this,e):n&&"function"==typeof n.handleEvent&&n.handleEvent(e)}catch(e){setTimeout((()=>{throw e}))}i&&i.once&&r.delete(n)}return!0},e}());let mu=class{constructor(){Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}addEventListener(e,t,r){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:r})}removeEventListener(e,t){if(!(e in this.listeners))return;let r=this.listeners[e];for(let n=0,i=r.length;n<i;n++)if(r[n].callback===t)return void r.splice(n,1)}dispatchEvent(e){if(!(e.type in this.listeners))return;let t=this.listeners[e.type].slice();for(let r=0,n=t.length;r<n;r++){let n=t[r];try{n.callback.call(this,e)}catch(e){Promise.resolve().then((()=>{throw e}))}n.options&&n.options.once&&this.removeEventListener(e.type,n.callback)}return!e.defaultPrevented}},yu=class extends mu{constructor(){super(),this.listeners||mu.call(this),Object.defineProperty(this,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(this,"reason",{value:void 0,writable:!0,configurable:!0})}toString(){return"[object AbortSignal]"}dispatchEvent(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),super.dispatchEvent(e)}},_u=class{constructor(){Object.defineProperty(this,"signal",{value:new yu,writable:!0,configurable:!0})}abort(e){let t;t=new Event("abort");let r=e;void 0===r&&((r=Error("This operation was aborted")).name="AbortError"),this.signal.reason=r,this.signal.dispatchEvent(t)}toString(){return"[object AbortController]"}};var vu;("function"!=typeof(vu="undefined"!=typeof self?self:du).Request||vu.Request.prototype.hasOwnProperty("signal"))&&vu.AbortController||("undefined"!=typeof Symbol&&Symbol.toStringTag&&(_u.prototype[Symbol.toStringTag]="AbortController",yu.prototype[Symbol.toStringTag]="AbortSignal"),vu.AbortController=_u,vu.AbortSignal=yu);let bu=hu();var Su;"function"!=typeof bu.queueMicrotask&&(bu.queueMicrotask=function(e){Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){let t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(r,n){return Array.isArray(n)?r.push.apply(r,e.call(n,t-1)):r.push(n),r}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0}),(Su=eu||(eu={})).CLICK="videoElement.click",Su.PLAYING="videoElement.playing",Su.LOADING="videoElement.loading",Su.PAUSE="videoElement.pause",Su.VIDEO_PLAYBACK_STATE_CHANGE="videoElement.videoPlaybackStateChange",Su.NATIVE_EVENT="videoElement.nativeEvent",Su.UPDATE_PLAYER_RESOLUTION="videoElement.updatePlayerResolution",Su.TIME_UPDATE="videoElement.timeUpdate";let Eu=class{constructor(e=!0){this.appId=null,this._lastUid=-1,this._messages={},this._immediateExceptions=!1,this._allSubscribingMsg="*",this._immediateExceptions=e}setAppId(e){this.appId=e}getAppId(){return this.appId}publish(e,t){return this._publish(e,t,!1,this._immediateExceptions)}publishSync(e,t){return this._publish(e,t,!0,this._immediateExceptions)}subscribe(e,t){if("function"!=typeof t)return"";let r="uid_"+String(++this._lastUid);return this._messages[e]||(this._messages[e]={}),(this._messages[e]||{})[r]=t,r}toggleSubscriptionBulk(e){"subscribe"===e.action?Object.entries(e.callbacks).forEach((([e,t])=>{this.subscribe.call(this,e,t)})):Object.entries(e.callbacks).forEach((([e,t])=>{this.unsubscribe.call(this,t)}))}subscribeAll(e){return this.subscribe(this._allSubscribingMsg,e)}subscribeOnce(e,t){let r=this.subscribe(e,((...e)=>{this.unsubscribe(r),t.apply(this,e)}));return this}clearAllSubscriptions(){this._messages={}}clearSubscriptions(e){for(let t in this._messages)Object.prototype.hasOwnProperty.call(this._messages,t)&&0===t.indexOf(e)&&delete this._messages[t]}unsubscribe(e){let t="string"==typeof e&&(Object.prototype.hasOwnProperty.call(this._messages,e)||this._descendantTopicExists(e)),r=!t&&"string"==typeof e,n="function"==typeof e,i=!1;if(!t){for(let t in this._messages)if(Object.prototype.hasOwnProperty.call(this._messages,t)){let o=this._messages[t]||{};if(r&&o[e]){delete o[e],i=e;break}if(n)for(let t in o)Object.prototype.hasOwnProperty.call(o,t)&&o[t]===e&&(delete o[t],i=!0)}return i}this.clearSubscriptions(e)}_hasKeys(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1}_throwException(e){return()=>{throw e}}_callSubscriberWithDelayedExceptions(e,t){try{e(t)}catch(e){setTimeout(this._throwException(e),0)}}_callSubscriberWithImmediateExceptions(e,t){e(t)}_deliverMessage(e,t,r,n){let i=this._messages[t]||{},o=n?this._callSubscriberWithImmediateExceptions:this._callSubscriberWithDelayedExceptions;if(Object.prototype.hasOwnProperty.call(this._messages,t))for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o(i[s],r)}_createDeliveryFunction(e,t,r){return()=>{let n=String(e),i=n.lastIndexOf(".");for(this._deliverMessage(e,e,t,r);i>-1;)i=(n=n.substr(0,i)).lastIndexOf("."),this._deliverMessage(e,n,t,r);this._deliverMessage(e,this._allSubscribingMsg,t,r)}}_hasDirectSubscribersFor(e){let t=String(e);return!(!Object.prototype.hasOwnProperty.call(this._messages,t)||!this._hasKeys(this._messages[t]||{}))}_messageHasSubscribers(e){let t=String(e),r=this._hasDirectSubscribersFor(t)||this._hasDirectSubscribersFor(this._allSubscribingMsg),n=t.lastIndexOf(".");for(;!r&&-1!==n;)n=(t=t.substr(0,n)).lastIndexOf("."),r=this._hasDirectSubscribersFor(t);return r}_publish(e,t,r,n){let i="symbol"==typeof e?e.toString():e,o=this._createDeliveryFunction(i,t,n);return!!this._messageHasSubscribers(i)&&(r?o():setTimeout(o,0),!0)}_descendantTopicExists(e){for(let t in this._messages)if(Object.prototype.hasOwnProperty.call(this._messages,t)&&0===t.indexOf(e))return!0;return!1}};new Eu,new Eu;let wu=e=>`configProvider.configUpdated.${e}`,Tu=e=>{let t={};return{configConsumerConstructor:class{constructor(r,n){this._onConfigUpdatedWithContext=this._onConfigUpdated.bind(this),this._configKey=r,this._eventBus=n||e;let i=wu(r);this._onConfigUpdatedListener=this._eventBus.subscribe(i,this._onConfigUpdatedWithContext),this.config=t[r]}destroy(){this._eventBus.unsubscribe(this._onConfigUpdatedListener)}_handleConfigUpdated(e,t){}_onConfigUpdated(e){t=e.newConfig;let r=e.newConfig[this._configKey];this.config=r,this._handleConfigUpdated(e.updatedValues,r)}},setConsumerConfig:e=>{t=e}}},Lu=e=>e instanceof Date,Ou=e=>e instanceof Element||e instanceof Document,Mu=e=>null!=e&&"object"==typeof e,Au=(e,...t)=>Object.prototype.hasOwnProperty.call(e,...t),Pu=e=>{return Mu(e)&&(t=e,0===Object.keys(t).length);var t},Ru=e=>t=>new Promise(((r,n)=>{e(t,(e=>{r(e)}),(e=>{n(e)}))})),Iu=(e,t)=>{if(e===t)return{};if(!Mu(e)||!Mu(t)||Ou(e)||Ou(t))return t;let r=Object.keys(e).reduce(((e,r)=>(Au(t,r)||(e[r]=void 0),e)),{});return Lu(e)||Lu(t)?e.valueOf()==t.valueOf()?{}:t:Object.keys(t).reduce(((r,n)=>{if(!Au(e,n))return r[n]=t[n],r;let i=Iu(e[n],t[n]);return Pu(i)&&!Lu(i)&&(Pu(e[n])||!Pu(t[n]))||(r[n]=i),r}),r)},ju=e=>{let t={...e},r=new Eu,{configConsumerConstructor:n,setConsumerConfig:i}=Tu(r);return i(e),{getConfigField:e=>t[e],setConfig:(e,r,n=!1)=>{let o=Object.entries(e).reduce(((e,[t,r])=>(e[t]={...e[t],...r},e)),{...t}),s=Iu(t,o);t=o,Object.entries(s).forEach((([e,t])=>{let i=wu(e);n?r.publishSync(i,{updatedValues:t,newConfig:o}):r.publish(i,{updatedValues:t,newConfig:o})})),i(t)},getConfig:()=>t,resetConfig:()=>{t={...e}},ConfigConsumer:n}};function Du(e,t,r){if(!r||"function"!=typeof r.value)throw TypeError(`Only methods can be decorated with @bind. <${t}> is not a method!`);return{configurable:!0,get(){let e=r.value?.bind(this);return Object.defineProperty(this,t,{value:e,configurable:!0,writable:!0}),e}}}var Nu,Cu,xu,ku;function Bu(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}(ku=tu||(tu={})).HLS="hls",ku.WEBRTC="webrtc",ku.NATIVE="native",ku.BROADCAST="broadcast",(xu=ru||(ru={})).IDLE="idle",xu.LOADING="loading",xu.PAUSED="paused",xu.PLAYING="playing",xu.ERROR="error",(Cu=nu||(nu={})).WAITING="waiting",Cu.AUTO="auto",Cu.MANUAL="manual",(Nu=iu||(iu={})).BROADCAST_STATE_CHANGED="commonEvents.broadcastStateChanged",Nu.BROADCAST_REMOTE_STATS_AVAILABLE="commonEvents.broadcastRemoteStatsAvailable",Nu.PLAYING_STATE_CHANGED="commonEvents.playingStateChanged",Nu.COMMON_ERROR="commonEvents.commonError",new Eu,(ou||(ou={})).LOG="logger.log";let Fu=(e,t,r)=>(n,i)=>{e.publish(ou.LOG,{domain:t,timestamp:performance.now(),level:r,message:n,payload:i})},Uu=(e,t)=>{let r=`${t}{${(Math.random()+1).toString(36).substring(2,6)}}`;return{debug:Fu(e,r,"debug"),verbose:Fu(e,r,"verbose"),info:Fu(e,r,"info"),warn:Fu(e,r,"warn"),error:Fu(e,r,"error"),fatal:Fu(e,r,"fatal")}},zu=(...e)=>console.log(...e.filter((e=>void 0!==e))),Vu={debug:(e,t)=>zu(`%c${e}`,"color: rgb(102, 102, 102)",t),verbose:(e,t)=>zu(`%c${e}`,"color: rgb(36, 114, 200)",t),info:(e,t)=>zu(`%c${e}`,"color: rgb(13, 188, 121)",t),warn:(e,t)=>zu(`%c${e}`,"color: rgb(229, 229, 16)",t),error:(e,t)=>zu(`%c${e}`,"color: rgb(241, 76, 76)",t),fatal:(e,t)=>zu(`%c${e}`,"background: rgb(241, 76, 76); color: #fff",t)},qu=[],$u=class{constructor(e,t=qu,r=[],n=[],i=!0){this._levels=t,this._eventBus=e,this._enableErrorAutoLog=i,this._onLogMessageReceivedToken=this._eventBus.subscribe(ou.LOG,this._onMessageReceived),this._onErrorReceivedToken=this._eventBus.subscribe(iu.COMMON_ERROR,this._onErrorReceived),this._ignoreDomains=n,this._additionalScopeSubscriptions=r.map((e=>this._eventBus.subscribe(e,(t=>{this._onAdditionalScopeMessageReceived(e,t)})))),this._appId=`${(Math.random()+1).toString(36).substring(2,6)}`}destroy(){this._eventBus.unsubscribe(this._onLogMessageReceivedToken),this._eventBus.unsubscribe(this._onErrorReceivedToken),this._additionalScopeSubscriptions.forEach(this._eventBus.unsubscribe)}_onMessageReceived(e){let{domain:t,timestamp:r,level:n,message:i,payload:o}=e;this._levels.includes(n)&&!this._ignoreDomains.includes(t)&&(Vu[n]||Vu.info)(`(${this._appId}) :: [${t}] ${n.toUpperCase()}:\n${i}@${r}`,o)}_onAdditionalScopeMessageReceived(e,t){(0,Vu.verbose)(`[${e}] Event receiver with payload ${t} @ ${performance.now()}`)}_onErrorReceived({error:e}){this._enableErrorAutoLog&&Uu(this._eventBus,"COMMON ERROR").error(`Error in ${e.domain}: ${e.message} ${e.info&&" ("+e.info+")"}`)}};Bu([Du],$u.prototype,"_onMessageReceived",null),Bu([Du],$u.prototype,"_onAdditionalScopeMessageReceived",null),Bu([Du],$u.prototype,"_onErrorReceived",null);let Gu={videoElementControllerConfig:{limitCheckingAutoplay:5,minimalPossibleVideoDimension:50,timeoutUpdateStatusPlaying:2e3,timeoutUpdateVideoDuration:500}},{ConfigConsumer:Wu,setConfig:Yu,resetConfig:Hu}=ju(Gu);var Qu;(Qu=su||(su={})).NATIVE_EVENT="videoElementController.nativeEvent",Qu.CLICK="videoElementController.click",Qu.FORCE_PLAY_AFTER_PAUSE="videoElementController.forcePlayAfterPause",Qu.VIDEO_START="videoElementController.videoStart",Qu.VIDEO_PAUSE="videoElementController.videoPause",Qu.VIDEO_RESET="videoElementController.videoReset",Qu.PAUSED="videoElementController.paused",Qu.PLAYING="videoElementController.playing",Qu.LOADING="videoElementController.loading",Qu.LOADED="videoElementController.loaded",Qu.UPDATED="videoElementController.updated",Qu.DESTROY="videoElementController.destroy",Qu.STREAM_RESET="videoElementController.streamReset",Qu.CAN_PLAY="videoElementController.canPlay",Qu.REMOVE_MEDIA_STREAM="videoElementController.removeMediaStream",Qu.ERROR="videoElementController.error",Qu.ABORT="videoElementController.abort",Qu.STALLED="videoElementController.stalled",Qu.WAITING="videoElementController.waiting",Qu.UPDATE_PLAYER_RESOLUTION="videoElementController.updatePlayerResolution",Qu.RESET_CHECKING_AUTOPLAY_COUNT="videoElementController.resetCheckingAutoplayCount",Qu.CANCEL_RESET_STREAM="videoElementController.cancelResetStream",Qu.RESTART="videoElementController.restart",Qu.TIME_UPDATE_NATIVE="videoElementController.native",Qu.UPDATE_MEDIA_STREAM="videoElementController.updateMediaStream",Qu.VIDEO_ELEMENT_RECREATED="videoElementController.videoElementRecreated",Qu.VIDEO_PLAYBACK_STATE_CHANGED="videoElementController.videoPlaybackStateChanged",Qu.SET_VOLUME="videoElementController.setVolume";let Ku=0,Xu=class{constructor(e){this._config={},this._eventsMap={[su.CAN_PLAY]:this._checkAutoplayEnabled,[su.DESTROY]:this.destroy,[su.FORCE_PLAY_AFTER_PAUSE]:this._forcePlayAfterPause,[su.RESET_CHECKING_AUTOPLAY_COUNT]:this._resetCheckingAutoplayCount},this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - AutoplayController"),this._logger.info("Created"),this._logger.debug("Initial config",this._config),this._logger.debug("Initial state",this._state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e}destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_handleConfigUpdated(){}_forcePlayAfterPause(e){if(void 0!==this._config.autoplay&&!this._config.autoplay)return void this._logger.verbose("Autoplay is disabled.");this._logger.verbose(`Trying to force video to play.\n    Reason: ${e.reason}`);let t=this._state.getState();!t.startedPlaying||t.isPlaying||this._config.canBePaused?this._logger.verbose("Currently unable to autoplay the video"):this._checkAutoplayEnabled()}_checkAutoplayEnabled(){if(this._logger.debug("Checking if autoplay is possible"),this._state.getState().canPlay){if(void 0===this._config.autoplay||this._config.autoplay)return Ku>this._config.limitCheckingAutoplay?(this._logger.verbose(`Unable to autoplay the video. The limit of autoplay checking (${this._config.limitCheckingAutoplay}) is exceeded`),void this._eventBus.publish(su.PAUSED,{})):(Ku+=1,this._logger.verbose("Autoplay is used to play the video"),void this._eventBus.publish(su.VIDEO_START,{}));this._logger.verbose("Autoplay is disabled.")}else this._logger.verbose("No canPlay event caught, skipping check")}_resetCheckingAutoplayCount(){Ku=0}};Bu([Du],Xu.prototype,"destroy",null),Bu([Du],Xu.prototype,"init",null),Bu([Du],Xu.prototype,"_forcePlayAfterPause",null),Bu([Du],Xu.prototype,"_checkAutoplayEnabled",null),Bu([Du],Xu.prototype,"_resetCheckingAutoplayCount",null);let Ju=class extends EventTarget{constructor(){super()}emitEvent(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))}},Zu=class extends Ju{constructor(e){super(),this._eventsMap={[su.PLAYING]:this._handlePlaying,[su.LOADING]:this._handleLoading,[su.VIDEO_PAUSE]:this._handlePause,[su.CLICK]:this._handleClick,[su.DESTROY]:this.destroy,[su.NATIVE_EVENT]:this._handleNativeEvent,[su.UPDATE_PLAYER_RESOLUTION]:this._handleUpdatePlayerResolution,[su.VIDEO_PLAYBACK_STATE_CHANGED]:this._handleVideoPlaybackStateChange,[su.TIME_UPDATE_NATIVE]:this._handleTimeUpdate},this._eventBus=e.eventBus,this.init()}destroy(){this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}init(){this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_handlePlaying(e){this.emitEvent(eu.PLAYING,e)}_handleLoading(){this.emitEvent(eu.LOADING,{})}_handlePause(){this.emitEvent(eu.PAUSE,{})}_handleClick(e){this.emitEvent(eu.CLICK,{originalEvent:e.originalEvent})}_handleNativeEvent(e){this.emitEvent(eu.NATIVE_EVENT,e)}_handleUpdatePlayerResolution(e){this.emitEvent(eu.UPDATE_PLAYER_RESOLUTION,e)}_handleTimeUpdate(e){this.emitEvent(eu.TIME_UPDATE,e)}_handleVideoPlaybackStateChange(e){this.emitEvent(eu.VIDEO_PLAYBACK_STATE_CHANGE,{prevState:e.prevState,nextState:e.nextState})}};var el;Bu([Du],Zu.prototype,"destroy",null),Bu([Du],Zu.prototype,"init",null),Bu([Du],Zu.prototype,"_handlePlaying",null),Bu([Du],Zu.prototype,"_handleLoading",null),Bu([Du],Zu.prototype,"_handlePause",null),Bu([Du],Zu.prototype,"_handleClick",null),Bu([Du],Zu.prototype,"_handleNativeEvent",null),Bu([Du],Zu.prototype,"_handleUpdatePlayerResolution",null),Bu([Du],Zu.prototype,"_handleTimeUpdate",null),Bu([Du],Zu.prototype,"_handleVideoPlaybackStateChange",null),el=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){t.__esModule=!0,t.default=void 0;var n=r(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(r),s=Math.max(i,o),a=0,u=e.map([t,r],(function(t){var r=s-e.getVersionPrecision(t),n=t+Array(r+1).join(".0");return e.map(n.split("."),(function(e){return Array(20-e.length).join("0")+e})).reverse()}));for(n&&(a=s-Math.min(i,o)),s-=1;s>=a;){if(u[0][s]>u[1][s])return 1;if(u[0][s]===u[1][s]){if(s===a)return 0;s-=1}else if(u[0][s]<u[1][s])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var i=e[r];if(t(i,r))return i}},e.assign=function(e){for(var t,r,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));for(t=0,r=i.length;t<r;t+=1)!function(){var r=i[t];"object"==typeof r&&null!==r&&Object.keys(r).forEach((function(t){e[t]=r[t]}))}();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,r){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},o=r(18),s=function(){function e(){}return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e,[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}]),e}();t.default=s,e.exports=t.default},91:function(e,t,r){t.__esModule=!0,t.default=void 0;var n=u(r(92)),i=u(r(93)),o=u(r(94)),s=u(r(95)),a=u(r(17));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,i={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"==typeof s&&(r[t]=s,n+=1)})),n>0){var s=Object.keys(r),u=a.default.find(s,(function(e){return t.isOS(e)}));if(u){var l=this.satisfies(r[u]);if(void 0!==l)return l}var c=a.default.find(s,(function(e){return t.isPlatform(e)}));if(c){var f=this.satisfies(r[c]);if(void 0!==f)return f}}if(o>0){var d=Object.keys(i),h=a.default.find(d,(function(e){return t.isBrowser(e,!0)}));if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),i=a.default.getBrowserTypeByAlias(n);return t&&i&&(n=i.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(i,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=i.default.getFirstMatch(o,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(t),n={name:o.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=i.default.getAndroidVersionName(t),n={name:o.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:o.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){t.__esModule=!0,t.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=s,e.exports=t.default}});let tl=globalThis?.navigator?.userAgent?(cl=el,cl&&cl.__esModule?cl.default:cl).getParser(globalThis.navigator.userAgent):null,rl=e=>!!tl&&(tl.satisfies(e)||!1),nl=rl({safari:">=15"}),il=rl({firefox:">0"}),ol=rl({safari:">0"}),sl=rl({chrome:">0"}),al=rl({edge:">0"}),ul=new WeakMap,ll=(e,t)=>{let r=(ul.get(e)||Promise.resolve()).then((()=>{let r=((e,t)=>e instanceof HTMLMediaElement?(((e,t)=>{let r=0===e.readyState,n=2!==e.networkState&&1!==e.networkState;if(il&&"play"===t&&r&&n)throw Error("Can not play audio")})(e,t),"function"==typeof t?t(e):e[t]()):null)(e,t);return r?.then?Promise.resolve(r):new Promise((e=>{setTimeout((()=>{e(r)}),150)}))})).then((()=>{ul.delete(e)})).catch((t=>{throw ul.delete(e),t}));return ul.set(e,r),r};var cl;let fl=class{constructor(e){this._eventsMap={[su.VIDEO_START]:this._startVideo,[su.VIDEO_PAUSE]:this._pauseVideo,[su.VIDEO_RESET]:this._resetVideo,[su.RESTART]:this._restart,[su.DESTROY]:this._destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - PlaybackController"),this._logger.info("Created"),this._logger.debug("Initial state",this._state),this.init()}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_startVideo(){let e=this._state.getState().videoElement;if(this._logger.verbose("Starting the video"),e)return e.playbackRate||(e.playbackRate=1),this._logger.debug("Play call is added to the promises queue"),ll(e,"play").then((()=>{this._logger.debug("Play call resolved"),this._state.getState().canPlay&&this._eventBus.publish(su.PLAYING,{})})).catch((e=>{this._state.setState({isAutoplayError:!0}),this._logger.error("An error occured when trying to play the video.",{error:e}),this._state.getState().canPlay&&this._eventBus.publish(su.PAUSED,{})}))}_pauseVideo(){this._logger.debug("Pausing the video");let e=this._state.getState().videoElement;if(e)return this._logger.debug("Pause call is added to the promises queue"),ll(e,"pause").then((()=>{this._logger.debug("Pause call resolved")})).catch((e=>{this._logger.warn("Could not pause video",e)}))}_loadVideo(){this._logger.verbose("Loading the video");let e=this._state.getState().videoElement;if(!e?.src||!e.src.startsWith("blob"))return e?(this._logger.debug("Load call is added to the promises queue"),ll(e,"load").then((()=>{this._logger.debug("Load call resolved")})).catch((e=>{this._logger.warn("Could not load video",e)}))):void 0;this._logger.debug("Stream seems to be blob. Skipping load")}_resetVideo(){this._logger.verbose("Resetting the video"),this._state.getState().videoElement&&(this._eventBus.publish(su.LOADING,{}),this._loadVideo())}async _restart(){this._logger.verbose("Restarting the video"),await this._pauseVideo(),this._startVideo()}_destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}};Bu([Du],fl.prototype,"init",null),Bu([Du],fl.prototype,"_startVideo",null),Bu([Du],fl.prototype,"_pauseVideo",null),Bu([Du],fl.prototype,"_loadVideo",null),Bu([Du],fl.prototype,"_resetVideo",null),Bu([Du],fl.prototype,"_restart",null),Bu([Du],fl.prototype,"_destroy",null);let dl=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},hl="\n  width: 100%;\n",pl=class{constructor(e){this._knownVideoElementStyles="",this._eventsMap={[su.PLAYING]:this.startAnimationFrame,[su.LOADING]:this.cancelAnimationFrame,[su.REMOVE_MEDIA_STREAM]:this.cancelAnimationFrame},this._applyStyles=()=>{this._logger.debug("Apply styles for canvas and video elements");let{canvasElement:e,videoElement:t}=this._getElements();e&&t&&(this._knownVideoElementStyles=t.style.cssText,e.style.cssText=hl,t.style.cssText=`\n      ${hl}\n      opacity: 0;\n      position: absolute;\n      left: 0;\n      top: 0;\n    `)},this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - CanvasVideoRenderer");let t=document.createElement("canvas");this._canvasContext=t.getContext("2d"),e.className&&(t.className=e.className),this.init(),this._state.setState({canvasElement:t}),this._applyStyles(),this._logger.verbose("Canvas renderer has been created")}startAnimationFrame(){let{canvasElement:e,videoElement:t}=this._getElements();if(this.cancelAnimationFrame(),!e||!t)return;let{width:r,height:n}=e.getBoundingClientRect(),{videoWidth:i,videoHeight:o}=t;if(r/n<1&&i/o>1){let s=Math.max(r,i),a=o*(r/i),u=r>s?(r-s)/2:0,l=(n-a)/2;if(this._canvasContext){let t=devicePixelRatio;e.width=s*t,e.height=n*t,this._canvasContext.scale(t,t)}this._canvasContext?.drawImage(t,u,l,s,a)}else{let s=Math.max(n,o),a=i*(n/o),u=n>s?(n-s)/2:0,l=(r-a)/2;if(this._canvasContext){let t=devicePixelRatio;e.width=r*t,e.height=s*t,this._canvasContext.scale(t,t)}this._canvasContext?.drawImage(t,l,u,a,s)}this._state.getState().isLoading||(this._canvasAnimationFrameId=requestAnimationFrame(this.startAnimationFrame))}getCanvasElement(){return this._getElements().canvasElement}destroy(){this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap});let{canvasElement:e,videoElement:t}=this._getElements();e&&e.parentNode&&e.parentNode.removeChild(e),t&&(t.style.cssText=this._knownVideoElementStyles,this._knownVideoElementStyles=""),this._state.setState({canvasElement:null}),this._logger.verbose("Canvas renderer was destroyed")}init(){this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}cancelAnimationFrame(){this._canvasAnimationFrameId&&(cancelAnimationFrame(this._canvasAnimationFrameId),this._canvasAnimationFrameId=null)}_getElements(){let{videoElement:e,canvasElement:t}=this._state.getState();return{videoElement:e,canvasElement:t}}};Bu([Du],pl.prototype,"startAnimationFrame",null),Bu([Du],pl.prototype,"destroy",null),Bu([Du],pl.prototype,"init",null),Bu([Du],pl.prototype,"cancelAnimationFrame",null),Bu([Du],pl.prototype,"_getElements",null);let gl=class{constructor(e){this._canvasVideoRenderer=null,this._config={},this._isLocalVideo=!1,this._eventsMap={[su.SET_VOLUME]:this._setVolume,[su.DESTROY]:this._destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - RenderController"),this._logger.info("Created"),this._logger.debug("Initial config",this._config),this._logger.debug("Initial state",this._state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e,this.applyConfigToVideoElement()}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}getElements(){let{videoElement:e,canvasElement:t,ownContainer:r}=this._state.getState();return{videoElement:e,canvasElement:t,ownContainer:r}}getVideoElement(){return this.getElements().videoElement}getCanvasElement(){return this.getElements().canvasElement}renderVideoInto(e){let{ownContainer:t,videoElement:r}=this.getElements();this._logger.debug("renderVideoInto method was called");let n=!1;if(e&&r){let i=t||e;r.parentElement!==i&&(n=!0,i.appendChild(r));let o=this._canvasVideoRenderer?.getCanvasElement();this._canvasVideoRenderer&&o?.parentElement!==i&&(n=!0,i.appendChild(o),this._logger.info("Canvas element has been rendered to DOM")),i===t&&t.parentElement!==e&&(n=!0,e.appendChild(t)),n?this._logger.info("Video element has been rendered to DOM"):this._logger.verbose("Skipping video element render: video element is already mounted to the DOM.")}}setVideoElement(e,t){this._logger.debug("Video element updated",e),e!==this.getVideoElement()?(this._isLocalVideo&&(this._logger.verbose("Removing video element and container from document"),dl(this.getElements().videoElement),dl(this.getElements().ownContainer)),this._state.setState({videoElement:e,ownContainer:t}),this.applyConfigToVideoElement()):this._logger.verbose("Received video element is equal to the previous one. Skipping")}applyConfigToVideoElement(){if(this._logger.debug("Applying config to the video element"),!this.getVideoElement())return void this._logger.verbose("No video element known, could not apply config");let e=this.getVideoElement();if(!e)return;let{isNonAnonymous:t,isMuted:r,nativeControls:n,videoElementClassName:i,canvasElementClassName:o,shouldUseCanvas:s,rootElement:a,autoplay:u}=this._config;this._logger.verbose("Applied config",this._config),u&&(e.autoplay=!0),e.playsInline=!0,void 0!==n&&(e.controls=!!n),void 0!==r&&(e.muted=!!r),void 0!==t&&(t?e.removeAttribute("crossOrigin"):e.crossOrigin="anonymous"),i&&(e.className=i);let l=[this._state.getState().volume,this._config.volume].find((e=>void 0!==e));if(void 0!==l&&this._setVolume({volume:l}),s&&!this._canvasVideoRenderer&&(this._logger.verbose("Adding canvas as requested"),this._addCanvasVideoRenderer(),this._state.getState().isPlaying&&this._canvasVideoRenderer.startAnimationFrame()),!s&&this._canvasVideoRenderer){let e=this._state.getState().stream;this._logger.verbose("Removing canvas renderer"),e&&this._eventBus.publish(su.UPDATE_MEDIA_STREAM,e),this._destroyCanvasRenderer()}let c=this.getCanvasElement();c&&(e.className="",o&&(c.className=o)),a&&this.renderVideoInto(a)}destroy(){if(this._logger.info("Destroying"),this._destroyCanvasRenderer(),this._isLocalVideo){this._logger.debug("Removing video element and container from document in destroy");let{videoElement:e,ownContainer:t}=this.getElements();dl(e),dl(t)}}createVideoElement(){let e,t;this._logger.info("Creating video element"),this._config.videoElement?(this._logger.debug("External video element passed from config - using existing one",this._config.videoElement),this._isLocalVideo=!1,e=this._config.videoElement):(this._isLocalVideo=!0,e=document.createElement("video"),t=document.createElement("div"),this._logger.debug("No external video element provided in config - created the new one",{videoElement:e,ownContainer:t}),t.style.position="relative"),this.setVideoElement(e,t),this._eventBus.publish(su.VIDEO_ELEMENT_RECREATED,{videoElement:this.getVideoElement()})}_addCanvasVideoRenderer(){this._logger.debug("Adding canvas renderer"),this._canvasVideoRenderer||(this._canvasVideoRenderer=new pl({videoElement:this.getVideoElement(),className:this._config.videoElementClassName,state:this._state,eventBus:this._eventBus}))}_destroyCanvasRenderer(){this._logger.debug("Destroying canvas renderer"),this._canvasVideoRenderer&&(this._canvasVideoRenderer.destroy(),this._canvasVideoRenderer=null)}_setVolume({volume:e}){let t=this.getVideoElement();t&&(((e,t)=>{if(!t||t<0)e.muted=!0,e.volume=0;else{let r=Math.min(t,1);isNaN(r)||(e.muted=!1,e.volume=r)}})(t,e),this._logger.verbose(`Video volume level has been set to ${e}`))}_destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}};Bu([Du],gl.prototype,"getElements",null),Bu([Du],gl.prototype,"getVideoElement",null),Bu([Du],gl.prototype,"getCanvasElement",null),Bu([Du],gl.prototype,"renderVideoInto",null),Bu([Du],gl.prototype,"setVideoElement",null),Bu([Du],gl.prototype,"applyConfigToVideoElement",null),Bu([Du],gl.prototype,"createVideoElement",null),Bu([Du],gl.prototype,"_addCanvasVideoRenderer",null),Bu([Du],gl.prototype,"_destroyCanvasRenderer",null),Bu([Du],gl.prototype,"_setVolume",null),Bu([Du],gl.prototype,"_destroy",null);let ml=class{constructor(e){this._config={},this._eventsMap={[su.PLAYING]:this._handlePlaying,[su.LOADING]:this._handleLoading,[su.VIDEO_PAUSE]:this._handlePause,[su.CAN_PLAY]:this._handleCanPlay,[su.PAUSED]:this._handlePaused,[su.RESTART]:this._handleRestart,[su.UPDATED]:this._handleUpdate,[su.STALLED]:this._handleStalled,[su.WAITING]:this._handleWaiting,[su.UPDATE_PLAYER_RESOLUTION]:this._handleUpdatePlayerResolution,[su.ERROR]:this._handleError,[su.SET_VOLUME]:this._handleSetVolume,[su.DESTROY]:this.destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - StateController"),this._logger.info("Created"),this._logger.verbose("Initial state",e.state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e}destroy(){this._logger.info("Destroy"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap}),this._state.resetState(),this._state.setState({isDestroyed:!0})}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_updateState(e){let t=this._state.getState().videoPlaybackState,r=t;e.isPlaying?r=ru.PLAYING:e.isLoading?r=ru.LOADING:e.isPaused?r=ru.PAUSED:e.isError&&(r=ru.ERROR),this._logger.debug(`State updated: ${t} -> ${r}`),this._state.setState({...e,videoPlaybackState:r}),t!==r&&this._eventBus.publish(su.VIDEO_PLAYBACK_STATE_CHANGED,{prevState:t,nextState:r})}_handlePlaying(){this._logger.debug("Playing event received"),this._updateState({isPlaying:!0,startedPlaying:!0,isLoading:!1,isStalled:!1,isWaiting:!1,isPaused:!1,isError:!1})}_handleLoading(){this._logger.debug("Loading event received"),this._updateState({isLoading:!0,isPlaying:!1})}_handlePause(){this._logger.debug("Pause event received"),this._updateState({isPlaying:!1,isPaused:!0})}_handlePaused(){this._logger.debug("Paused event received"),this._updateState({isPlaying:!1,isLoading:!1,isPaused:!0})}_handleCanPlay(){this._logger.debug("CanPlay event received"),this._updateState({canPlay:!0,isDestroyed:!1})}_handleRestart(){this._logger.debug("Restart event received"),this._updateState({isRestarted:!0})}_handleStalled(){this._logger.debug("Stalled event received"),this._updateState({isStalled:!0})}_handleWaiting(){this._logger.debug("Waiting event received"),this._updateState({isWaiting:!0})}_handleError(){this._logger.debug("Error event received"),this._updateState({isError:!0})}_handleSetVolume({volume:e}){this._logger.debug("Volume event received",{volume:e}),this._updateState({volume:e})}_handleUpdatePlayerResolution(e){this._logger.debug("Player resolution event received",{height:e.height,width:e.width}),this._updateState({videoElementResolution:{height:e.height,width:e.width}})}_handleUpdate(){this._logger.debug("Update event received"),this._updateState({canPlay:!1,isLoading:!0,isPlaying:!1,isRestarted:!1,isPaused:!1,isError:!1})}};Bu([Du],ml.prototype,"destroy",null),Bu([Du],ml.prototype,"init",null),Bu([Du],ml.prototype,"_updateState",null),Bu([Du],ml.prototype,"_handlePlaying",null),Bu([Du],ml.prototype,"_handleLoading",null),Bu([Du],ml.prototype,"_handlePause",null),Bu([Du],ml.prototype,"_handlePaused",null),Bu([Du],ml.prototype,"_handleCanPlay",null),Bu([Du],ml.prototype,"_handleRestart",null),Bu([Du],ml.prototype,"_handleStalled",null),Bu([Du],ml.prototype,"_handleWaiting",null),Bu([Du],ml.prototype,"_handleError",null),Bu([Du],ml.prototype,"_handleSetVolume",null),Bu([Du],ml.prototype,"_handleUpdatePlayerResolution",null),Bu([Du],ml.prototype,"_handleUpdate",null);let yl=class{constructor(e){this._config={},this._eventsMap={[su.PLAYING]:this._cancelResetStream,[su.LOADING]:this._cancelResetStream,[su.LOADED]:this._cancelResetStream,[su.PAUSED]:this._cancelResetStream,[su.UPDATED]:this._cancelResetStream,[su.CANCEL_RESET_STREAM]:this._cancelResetStream,[su.STREAM_RESET]:this._resetStream,[su.UPDATE_MEDIA_STREAM]:this.updateMediaStream,[su.DESTROY]:this.destroy},this._getIsSrcObjectAvailable=()=>void 0!==this._props.getVideoElement()?.srcObject,this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - StreamController"),this._props=e,this._logger.info("Created"),this._logger.verbose("Initial state",e.state),this.init()}setConfig(e){this._logger.debug("Config update received, the new one:",e),this._config=e}updateMediaStream(e){this._logger.info("Updating media stream",{stream:e}),this._props.getVideoElement()?(this._attachStream(e),this._eventBus.publish(su.VIDEO_START,{})):this._logger.debug("No video element known. Skipping media stream update")}removeMediaStream(){this._logger.info("Removing media stream");let e=this._props.getVideoElement();e?(this._eventBus.publish(su.VIDEO_PAUSE,{}),this._eventBus.publish(su.REMOVE_MEDIA_STREAM,{}),this._getIsSrcObjectAvailable()?(this._logger.debug("Setting srcObject to null"),e.srcObject=null):(this._logger.debug("Revoking object url",{url:e.src}),window.URL.revokeObjectURL(e.src)),e.src&&(this._logger.debug("Removing src attribute from video"),e.removeAttribute("src"))):this._logger.debug("No video element known. Skipping media stream remove")}destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}_attachStream(e){this._logger.info("Attaching media stream",{stream:e});let t=this._props.getVideoElement();t&&e?t.src!==e?"string"==typeof e?(this._logger.debug("Setting video element src attribute"),t.src=e):this._getIsSrcObjectAvailable()?(this._logger.debug("Setting video element srcObject attribute"),t.srcObject=e):(t.src=window.URL.createObjectURL(e),this._logger.debug(`Got MediaStream as stream, but srcObject is not available. Created new object URL: ${t.src}`)):this._logger.debug("Current video element src attribute value is equal to the new stream. Skipping stream set"):this._logger.debug("No video element or stream defined. Skipping stream set")}_cancelResetStream(){this._logger.debug("Stream reset action cancel required"),this._streamResetDelayId&&(clearTimeout(this._streamResetDelayId),this._logger.debug("Stream reset action cancelled"))}_resetStream({timeout:e}){this._logger.debug("Reset stream required"),e?(this._cancelResetStream(),this._streamResetDelayId=setTimeout((()=>{this._logger.debug("Resetting stream timeout fired");let e=!1;this._config.onResetStream&&(e=this._config.onResetStream());let t=this._state.getState().stream;if(t&&!e){if("string"==typeof t&&t.startsWith("blob"))return void this._logger.debug("Streams seems to be object url. Skipping reset");this._logger.debug("Resetting stream"),this.removeMediaStream(),this.updateMediaStream(t)}}),e)):this._logger.verbose("No timeout set, skipping stream reset",{timeout:e})}};Bu([Du],yl.prototype,"updateMediaStream",null),Bu([Du],yl.prototype,"removeMediaStream",null),Bu([Du],yl.prototype,"destroy",null),Bu([Du],yl.prototype,"init",null),Bu([Du],yl.prototype,"_attachStream",null),Bu([Du],yl.prototype,"_cancelResetStream",null),Bu([Du],yl.prototype,"_resetStream",null);var _l=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},vl="object"==typeof du&&du&&du.Object===Object&&du,bl="object"==typeof self&&self&&self.Object===Object&&self,Sl=vl||bl||Function("return this")(),El=function(){return Sl.Date.now()},wl=/\s/,Tl=/^\s+/,Ll=Sl.Symbol,Ol=Object.prototype,Ml=Ol.hasOwnProperty,Al=Ol.toString,Pl=Ll?Ll.toStringTag:void 0,Rl=Object.prototype.toString,Il=Ll?Ll.toStringTag:void 0,jl=/^[-+]0x[0-9a-f]+$/i,Dl=/^0b[01]+$/i,Nl=/^0o[0-7]+$/i,Cl=parseInt,xl=function(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||null!=t&&"object"==typeof t&&"[object Symbol]"==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Il&&Il in Object(e)?function(e){var t=Ml.call(e,Pl),r=e[Pl];try{e[Pl]=void 0;var n=!0}catch(e){}var i=Al.call(e);return n&&(t?e[Pl]=r:delete e[Pl]),i}(e):Rl.call(e)}(t))return NaN;var t;if(_l(e)){var r,n="function"==typeof e.valueOf?e.valueOf():e;e=_l(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=(r=e)?r.slice(0,function(e){for(var t=e.length;t--&&wl.test(e.charAt(t)););return t}(r)+1).replace(Tl,""):r;var i=Dl.test(e);return i||Nl.test(e)?Cl(e.slice(2),i?2:8):jl.test(e)?NaN:+e},kl=Math.max,Bl=Math.min,Fl=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw TypeError("Expected a function");return _l(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),function(e,t,r){var n,i,o,s,a,u,l=0,c=!1,f=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function h(t){var r=n,o=i;return n=i=void 0,l=t,s=e.apply(o,r)}function p(e){var r=e-u;return void 0===u||r>=t||r<0||f&&e-l>=o}function g(){var e,r=El();if(p(r))return m(r);a=setTimeout(g,(e=t-(r-u),f?Bl(e,o-(r-l)):e))}function m(e){return a=void 0,d&&n?h(e):(n=i=void 0,s)}function y(){var e,r=El(),o=p(r);if(n=arguments,i=this,u=r,o){if(void 0===a)return l=e=u,a=setTimeout(g,t),c?h(e):s;if(f)return clearTimeout(a),a=setTimeout(g,t),h(u)}return void 0===a&&(a=setTimeout(g,t)),s}return t=xl(t)||0,_l(r)&&(c=!!r.leading,o=(f="maxWait"in r)?kl(xl(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=u=i=a=void 0},y.flush=function(){return void 0===a?s:m(El())},y}(e,t,{leading:n,maxWait:t,trailing:i})};let Ul="ristrettoWasRestarted",zl=0,Vl=0,ql=class{constructor(e){this._shouldSetNextUpdateVideoDurationId=!0,this._config={},this._onNativeTimeUpdateHandlerThrottled=Fl(this._onNativeTimeUpdateHandler,2e3,{trailing:!1}),this._eventsMap={[su.TIME_UPDATE_NATIVE]:this._onNativeTimeUpdateHandlerThrottled,[su.DESTROY]:this._destroy},this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - TimeUpdateController"),this._props=e,this._logger.info("Created"),this._logger.debug("Initial state",e.state),this._logger.debug("Initial props",e)}setConfig(e){this._logger.debug("Config update received, the new one:",e);let t=e.timeoutUpdateStatusPlaying!==this._config.timeoutUpdateStatusPlaying;this._config=e,t&&(this._eventsMap[su.TIME_UPDATE_NATIVE]=Fl(this._onNativeTimeUpdateHandler,e.timeoutUpdateStatusPlaying,{trailing:!1}),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap}),this.init())}init(){this._logger.info("Initialization requested, attaching eventBus listeners"),this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}startTimeUpdate(){this._stopTimeUpdate(),this._shouldSetNextUpdateVideoDurationId&&this._config?(this._updateVideoDurationId=setTimeout(this._onTimeUpdate,this._config.timeoutUpdateVideoDuration),this._publishUpdatePlayerResolutionIfNeeded()):this._shouldSetNextUpdateVideoDurationId=!0}_onNativeTimeUpdateHandler(e){if(this._logger.debug("Native video timeUpdate caught"),e?.originalEvent?.defaultPrevented)return;let t=this._props.getVideoElement(),{canPlay:r,isPlaying:n,isLoading:i,isRestarted:o}=this._state.getState();if(this._publishUpdatePlayerResolutionIfNeeded(),!r)return void this._logger.verbose("CanPlay shared state is false. Skipping");this._eventBus.publish(su.RESET_CHECKING_AUTOPLAY_COUNT,{});let s=zl!==t?.currentTime;this._logger.verbose(`Video current time is ${s?"":"not"} changed`),s?(this._eventBus.publish(su.CANCEL_RESET_STREAM,{}),!nl||o||localStorage?.getItem(Ul)||(localStorage.setItem(Ul,"1"),this._eventBus.publish(su.RESTART,{})),t&&(zl=t.currentTime),(!n||i)&&this._eventBus.publish(su.PLAYING,{})):i?this._eventBus.publish(su.VIDEO_RESET,{}):this._eventBus.publish(su.LOADING,{})}_stopTimeUpdate(){clearTimeout(this._updateVideoDurationId)}_onTimeUpdate(){if(!this._state.getState().canPlay)return void this.startTimeUpdate();let e=this._props.getVideoElement();e&&Vl!==e.currentTime&&(Vl=e.currentTime),this.startTimeUpdate()}_publishUpdatePlayerResolutionIfNeeded(){let e=this._props.getVideoElement();if(e){let{videoWidth:t,videoHeight:r}=e,{videoElementResolution:n}=this._state.getState();(!n||n.height!==r||n.width!==t)&&this._config.minimalPossibleVideoDimension&&Math.min(r,t)>this._config.minimalPossibleVideoDimension&&(this._logger.verbose(`Stored resolution is ${n?.width}x${n?.height}, current is ${t}x${r}`),this._eventBus.publish(su.UPDATE_PLAYER_RESOLUTION,{width:t,height:r}))}}_destroy(){this._logger.info("Destroying"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap}),this._shouldSetNextUpdateVideoDurationId=!1,this._stopTimeUpdate()}};Bu([Du],ql.prototype,"init",null),Bu([Du],ql.prototype,"startTimeUpdate",null),Bu([Du],ql.prototype,"_onNativeTimeUpdateHandler",null),Bu([Du],ql.prototype,"_stopTimeUpdate",null),Bu([Du],ql.prototype,"_onTimeUpdate",null),Bu([Du],ql.prototype,"_publishUpdatePlayerResolutionIfNeeded",null),Bu([Du],ql.prototype,"_destroy",null);let $l=class{constructor(e){this._config={},this._timeUpdateEventWasLogged=!1,this._eventsMap={[su.VIDEO_ELEMENT_RECREATED]:this._handleVideoElementRecreated,[su.DESTROY]:this._handleDestroy},this._onVideoClick=e=>{this._logger.verbose('"click" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(su.CLICK,{originalEvent:e})},this._onSeeked=e=>{this._logger.verbose('"seeked" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(su.FORCE_PLAY_AFTER_PAUSE,{reason:"seeked video native event"})},this._onRateChange=e=>{this._logger.verbose('"ratechange" video native event fired'),this._handleNativeEvent(e),e.target&&!e.target.playbackRate&&this._eventBus.publish(su.FORCE_PLAY_AFTER_PAUSE,{reason:"video playbackRate is 0"})},this._onCanPlayThrough=e=>{this._logger.verbose('"canplaythrough" video native event fired');let t=this._state.getState();this._handleNativeEvent(e),(t.isStalled||t.isWaiting)&&this._eventBus.publish(su.FORCE_PLAY_AFTER_PAUSE,{reason:"canplaythrough video native event fired, and video is in the state of either stalled or waiting"})},this._onPlayingHandler=e=>{this._logger.verbose('"playing" video native event fired'),this._logger.info("Video has started playing"),this._handleNativeEvent(e),this._eventBus.publish(su.PLAYING,{isAutoplay:!this._state.getState().isAutoplayError})},this._onAbortHandler=e=>{this._logger.verbose('"abort" video native event fired'),this._handleNativeEvent(e),e.defaultPrevented||this._eventBus.publish(su.LOADING,{})},this._onPauseHandler=e=>{this._logger.verbose('"pause" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(su.VIDEO_PAUSE,{}),this._eventBus.publish(su.FORCE_PLAY_AFTER_PAUSE,{reason:"pause video event fired (most likely user paused the video manually)"})},this._onCanPlayHandler=e=>{this._logger.verbose('"canplay" video native event fired'),this._handleNativeEvent(e),e.defaultPrevented||(this._state.setState({canPlay:!0}),this._eventBus.publish(su.CAN_PLAY,{}))},this._onErrorHandler=e=>{if(this._logger.error('"error" video native event fired',{error:e}),this._handleNativeEvent(e),this._eventBus.publish(su.ERROR,{originalEvent:e}),!e.defaultPrevented){let{MEDIA_ERR_SRC_NOT_SUPPORTED:e}=MediaError,t=this._props.getVideoElement()?.error,r=t?.code;r!==e&&(this._logger.verbose("Video element error is not of MEDIA_ERR_SRC_NOT_SUPPORTED kind. Requesting reset"),this._eventBus.publish(su.VIDEO_RESET,{}))}},this._onTimeUpdateHandler=e=>{this._handleNativeEvent(e),this._timeUpdateEventWasLogged||(this._logger.verbose('"timeupdate" video native event fired for the first time'),this._timeUpdateEventWasLogged=!0),this._eventBus.publishSync(su.TIME_UPDATE_NATIVE,{originalEvent:e})},this._onLoadStartHandler=e=>{this._handleNativeEvent(e),this._logger.verbose('"loadstart" video native event fired');let{timeoutUpdateStream:t}=this._config;this._eventBus.publish(su.LOADING,{}),this._eventBus.publish(su.STREAM_RESET,{reason:"onLoadStartHandler",timeout:t})},this._onLoadedDataHandler=e=>{this._logger.verbose('"loadeddata" video native event fired'),this._handleNativeEvent(e),this._eventBus.publish(su.LOADED,{})},this._onWaiting=e=>{this._logger.verbose('"waiting" video native event fired');let{timeoutWaitingStream:t}=this._config;this._handleNativeEvent(e),this._eventBus.publish(su.WAITING,{}),this._eventBus.publish(su.LOADING,{}),this._eventBus.publish(su.STREAM_RESET,{reason:"onWaiting",timeout:t})},this._onStalled=e=>{this._logger.verbose('"stalled" video native event fired');let{timeoutWaitingStream:t}=this._config;this._handleNativeEvent(e),this._eventBus.publish(su.STALLED,{}),this._eventBus.publish(su.STREAM_RESET,{reason:"onStalled",timeout:t})},this._onEndFullscreenHandler=e=>{this._handleNativeEvent(e)},this._props=e,this._state=e.state,this._eventBus=e.eventBus,this._logger=Uu(this._eventBus,"VideoElementController - VideoEventsHandler"),this.init()}setConfig(e){this._config=e}init(){this._eventBus.toggleSubscriptionBulk({action:"subscribe",callbacks:this._eventsMap})}toggleEvents(e){let t=this._props.getVideoElement();if(!t)return;let r="attach"===e?"addEventListener":"removeEventListener";t[r]("click",this._onVideoClick),t[r]("playing",this._onPlayingHandler),t[r]("abort",this._onAbortHandler),t[r]("pause",this._onPauseHandler),t[r]("canplay",this._onCanPlayHandler),t[r]("error",this._onErrorHandler),t[r]("timeupdate",this._onTimeUpdateHandler),t[r]("loadstart",this._onLoadStartHandler),t[r]("loadeddata",this._onLoadedDataHandler),t[r]("waiting",this._onWaiting),t[r]("stalled",this._onStalled),t[r]("canplaythrough",this._onCanPlayThrough),t[r]("seeked",this._onSeeked),t[r]("ratechange",this._onRateChange),t[r]("webkitendfullscreen",this._onEndFullscreenHandler),"addEventListener"===r?this._logger.verbose("event listeners are ATTACHED to the video element"):this._logger.verbose("event listeners are DETACHED from the video element")}_handleVideoElementRecreated(){this.toggleEvents("attach")}_handleDestroy(){this.toggleEvents("detach"),this._eventBus.toggleSubscriptionBulk({action:"unsubscribe",callbacks:this._eventsMap})}_handleNativeEvent(e){this._eventBus.publishSync(su.NATIVE_EVENT,{eventName:e.type,event:e})}};Bu([Du],$l.prototype,"init",null),Bu([Du],$l.prototype,"_handleVideoElementRecreated",null),Bu([Du],$l.prototype,"_handleDestroy",null);let Gl={canPlay:!1,isLoading:!0,isError:!1,isAutoplayError:!1,isPaused:!1,isPlaying:!1,isRestarted:!1,isStalled:!1,isWaiting:!1,isDestroyed:!1,videoPlaybackState:ru.IDLE,startedPlaying:!1},Wl=class{constructor(e){this._initState={...e},this._state={...e}}setState(e,t){Object.assign(this._state,e),t&&t(this._state)}getState(){return this._state}resetState(){this.setState(this._initState)}},Yl=class{constructor(){this._config={...Gu.videoElementControllerConfig},this.attachVideoElementEvents=()=>{this._logger.debug("Attach event listeners"),this._eventsHandler.toggleEvents("attach"),this._timeUpdateController.startTimeUpdate()},this.detachVideoElementEvents=()=>{this._logger.debug("Detach event listeners"),this._eventsHandler.toggleEvents("detach")},this._updated=()=>{this._eventBus.publish(su.UPDATED,{})},this._eventBus=new Eu,this._loggerTransport=new $u(this._eventBus),this._logger=Uu(this._eventBus,"VideoController"),this._logger.info("Created"),this._logger.debug("Initial config",this._config),this._createControllers()}addEventListener(e,t){this._logger.verbose(`Attaching ${e} event listener`),this._customEventsEmitter.addEventListener(e,t)}removeEventListener(e,t){this._logger.verbose(`Detaching ${e} event listener`),this._customEventsEmitter.removeEventListener(e,t)}getIsPlaying(){return this._state.getState().isPlaying}getVideoElement(){return this._state.getState().videoElement}getCanvasElement(){return this._state.getState().canvasElement}updateConfig(e){this._config={...this._config,...e},this._logger.debug("Config update received, the new one: ",this._config),e.isRemote&&this.attachVideoElementEvents(),this._syncConfig()}setVideoElement(e){this._logger.info("Video element set",e),this._renderController.setVideoElement(e),this.attachVideoElementEvents()}createVideoElement(){return this._logger.info("Creating video element"),this._renderController.createVideoElement(),this.getVideoElement()}setStream(e){if(this._logger.info("Setting media stream"),this._state.getState().stream!==e)return e?this._streamController.updateMediaStream(e):this._streamController.removeMediaStream(),this._updated(),this._state.setState({stream:e}),this;this._logger.verbose("Previous stream is equal to the new one. Skipping.")}renderVideoInto(e){this._logger.info("Rendering video element into container",e),this._renderController.renderVideoInto(e)}setVolume(e){this._logger.info("Setting volume of the video element",{volume:e}),this._eventBus.publish(su.SET_VOLUME,{volume:e})}getState(){return this._state.getState()}destroy(){this._logger.info("Destroying"),this._config={...Gu.videoElementControllerConfig},this.detachVideoElementEvents(),this._streamController.removeMediaStream(),this._renderController.destroy(),this._eventBus.publishSync(su.DESTROY,{}),this._logger.info("VideoElementController was destroyed"),this._loggerTransport?.destroy()}reinit(){this._logger.info("Reinit requested"),[this._autoplayController,this._customEventsEmitter,this._playbackController,this._streamController,this._stateController,this._timeUpdateController,this._renderController,this._eventsHandler].forEach((e=>{e&&e.init()})),this.attachVideoElementEvents(),this._logger.info("VideoElementController was reinited")}setLoggerLevels(e,t=[],r=[]){this._logger.info("Setting new log level",{levels:e}),this._loggerTransport&&(this._loggerTransport.destroy(),this._loggerTransport=null),e.length&&(this._loggerTransport=new $u(this._eventBus,e,t,r))}_syncConfig(){this._logger.verbose("Sycronizing configs across all controllers"),this._autoplayController?.setConfig(this._config),this._eventsHandler.setConfig(this._config),this._streamController.setConfig(this._config),this._timeUpdateController.setConfig(this._config),this._renderController.setConfig(this._config),this._stateController.setConfig(this._config)}_createControllers(){this._logger.verbose("Creating all controllers"),this._state=new Wl(Gl);let e={getVideoElement:this.getVideoElement,state:this._state,eventBus:this._eventBus};this._autoplayController=new Xu(e),this._customEventsEmitter=new Zu(e),this._eventsHandler=new $l(e),this._playbackController=new fl(e),this._streamController=new yl(e),this._stateController=new ml(e),this._timeUpdateController=new ql(e),this._renderController=new gl(e),this._logger.verbose("Controllers created")}};var Hl;Bu([Du],Yl.prototype,"addEventListener",null),Bu([Du],Yl.prototype,"removeEventListener",null),Bu([Du],Yl.prototype,"getIsPlaying",null),Bu([Du],Yl.prototype,"getVideoElement",null),Bu([Du],Yl.prototype,"getCanvasElement",null),(Hl=au||(au={}))[Hl.FATAL=0]="FATAL",Hl[Hl.ERROR=1]="ERROR",Hl[Hl.WARN=2]="WARN",Hl[Hl.INFO=3]="INFO",Hl[Hl.DEBUG=4]="DEBUG",Hl[Hl.VERBOSE=5]="VERBOSE",au.FATAL,au.ERROR,au.WARN,au.INFO,au.DEBUG,au.VERBOSE;au.FATAL,au.WARN,au.ERROR,au.INFO,au.DEBUG,au.VERBOSE;var Ql;(Ql=uu||(uu={}))[Ql.MEDIA_DEVICES_UPDATED=0]="MEDIA_DEVICES_UPDATED";var Kl;(Kl=lu||(lu={})).VIDEO_INPUT="videoinput",Kl.AUDIO_INPUT="audioinput",Kl.AUDIO_OUTPUT="audiooutput";let Xl=(e,t)=>e.filter((e=>e.kind===t));var Jl;(Jl=cu||(cu={})).SYSTEM_PERMISSION_DENIED="SystemPermissionDenied",Jl.USER_PERMISSION_DENIED="UserPermissionDenied",Jl.COULD_NOT_START_VIDEO_SOURCE="CouldNotStartVideoSource",Jl.GENERIC="Generic";let Zl=async e=>new Promise(((t,r)=>{navigator.mediaDevices.getUserMedia(e??{audio:!0,video:!0}).then((e=>{e.getTracks().forEach((e=>{e.stop()})),t(!0)})).catch((e=>{let t=e.name,n=e.message,i=cu.GENERIC;sl?"NotAllowedError"===t?"Permission denied by system"===n?i=cu.SYSTEM_PERMISSION_DENIED:"Permission denied"===n&&(i=cu.USER_PERMISSION_DENIED):"NotReadableError"===t&&(i=cu.COULD_NOT_START_VIDEO_SOURCE):ol?"NotAllowedError"===t&&(i=cu.USER_PERMISSION_DENIED):al?"NotAllowedError"===t?i=cu.USER_PERMISSION_DENIED:"NotReadableError"===t&&(i=cu.COULD_NOT_START_VIDEO_SOURCE):il&&("NotFoundError"===t||"NotReadableError"===t?i=cu.SYSTEM_PERMISSION_DENIED:"NotAllowedError"===t?i=cu.USER_PERMISSION_DENIED:"AbortError"===t&&(i=cu.COULD_NOT_START_VIDEO_SOURCE)),r({type:i,name:e.name,message:e.message})}))}));var ec;(ec=fu||(fu={})).LIVE="live",ec.ENDED="ended";let tc=e=>{if(!e)return!0;let{muted:t,enabled:r,readyState:n}=e;return t||!r||n===fu.ENDED};Bu([Du],class extends Ju{constructor(){super(),this._currentMediaStream=null,this._mediaCheckCache=null,this._mediaDevices=null,this._eventBus=new Eu,this._logger=Uu(this._eventBus,"UserMedia"),this._loggerTransport=new $u(this._eventBus),this._logger.info("Created"),navigator.mediaDevices.addEventListener("devicechange",this._onDevicesChanged)}destroy(){navigator.mediaDevices.removeEventListener("devicechange",this._onDevicesChanged),this._logger.info("Destroyed"),this._stopCurrentStream()}async requestPermissions(){if(this._logger.info("Requesting permissions"),this._mediaCheckCache)return this._logger.debug("Has previous check results cached. Returning it"),this._logger.info("Check results",{...this._mediaCheckCache}),this._mediaCheckCache;try{return this._logger.verbose("Request both video and audio permissions"),await Zl({video:!0,audio:!0}),this._logger.debug("No exceptions thrown while checking permissions. Saving both as available in cache"),this._mediaCheckCache={video:{isAvailable:!0,error:null},audio:{isAvailable:!0,error:null}},this._logger.info("Check results",{...this._mediaCheckCache}),this._mediaCheckCache}catch(tv){this._logger.debug("Got an exception while checking both audio and video permissions. Checking them individually",{exception:tv.toString()});let t={video:{isAvailable:!1,error:null},audio:{isAvailable:!1,error:null}};return t.video=await this._checkKindPermissions({video:!0,audio:!1}),this._logger.verbose(`Video permissions result: ${t.video.isAvailable}`),t.audio=await this._checkKindPermissions({video:!1,audio:!0}),this._logger.verbose(`Audio permissions result: ${t.audio.isAvailable}`),this._mediaCheckCache=t,this._logger.debug("Got individual check results",{...t}),this._logger.info("Check results",{...this._mediaCheckCache}),this._mediaCheckCache}}async getVideoDevices(){this._logger.info("Getting video devices list");let e=await this._getMediaDevices();return this._logger.info("Got video devices",e),e.videoInputs}async getAudioInputDevices(){this._logger.info("Getting audio input devices list");let e=await this._getMediaDevices();return this._logger.info("Got audio input devices",e),e.audioInputs}async getAudioOutputDevices(){this._logger.info("Getting audio output devices list");let e=await this._getMediaDevices();return this._logger.info("Got audio output devices",e),e.audioOutputs}async getMediaStream(e,t){this._logger.info("Getting media stream",{constraints:e,defaults:t});let r={};if(e.audio&&(this._logger.debug("Audio constraints are specified in requested constraints. Mapping it"),r.audio=(e=>!!e&&("boolean"==typeof e?e:!!e.deviceId&&{deviceId:ol?e.deviceId:{exact:e.deviceId},channelCount:2}))(e.audio),this._logger.debug("Audio constraints mapped",{constraints:r.audio})),e.video&&(this._logger.debug("Video constraints are specified in requested constraints. Mapping it"),r.video=((e,t)=>{if(!e)return!1;if("boolean"==typeof e)return!0;let r=e.width&&e.height?Number(e.width)/Number(e.height):t.baseAspectRatio,n={};return e.frameRate&&(n.frameRate={ideal:e.frameRate,min:15}),e.facingMode&&navigator.mediaDevices.getSupportedConstraints().facingMode&&(n.facingMode={exact:e.facingMode}),e.width&&(n.width={ideal:e.width}),e.height&&(n.height={ideal:e.height}),e.width&&e.height&&r&&(n.aspectRatio=r),e.deviceId&&(n.deviceId=ol?e.deviceId:{exact:e.deviceId}),e.width&&e.height&&!n.facingMode&&(n.advanced=[{width:{min:e.width-t.sizeThreshold,max:e.width+t.sizeThreshold},height:{min:e.height-t.sizeThreshold,max:e.height+t.sizeThreshold}},{aspectRatio:r}]),0!==Object.keys(n).length&&n})(e.video,t),this._logger.debug("Video constraints mapped",{constraints:r.video})),this._logger.info("Final constraints for media stream",{mappedConstraints:r}),!this._currentMediaStream){this._logger.debug("No current media stream known. Creating new stream");let e=await this._createNewStream(r);return this._logger.info("Media stream is ready",{mediaStream:e}),e}let n=!(!(i=this._currentMediaStream.stream).active||i.getTracks().every(tc));var i;if(n&&await this._isCurrentStreamSatisfiesConstraints(r))return this._logger.debug("Current stream is active and satisfies constraints. Returning cached one"),this._logger.info("Media stream is ready",{mediaStream:this._currentMediaStream.stream}),this._currentMediaStream.stream;this._logger.debug(`Current stream ${n?"does not satisfies constraints":"is inactive"}. Creating new stream`),await this._stopCurrentStream();let o=await this._createNewStream(r);return this._logger.info("Media stream is ready",{mediaStream:o}),o}async _stopCurrentStream(){var e;this._logger.debug("Stopping current media stream"),this._currentMediaStream?(await(e=this._currentMediaStream.stream,void(e&&(e.getTracks().forEach((t=>{t.stop(),e.removeTrack(t)})),e.stop&&e.stop()))),this._currentMediaStream=null):this._logger.verbose("No current stream known. Skipping")}async _checkKindPermissions(e){this._logger.debug("Checking kind permissions",{constraints:e});let t={isAvailable:!1,error:null};try{this._logger.verbose("Requesting media permissions for constraints",{constraints:e}),t.isAvailable=await Zl(e),this._logger.verbose("Successfully got permissions for constraints",{constraints:e})}catch(za){this._logger.verbose("Could not get permissions for constraints",{constraints:e,error:za}),t.isAvailable=!1,t.error=za}return this._logger.debug("Final result of permissions check",{constraints:e,checkResults:t}),t}async _getMediaStream(e){this._logger.debug("Getting media stream with constraints",{constraints:e});let t=(()=>{let e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices)||navigator.getUserMedia&&Ru(navigator.getUserMedia.bind(navigator))||navigator.webkitGetUserMedia&&Ru(navigator.webkitGetUserMedia.bind(navigator))||navigator.mozGetUserMedia&&Ru(navigator.mozGetUserMedia.bind(navigator));return t=>e.call(navigator,t)})(),r=await t(e);return this._currentMediaStream={constraints:e,stream:r},this._logger.debug("Resulting media stream",{mediaStream:this._currentMediaStream.stream}),this._currentMediaStream.stream}async _createNewStream(e){this._logger.debug("Creating new media stream with constraints",{constraints:e});try{return await this._getMediaStream(e)}catch(Ua){if(this._logger.warn("Got an error while creating new media stream",{error:Ua,constraints:e}),"OverconstrainedError"===Ua.name&&"deviceId"===Ua.constraint){this._logger.verbose("Trying to get stream with no audio deviceId specified");let t={...e,audio:!0};return await this._getMediaStream(t)}throw Ua}}async _getMediaDevices(){return this._logger.verbose("Getting media devices"),this._mediaDevices?(this._logger.verbose("Has media devices in cache, returning them",{devices:this._mediaDevices}),this._mediaDevices):(this._mediaDevices=await(async()=>{let e=await navigator.mediaDevices.enumerateDevices();return{audioInputs:Xl(e,lu.AUDIO_INPUT),audioOutputs:Xl(e,lu.AUDIO_OUTPUT),videoInputs:Xl(e,lu.VIDEO_INPUT)}})(),this._mediaDevices)}async _isCurrentStreamSatisfiesConstraints(e){if(this._logger.debug("Checking if current media stream satisfies constraints",{constraints:e,mediaStream:this._currentMediaStream}),!this._currentMediaStream)return this._logger.verbose("No current media stream available"),!1;try{if(e.video){this._logger.verbose("Checking video track constraints");let t=this._currentMediaStream.stream.getVideoTracks()[0];if(!t&&e.video)return this._logger.verbose("No video track in media stream and constraints has video"),!1;if(t&&!e.video)return this._logger.verbose("There is video track in media stream and constraints has no video"),!1;if("object"==typeof e.video&&e.video.deviceId&&t.getCapabilities().deviceId!==e.video.deviceId)return this._logger.verbose("Constraints has video device ID and it not matches current device id"),!1;t&&"boolean"!=typeof e.video&&(this._logger.verbose("Trying to apply new constraints for video"),await t.applyConstraints(e.video))}}catch(e){return this._logger.debug("Could not apply constraints or get capabilities of video track",{error:e}),!1}try{if(e.audio){this._logger.verbose("Checking audio track constraints");let t=this._currentMediaStream.stream.getAudioTracks()[0];if(!t&&e.audio)return this._logger.verbose("No audio track in media stream and constraints has audio"),!1;if(t&&!e.audio)return this._logger.verbose("There is audio track in media stream and constraints has no audio"),!1;if("object"==typeof e.audio&&e.audio.deviceId&&t.getCapabilities().deviceId!==e.audio.deviceId)return this._logger.verbose("Constraints has audio device ID and it not matches current device id"),!1;t&&"boolean"!=typeof e.audio&&(this._logger.verbose("Trying to apply new constraints for audio"),await t.applyConstraints(e.audio))}}catch(e){return this._logger.debug("Could not apply constraints or get capabilities of audio track",{error:e}),!1}return!0}async _onDevicesChanged(){this._logger.debug("Media devices has changed"),this._mediaDevices=null;let e=await this._getMediaDevices();this._mediaDevices=e,this.emitEvent(uu.MEDIA_DEVICES_UPDATED,e)}}.prototype,"_onDevicesChanged",null);let rc,nc=e=>{if(!e)return{};try{let t=new URL(e).pathname.split("/"),r=t[2],n=t[t.length-1];return{streamId:r,resolution:n.match(/\d+_(\w+)/)?.[1]||"source",isMaster:"master"===t[3]}}catch(e){return{}}};var ic;(ic=rc||(rc={})).THROUGHPUT_ESTIMATOR="throughputEstimator",ic.DROPPED_FRAMES_ESTIMATOR="droppedFramesEstimator",ic.SWITCH_HISTORY="switchHistory",ic.INSUFFICIENT_BUFFER="insufficientBuffer",ic.MINIMAL_BUFFER_TO_INCREASE="minimalBufferToIncrease",ic.DELTA_BUFFER="deltaBuffer",ic.MAX_RESOLUTION_ESTIMATOR="maxResolution";const oc={enabledABRRules:[rc.THROUGHPUT_ESTIMATOR,rc.SWITCH_HISTORY,rc.MINIMAL_BUFFER_TO_INCREASE,rc.INSUFFICIENT_BUFFER,rc.MAX_RESOLUTION_ESTIMATOR],cooldownPeriod:1e4,minimalBufferAmountToSwitchUp:500};rc.DROPPED_FRAMES_ESTIMATOR,rc.THROUGHPUT_ESTIMATOR,rc.SWITCH_HISTORY,rc.MINIMAL_BUFFER_TO_INCREASE,rc.INSUFFICIENT_BUFFER,rc.DELTA_BUFFER,rc.MAX_RESOLUTION_ESTIMATOR;let sc;var ac;Ga("8NFq9"),Wa=Ga("a8VW4"),(ac=sc||(sc={})).WAIT_FOR_PREFETCH_SEGMENT="waitForSegment",ac.WAIT_FOR_PLAYLIST="waitForPlaylist";const uc={playlistLoader:{playlistLoadingTimeout:2500,forceStaticPlaylistLoadingTimeout:!1,lowLatencyMode:!0,equalPlaylistsAmountToDecline:10,blockingMode:sc.WAIT_FOR_PLAYLIST,maxVODPlaylistLoadingRetries:3,maxVODFragmentLoadingRetries:3,baseVODPlaylistRetryTimeout:500,baseVODFragmentRetryTimeout:5e3,VODLoadNextSegmentThreshold:5e3,disableTimeoutsInVOD:!0,retryLowLatencyPlaylistTimeout:1e3,targetBufferMultiplier:1,disableRotateTimeoutIncrease:!0,shouldLogFragmentsHistory:!1,workerMode:!0,partHoldBack:void 0,additionalStartParts:2,sendCustomRefererHeader:!1},fragmentLoader:{fragmentLoadingTimeout:2500,workerMode:!0},resolutionsManager:{autoloadLowestResolution:!0,initialResolutionWidth:0,initialResolutionHeight:720,initialResolutionBitrate:0,initialResolutionBitrateThreshold:1e5,maxPlaylistTimeDifference:4e4,awaitForSegmentEndToSwitch:!0,awaitForSegmentEndToSwitchManual:!1,recreateSourceBufferOnResolutionChange:!1,useFallbackResolutionIfResolutionNotFound:!0},bufferController:{checkMetricsInterval:150,bufferStallThreshold:.2,maxBackBufferAmount:1e4,bufferEdgeThreshold:.3,endOfRangeThreshold:.4,nudgePlaybackAmount:.1,numberOfCandidatesToDetectGap:2,numberOfFragmentToKeep:2,recreateSourceBufferOnResolutionChange:!1,saveLastSegmentsCount:3,sourceBufferStuckTimeout:1e3},throughputHistory:{ewmaFastAlpha:.9,ewmaSlowAlpha:.2,ignorePlaylistsMetrics:!0},abr:oc,switchHistory:{banResolutionDuration:7e3},throughputEstimator:{optimalResolutionLowerBound:.65,optimalResolutionUpperBound:.88,amountOfFragmentToBecomeConfident:10},droppedFramesEstimator:{resetHistoryTimeout:3e5,optimalDroppedFramesFraction:.1,minimalFramesPlayed:200},fragmentParser:{workerMode:!1},debugger:{enableRemoteDebugging:!1,debuggerUrl:"wss://doppio-player-debug.stripcdn.com",maxWSConnectionRetries:3,modulesStateGatheringPeriod:1e3,enableLifecycleEvents:!0},insufficientBufferEstimator:{minimalBufferAmount:.1,ignoreMetricsBeforeBufferExceedsMinimal:!0,switchToMinimalResolution:!1},minimalBufferToIncreaseEstimator:{minimalBufferAmount:500},deltaBufferEstimator:{bufferDeltaFractionToDetectFall:.1,numberOfFallsToDetect:2},playbackStateController:{autoPlay:!1,syncToLiveEdge:!1,syncToLiveDelta:1,playingTimeFractionCollectionWindow:1e5,stallDurationToDisableTargetBufferDecrease:1e4},targetBufferIncreaser:{bufferAmountToIncrease:200,bufferAmountThreshold:300},targetBufferDecreaser:{periodOfEventsToCancelDecrease:1e4},originalTargetBufferDecreaser:{periodOfEventsToCancelDecrease:1e4,allowTargetBufferDecrease:!1,targetBufferDecreaseTimeout:1e4,maxTargetBufferMultiplier:4},playbackSpeedActuator:{maxPlaybackRate:1.05,minPlaybackRate:.9},playbackSpeedWatcher:{maxLiveSyncThreshold:.4,minLiveSyncThreshold:.3,maxTargetBufferMultiplier:3,targetBufferInitialMultiplier:1,targetBufferDecreaseCoefficient:.25},bufferStallsDetector:{bufferAmountToDetectStall:.1},fragmentsFilter:{reportInconsistentTracks:!0,filterOutInconsistentTracks:!1},fragmentBuffer:{numberOfFragmentsToKeepInBuffer:3,baseChunksSaverUrl:"chunks.doppiostreams.com",saveProbability:.05}},lc=(sc.WAIT_FOR_PLAYLIST,sc.WAIT_FOR_PREFETCH_SEGMENT,["error","fatal"]),{ConfigConsumer:cc,setConfig:fc}=ju(uc);class dc extends cc{}let hc;var pc;(pc=hc||(hc={})).OK="ok",pc.ERROR="error";const gc={playlistType:{multivariantDetected:"basePlaylistRotator.playlistType.multivariantDetected",simpleDetected:"basePlaylistRotator.playlistType.simpleDetected",llDetected:"basePlaylistRotator.playlistType.llDetected",vodDetected:"basePlaylistRotator.playlistType.vodDetected"},playlists:{playlistRequested:"basePlaylistRotator.playlists.playlistRequested",playlistLoaded:"basePlaylistRotator.playlists.playlistLoaded",playlistLoadingError:"basePlaylistRotator.playlists.playlistLoadingError",playlistParsed:"basePlaylistRotator.playlists.playlistLoadingError",playlistInfo:"basePlaylistRotator.playlists.playlistInfo",vodFragmentsInfo:"basePlaylistRotator.playlists.VODFragmentsInfo",independenceTypeUpdate:"basePlaylistRotator.playlists.independenceTypeUpdate",renditionReportsUpdated:"basePlaylistRotator.playlists.renditionReportsUpdated",lastPlaylistOfSegmentLoaded:"basePlaylistRotator.playlists.lastPlaylistOfSegmentLoaded"},fragments:{fragmentsDetected:"basePlaylistRotator.fragments.fragmentsDetected",requestReleaseFromCache:"basePlaylistRotator.fragments.requestReleaseFromCache",periodFragmentsFound:"basePlaylistRotator.fragments.periodFragmentsFound"}};var mc=Ga("eQOGK");class yc extends dc{status="Idle";state=hc.OK;additionalInfo={};groups=["abr"];_numberOfFalls=0;_lastKnownBufferAmount=0;_currentBufferAmount=0;constructor(e){super("deltaBufferEstimator",e),this._onPlaylistParsedListener=this._eventBus.subscribe(gc.playlists.playlistInfo,this._onPlaylistParsed)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPlaylistParsedListener),this.reset()}reset(){this._numberOfFalls=0}getNextEstimatedResolution(e,t,r){return this._currentBufferAmount=r.bufferAmount,!t||this._numberOfFalls<this.config.numberOfFallsToDetect?null:e[Math.max(0,e.findIndex((({name:e})=>e===t.name))-1)]}_handleConfigUpdated(){this._numberOfFalls=0}_onPlaylistParsed(){const{_currentBufferAmount:e,_lastKnownBufferAmount:t}=this;this._lastKnownBufferAmount=e,e>t&&(this._numberOfFalls=0);const r=t/e;r>1+this.config.bufferDeltaFractionToDetectFall&&this._numberOfFalls++,this.additionalInfo={numberOfFalls:this._numberOfFalls,bufferDelta:r}}}(0,Wa.__decorate)([mc.default],yc.prototype,"_onPlaylistParsed",null),Ga("8NFq9"),Wa=Ga("a8VW4"),Ga("8NFq9"),Wa=Ga("a8VW4");const _c="buffer.requestResetWithOverplay",vc="buffer.metricsAvaialable",bc="buffer.playbackStallChanged",Sc="buffer.requestSourceBufferOperation",Ec="buffer.playbackStateChanged",wc="buffer.endOfStreamReached",Tc="buffer.fragmentAdded",Lc="buffer.changeCodec",Oc="buffer.sourceBufferStuck",Mc="resolutionsManager.resolutionsAvailable",Ac="resolutionManager.resolutionChanged",Pc="resolutionManager.resolutionAutoChanged",Rc="resolutionManager.requestResolutionChange",Ic="resolutionManager.requestRestartFromMain",jc="resolutionManager.resolutionNotFound";mc=Ga("eQOGK");class Dc{_droppedFrames={};_currentResolution=null;_isFirstMetricsOfResolution=!0;constructor(e){this._eventBus=e,this._onBufferMetricsReadyListener=this._eventBus.subscribe(vc,this._onBufferMetricsReady),this._onResolutionChangedListener=this._eventBus.subscribe(Ac,this._onResolutionChanged)}destroy(){this._eventBus.unsubscribe(this._onBufferMetricsReadyListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this.reset()}getCurrentResolutionHistory(){return this._currentResolution&&this._droppedFrames[this._currentResolution.name]?this._droppedFrames[this._currentResolution.name]:null}getResolutionHistoryByName(e){return this._droppedFrames[e]||null}reset(){this._droppedFrames={},this._currentResolution=null,this._isFirstMetricsOfResolution=!0}_onBufferMetricsReady(e){if(!this._currentResolution)return;const{name:t}=this._currentResolution;this._droppedFrames[t]||(this._droppedFrames[t]={droppedFramesNumber:0,totalFramesNumber:0}),this._isFirstMetricsOfResolution?this._isFirstMetricsOfResolution=!1:(this._droppedFrames[t].droppedFramesNumber+=e.droppedVideoFramesDelta,this._droppedFrames[t].totalFramesNumber+=e.totalVideoFramesDelta)}_onResolutionChanged(e){this._currentResolution?.name!==e.name&&(this._currentResolution=e,this._isFirstMetricsOfResolution=!0)}}(0,Wa.__decorate)([mc.default],Dc.prototype,"_onBufferMetricsReady",null),(0,Wa.__decorate)([mc.default],Dc.prototype,"_onResolutionChanged",null),mc=Ga("eQOGK");class Nc extends dc{state=hc.OK;status="Idle";additionalInfo={droppedFramesByResolution:{}};groups=["abr"];_lastClearTs=0;_droppedFramesHistory=new Dc(this._eventBus);constructor(e){super("droppedFramesEstimator",e),this._onMetricsReadyListener=this._eventBus.subscribe(vc,this._onMetricsReady)}destroy(){super.destroy(),this._droppedFramesHistory.destroy(),this._eventBus.unsubscribe(this._onMetricsReadyListener)}reset(){this._droppedFramesHistory.reset()}getNextEstimatedResolution(e){const{minimalFramesPlayed:t}=this.config;return e.find((({name:e})=>{const r=this._droppedFramesHistory.getResolutionHistoryByName(e);return this.additionalInfo.droppedFramesByResolution[e]=r,!r||r.totalFramesNumber<t||r.droppedFramesNumber/r.totalFramesNumber<this.config.optimalDroppedFramesFraction}))||null}_handleConfigUpdated(){}_onMetricsReady(e){e.currentTimestamp-this._lastClearTs>this.config.resetHistoryTimeout&&(this._droppedFramesHistory.reset(),this._lastClearTs=e.currentTimestamp)}}(0,Wa.__decorate)([mc.default],Nc.prototype,"_onMetricsReady",null),Ga("8NFq9"),Wa=Ga("a8VW4");var Cc=Ga("3mtZ4");const xc="AbrController.resolutionsConstraintsAvailable";mc=Ga("eQOGK");class kc{state=hc.OK;status="Idle";additionalInfo={};groups=["abr"];_lastAvailableResolutions=[];_currentResolutionsLimit=null;_estimatedResolution=null;constructor(e){this._eventBus=e,this._onResolutionsConstraintsAvailableListener=this._eventBus.subscribe(xc,this._onResolutionsConstraintsAvailable)}destroy(){this._eventBus.unsubscribe(this._onResolutionsConstraintsAvailableListener)}reset(){}getNextEstimatedResolution(e){return this._lastAvailableResolutions!==e&&(this._lastAvailableResolutions=e,this._calculationAvailableResolution(this._currentResolutionsLimit)),this._estimatedResolution}_onResolutionsConstraintsAvailable(e){Va(Cc).isEqual(this._currentResolutionsLimit,e)||this._calculationAvailableResolution(e)}_meetsLimits(e,t){return!(void 0!==t?.bitrate&&e.bitrate>t?.bitrate||void 0!==t?.height&&e.height>t?.height||void 0!==t?.width&&e.width>t?.width||void 0!==t?.fps&&(void 0===e.fps||+e.fps>+t?.fps))}_calculationAvailableResolution(e){if(this._currentResolutionsLimit={...e},0===this._lastAvailableResolutions?.length)return;if(null===e)return void(this._estimatedResolution=null);const t=this._lastAvailableResolutions.filter((t=>!e||this._meetsLimits(t,e)));this._estimatedResolution=t[0]||this._lastAvailableResolutions.slice(-1)[0]}}(0,Wa.__decorate)([mc.default],kc.prototype,"_onResolutionsConstraintsAvailable",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class Bc extends dc{_lastSelectedResolution=null;_bannedResolutions=[];constructor(e){super("switchHistory",e),this._onResolutionSelectedListener=this._eventBus.subscribe(Ac,this._onResolutionChanged),this._onMetricsReadyListener=this._eventBus.subscribe(vc,this._checkBanedResolutions)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onResolutionSelectedListener),this._eventBus.unsubscribe(this._onMetricsReadyListener),this.reset()}reset(){this._bannedResolutions=[]}getBannedResolutions(){return this._bannedResolutions.map((({resolution:e})=>e))}_handleConfigUpdated(e){e.banResolutionDuration&&this._checkBanedResolutions()}_onResolutionChanged(e){!this._lastSelectedResolution||this._lastSelectedResolution.bitrate<e.bitrate?this._lastSelectedResolution=e:this._lastSelectedResolution.bitrate>e.bitrate&&(this._bannedResolutions.push({resolution:e,bannedAt:Date.now()}),this._lastSelectedResolution=e)}_checkBanedResolutions(){if(!this._bannedResolutions.length)return;const e=Date.now();this._bannedResolutions=this._bannedResolutions.filter((({bannedAt:t})=>e-t<this.config.banResolutionDuration))}}(0,Wa.__decorate)([mc.default],Bc.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Bc.prototype,"_onResolutionChanged",null),(0,Wa.__decorate)([mc.default],Bc.prototype,"_checkBanedResolutions",null),Ga("8NFq9"),Wa=Ga("a8VW4"),Ga("8NFq9"),Wa=Ga("a8VW4");const Fc={browserRedirectDetected:"networkLoader.events.browserRedirectDetected",networkRequestSettled:"networkLoader.events.networkRequestSettled"},Uc={statsReady:"networkLoader.stats.statsEvent"};mc=Ga("eQOGK");class zc{_previousFastValue=null;_previousSlowValue=null;constructor(e,t,r){this._eventBus=r,this._fastAlpha=e,this._slowAlpha=t}addValue(e){const{_fastAlpha:t,_slowAlpha:r}=this;this._previousFastValue=t*e+(1-t)*(this._previousFastValue||e),this._previousSlowValue=r*e+(1-r)*(this._previousSlowValue||e),this._eventBus.publish("EWMAMetrics",{fast:this._previousFastValue,slow:this._previousSlowValue})}getCurrentValue(){return this._previousSlowValue&&this._previousFastValue?Math.min(this._previousFastValue,this._previousSlowValue):0}getCurrentMaximalValue(){return this._previousFastValue&&this._previousSlowValue?Math.max(this._previousSlowValue,this._previousFastValue):0}reset(){this._previousSlowValue=null,this._previousFastValue=null}}class Vc extends dc{constructor(e){super("throughputHistory",e),this._measuredSpeedEwmaInstance=new zc(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._realSpeedEwmaInstance=new zc(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._ttfbEwmaInstance=new zc(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._onNetMetricsReadyListener=this._eventBus.subscribe(Uc.statsReady,this._onNetworkMetricsReady)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onNetMetricsReadyListener),this._measuredSpeedEwmaInstance.reset(),this._realSpeedEwmaInstance.reset()}getCurrentBitrateEstimate(){return{measuredSpeed:this._measuredSpeedEwmaInstance.getCurrentValue(),realSpeedWithoutTTFB:this._realSpeedEwmaInstance.getCurrentValue(),ttfb:this._ttfbEwmaInstance.getCurrentMaximalValue()}}reset(){this._measuredSpeedEwmaInstance=new zc(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._realSpeedEwmaInstance=new zc(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus),this._ttfbEwmaInstance=new zc(this.config.ewmaFastAlpha,this.config.ewmaSlowAlpha,this._eventBus)}_handleConfigUpdated(e){(e.ewmaFastAlpha||e.ewmaSlowAlpha)&&this.reset()}_onNetworkMetricsReady(e){if(this.config.ignorePlaylistsMetrics&&"text"===e.type)return;const t=8*e.sizeInKb/((e.downloadDuration-e.ttfb)/1e3);this._measuredSpeedEwmaInstance.addValue(e.calculatedSpeed),this._realSpeedEwmaInstance.addValue(t),this._ttfbEwmaInstance.addValue(e.ttfb/1e3)}}(0,Wa.__decorate)([mc.default],Vc.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Vc.prototype,"_onNetworkMetricsReady",null);const qc=e=>e/1024;mc=Ga("eQOGK");class $c extends dc{state=hc.OK;status="Idle";additionalInfo={};groups=["abr"];_isResultsConfident=!1;_fragmentsLoadedAmount=0;constructor(e){super("throughputEstimator",e),this._throughputHistory=new Vc(this._eventBus),this._onNetworkMetricsReadyListener=this._eventBus.subscribe(Uc.statsReady,this._onNetworkStatsReady)}destroy(){super.destroy(),this._throughputHistory.destroy(),this._eventBus.unsubscribe(this._onNetworkMetricsReadyListener)}reset(){this._throughputHistory.reset(),this._isResultsConfident=!1}getNextEstimatedResolution(e){const{realSpeedWithoutTTFB:t,measuredSpeed:r,ttfb:n}=this._throughputHistory.getCurrentBitrateEstimate();if(this.additionalInfo={realSpeedWithoutTTFB:t,measuredSpeed:r,ttfb:n},!e.length||!r||!this._isResultsConfident)return null;const i=qc(e[0].bitrate)/(n+qc(e[0].bitrate)/t);if(qc(e[0].bitrate)<i)return e[0];const o=e.find((({bitrate:e})=>{const r=qc(e),i=r/(n+r/t);return i*this.config.optimalResolutionLowerBound<=r&&r<=i*this.config.optimalResolutionUpperBound}));return o||(e.find((({bitrate:e})=>qc(e)<=r*this.config.optimalResolutionLowerBound))||e.slice(-1)[0])}_handleConfigUpdated(){}_onNetworkStatsReady(e){"binary"!==e.type||this._isResultsConfident||(this._fragmentsLoadedAmount+=1,this._fragmentsLoadedAmount>=this.config.amountOfFragmentToBecomeConfident&&(this._isResultsConfident=!0))}}(0,Wa.__decorate)([mc.default],$c.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],$c.prototype,"_onNetworkStatsReady",null),mc=Ga("eQOGK");const Gc={[rc.DROPPED_FRAMES_ESTIMATOR]:Nc,[rc.THROUGHPUT_ESTIMATOR]:$c,[rc.SWITCH_HISTORY]:class{state=hc.OK;status="Idle";additionalInfo={bannedResolution:[]};groups=["abr"];constructor(e){this._eventBus=e,this._switchHistory=new Bc(this._eventBus)}reset(){this._switchHistory.reset()}destroy(){this._switchHistory.destroy()}getNextEstimatedResolution(e){const t=this._switchHistory.getBannedResolutions().map((({name:e})=>e));return this.additionalInfo.bannedResolution=t,e.find((({name:e})=>!t.includes(e)))||null}},[rc.INSUFFICIENT_BUFFER]:class extends dc{status="Idle";state=hc.OK;groups=["abr"];additionalInfo={};_hasPassedMinimalBuffer=!1;constructor(e){super("insufficientBufferEstimator",e)}destroy(){super.destroy()}reset(){this._hasPassedMinimalBuffer=!1}getNextEstimatedResolution(e,t,r){const n=r.bufferAmount>this.config.minimalBufferAmount;!this._hasPassedMinimalBuffer&&n&&(this._hasPassedMinimalBuffer=!0);const i=!this.config.ignoreMetricsBeforeBufferExceedsMinimal||this._hasPassedMinimalBuffer;if(this.additionalInfo.isResultsConfident=i,this.additionalInfo.isBufferExceedsMinimal=n,this.additionalInfo.hasPassedMinimalBuffer=this._hasPassedMinimalBuffer,!i||n||!t)return null;this._hasPassedMinimalBuffer=!1;const o=e.slice(-1)[0],s=t.url===o.url?t:e[e.findIndex((({name:e})=>e===t.name))+1];return this.config.switchToMinimalResolution?o:s}_handleConfigUpdated(){this._hasPassedMinimalBuffer=!1}},[rc.MINIMAL_BUFFER_TO_INCREASE]:class extends dc{state=hc.OK;status="Idle";additionalInfo={};groups=["abr"];constructor(e){super("minimalBufferToIncreaseEstimator",e)}destroy(){super.destroy()}reset(){}getNextEstimatedResolution(e,t,r){return 1e3*r.bufferAmount>this.config.minimalBufferAmount?null:t}_handleConfigUpdated(){}},[rc.DELTA_BUFFER]:yc,[rc.MAX_RESOLUTION_ESTIMATOR]:kc};class Wc extends dc{state=hc.OK;status="Idle";groups=["general","abr"];additionalInfo={switchReasonHistory:[]};_currentResolution=null;_availableResolutions=[];_estimators={};_lastSwitchTime=0;constructor(e){super("abr",e),this._logger=Uu(e,"Doppio - AbrController"),this._onResolutionChangedListener=this._eventBus.subscribe(Ac,this._onResolutionChanged),this._onResolutionsAvailableListener=this._eventBus.subscribe(Mc,this._onResolutionsAvailable),this._onMetricsReadyListener=this._eventBus.subscribe(vc,this._recalculateCurrentLevel),this._recreateEstimators(),this._lastSwitchTime=Date.now()}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onMetricsReadyListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onResolutionsAvailableListener),Object.values(this._estimators).forEach((e=>{e.destroy()})),this._estimators={}}_handleConfigUpdated(e){e.enabledABRRules&&this._recreateEstimators()}_recreateEstimators(){Object.values(this._estimators).forEach((e=>e.destroy())),this._estimators=this.config.enabledABRRules.reduce(((e,t)=>(e[t]=new Gc[t](this._eventBus),e)),{})}_recalculateCurrentLevel(e){const t=Object.entries(this._estimators).reduce(((t,[r,n])=>(t[r]=n.getNextEstimatedResolution(this._availableResolutions,this._currentResolution,e),t)),{});if(this.additionalInfo.estimations=Object.entries(t).reduce(((e,[t,r])=>(e[t]=r?.name||"null",e)),{}),Date.now()-this._lastSwitchTime<this.config.cooldownPeriod)return;if(!Object.values(this._estimators).length)return;const r=Object.values(t).filter((e=>e)).sort(((e,t)=>(e?.bitrate||0)-(t?.bitrate||0)))[0];if(r&&r.name!==this._currentResolution?.name){const e=Object.entries(t).reduce(((e,[t,n])=>(n?.name===r?.name&&e.push(t),e)),[]);this.additionalInfo.switchReasonHistory.unshift(`${this._currentResolution?.name} -> ${r?.name}; ${e.join(",")}`),this._lastSwitchTime=Date.now(),this.additionalInfo.lastSwitchTime=this._lastSwitchTime,this.additionalInfo.lastSwitchReason=Object.entries(t).filter((([,e])=>e?.name===r?.name)).map((([e])=>e)).join("; "),this._logger.info(`ABR wants to change the resolution, ${this._currentResolution?.name} -> ${r?.name}`),this._eventBus.publish(Rc,r)}}_onResolutionsAvailable(e){this._availableResolutions=e}_onResolutionChanged(e){this._currentResolution=e,Object.values(this._estimators).forEach((e=>e.reset()))}get additionalModules(){return this._estimators}}(0,Wa.__decorate)([mc.default],Wc.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Wc.prototype,"_recalculateCurrentLevel",null),(0,Wa.__decorate)([mc.default],Wc.prototype,"_onResolutionsAvailable",null),(0,Wa.__decorate)([mc.default],Wc.prototype,"_onResolutionChanged",null),Ga("8NFq9"),Wa=Ga("a8VW4"),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class Yc extends dc{_isPaused=!1;_isInVodMode=!1;_fragmentTimeRanges=[];_videoElement=null;constructor(e){super("bufferController",e),this._logger=Uu(e,"Doppio - BufferCleaner"),this._onBufferMetricsReadyListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable),this._onPeriodFragmentsFound=this._eventBus.subscribe(gc.fragments.periodFragmentsFound,this._onFragmentPeriodFound),this._onVODFragmentsInfoAvailableListener=this._eventBus.subscribe(gc.playlists.vodFragmentsInfo,this._onVODFragmentsInfoAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPeriodFragmentsFound),this._eventBus.unsubscribe(this._onVODFragmentsInfoAvailableListener),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener)}start(){this._isPaused=!1}pause(){this._isPaused=!0}setVODMode(e){this._isInVodMode=e}setVideoElement(e){this._videoElement=e}removeVideoElement(){this._videoElement=null}_handleConfigUpdated(){}_onVODFragmentsInfoAvailable(e){this._fragmentTimeRanges=e.map((({fragmentStartTS:e,fragmentEndTS:t})=>({startTS:e,endTS:t})))}_onBufferMetricsAvailable(e){if(!(this._isPaused||0===e.bufferedTimeRanges.length||this._isInVodMode&&this._fragmentTimeRanges.length)){const t=e.isPaused?[{startTS:e.currentPlaybackPosition-1,endTS:e.currentPlaybackPosition+1},{startTS:e.bufferedTimeRanges.slice(-1)[0]?.end-this.config.maxBackBufferAmount/1e3,endTS:e.bufferedTimeRanges.slice(-1)[0]?.end}]:[{startTS:e.currentPlaybackPosition-this.config.maxBackBufferAmount/1e3,endTS:e.bufferedTimeRanges.slice(-1)[0].end}];this._clearBufferWithSafetyTimeRanges(t)}}_onFragmentPeriodFound({endTsOfPeriod:e}){if(this._isPaused||!this._videoElement||this._videoElement.currentTime<this.config.maxBackBufferAmount/1e3)return;const{currentTime:t}=this._videoElement,r=[{startTS:t-this.config.maxBackBufferAmount/1e3,endTS:e}];this._clearBufferWithSafetyTimeRanges(r)}_clearBufferWithSafetyTimeRanges(e){if(!this._videoElement?.buffered.length)return;const t=e.sort(((e,t)=>e.startTS-t.startTS)).filter((({startTS:e,endTS:t})=>e<t)).map(((t,r)=>({startTS:r>0?e[r-1].endTS:0,endTS:t.startTS}))).filter((({startTS:e,endTS:t})=>e<t));this._isInVodMode&&Number.isFinite(this._videoElement.duration)&&e.length&&e.slice(-1)[0].endTS<this._videoElement.duration&&t.push({startTS:e.slice(-1)[0].endTS,endTS:this._videoElement.duration}),t.forEach((e=>{this._eventBus.publish(Sc,(t=>{this._logger.verbose(`Removing buffered range ${e.startTS} -> ${e.endTS}`),t.remove(e.startTS,e.endTS)}))}))}}let Hc;var Qc;let Kc;var Xc;let Jc;var Zc;let ef;var tf;(0,Wa.__decorate)([mc.default],Yc.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],Yc.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Yc.prototype,"_onVODFragmentsInfoAvailable",null),(0,Wa.__decorate)([mc.default],Yc.prototype,"_onBufferMetricsAvailable",null),(0,Wa.__decorate)([mc.default],Yc.prototype,"_onFragmentPeriodFound",null),Ga("8NFq9"),Wa=Ga("a8VW4"),(Qc=Hc||(Hc={})).MANIFEST_LOADED="ManifestLoaded",Qc.FIRST_MEDIA_PLAYLIST_LOADED="FirstMediaPlaylistLoaded",Qc.FIRST_FRAGMENT_LOADED="FirstFragmentLoaded",Qc.FIRST_FRAGMENT_BUFFERED="FirstFragmentBuffered",(Xc=Kc||(Kc={})).MANIFEST_LOAD_ERROR="ManifestLoadError",Xc.PLAYLIST_LOAD_ERROR="PlaylistLoadError",Xc.FRAGMENT_LOAD_ERROR="FragmentLoadError",(Zc=Jc||(Jc={})).VARIANTS_DETECTED="variantDetected",Zc.RESOLUTION_CHANGED="resolutionChanged",Zc.METRICS_AVAILABLE="metricsAvailable",Zc.ERROR="error",Zc.MANIFEST_LOADING="manifestLoading",Zc.MANIFEST_LOADED="manifestLoaded",Zc.MANIFEST_PARSED="manifestParsed",Zc.LEVEL_LOADED="levelLoaded",Zc.LEVEL_SWITCHED="levelSwitched",Zc.LEVEL_SWITCHED_AUTO="levelSwitchedAuto",Zc.LEVEL_SWITCHING="levelSwitching",Zc.MEDIA_ATTACHED="mediaAttached",Zc.MEDIA_DETACHED="mediaDetached",Zc.FRAG_LOADED="fragmentLoaded",Zc.LEVEL_METADATA_LOADED="levelMetadataLoaded",Zc.STREAM_STATE_TRANSITION="streamStateTransition",Zc.PLAYBACK_STATE_CHANGED="playbackStateChanged",Zc.FRAG_BUFFERED="fragBuffered",Zc.DEBUGGER_CONNECTED="debuggerConnected",Zc.STREAM_ENDED="streamEnded",Zc.LIFECYCLE_EVENT="lifecycleEvent",Zc.LIFECYCLE_ERROR="lifecycleError",Zc.FRAGMENT_FILTERED_OUT="fragmentFilteredOut",Zc.RESOLUTION_NOT_FOUND="resolutionNotFound",(tf=ef||(ef={})).MEDIA_ERROR="mediaError",tf.NETWORK_ERROR="networkError",tf.PARSING_ERROR="parsingError",mc=Ga("eQOGK");class rf extends dc{_sourceBuffer=null;_opsQueue=[];_sourceBufferStuckTimer=null;constructor(e){super("bufferController",e),this._logger=Uu(e,"Doppio - BufferOpsQueue"),this._eventBus=e}setSourceBuffer(e){this._sourceBuffer&&this._sourceBuffer.removeEventListener("updateend",this._onBufferReady),this._sourceBuffer=e,this._sourceBuffer.addEventListener("updateend",this._onBufferReady),this._sourceBufferStuckTimer=setTimeout((()=>{this._eventBus.publish(Oc,{})}),this.config.sourceBufferStuckTimeout)}destroy(){super.destroy();try{this._disarmSourceBufferStuckTimer(),this._sourceBuffer?.removeEventListener("updateend",this._onBufferReady),this._sourceBuffer?.abort()}catch(tv){this._logger.info("Source buffer cannot be aborted. Ignore it")}this._opsQueue=[]}removeSourceBuffer(e){this._sourceBuffer&&(this.immediatelyRecreateSourceBuffer(e),this._sourceBuffer.removeEventListener("updateend",this._onBufferReady),this._sourceBuffer=null)}addBufferOperation(e,t,r){if(!this._sourceBuffer)return this._logger.warn(`There is no sourceBuffer defined. Operation (${r||"unknown"}) will be executed once sourceBuffer will be appended`),void this._opsQueue.push({operation:e,errorHandler:t});if(this._sourceBuffer.updating||this._opsQueue.length>0)this._opsQueue.push({operation:e,errorHandler:t});else try{e(this._sourceBuffer)}catch(r){t?t(this._sourceBuffer,r):(this._eventBus.publish(Jc.ERROR,{type:ef.MEDIA_ERROR,details:r}),this._logger.error(`Cannot recreate source buffer: ${r.toString()}, ${e}`))}}immediatelyRecreateSourceBuffer(e){try{if(!this._sourceBuffer||!e||![...e.sourceBuffers].includes(this._sourceBuffer))return;this._disarmSourceBufferStuckTimer(),this._opsQueue=[],this._sourceBuffer.abort(),this._sourceBuffer.remove(0,Number.POSITIVE_INFINITY)}catch(e){this._logger.error(`Cannot recreate source buffer: ${e.toString()}`)}}_recheckQueue(){if(!this._sourceBuffer||this._sourceBuffer.updating||!this._opsQueue.length)return;const e=this._opsQueue.shift();if(e)try{e.operation(this._sourceBuffer)}catch(Ua){e.errorHandler?e.errorHandler?.(this._sourceBuffer,Ua):(this._logger.error(`Cannot perform source buffer operation: ${Ua.toString()} ${e}`),this._eventBus.publish(Jc.ERROR,{type:ef.MEDIA_ERROR,details:Ua}))}!this._sourceBuffer.updating&&this._opsQueue.length&&this._recheckQueue()}_onBufferReady(){this._recheckQueue(),this._disarmSourceBufferStuckTimer()}_disarmSourceBufferStuckTimer(){this._sourceBufferStuckTimer&&clearTimeout(this._sourceBufferStuckTimer)}}(0,Wa.__decorate)([mc.default],rf.prototype,"_onBufferReady",null),(0,Wa.__decorate)([mc.default],rf.prototype,"_disarmSourceBufferStuckTimer",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class nf extends dc{_isPrevCheckStalled=!1;constructor(e){super("bufferStallsDetector",e),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener)}_handleConfigUpdated(){}_onBufferMetricsAvailable({isStallCandidate:e,bufferedTimeRanges:t,currentPlaybackPosition:r}){const n=t.slice(-1)[0],i=n?n.end-r:0,o=e&&i<this.config.bufferAmountToDetectStall;this._isPrevCheckStalled!==o&&(this._isPrevCheckStalled=o,this._eventBus.publish(bc,o))}}(0,Wa.__decorate)([mc.default],nf.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],nf.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],nf.prototype,"_onBufferMetricsAvailable",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");const of="debugger.lifecycleEvent",sf="debugger.connected",af=(e,t)=>r=>{t.publish(of,{module:e,eventInfo:r,timestamp:Date.now()})};let uf;var lf;(lf=uf||(uf={})).UNKNOWN="unknown",lf.GAP="gap",lf.IN_RANGE="inRange",lf.END_OF_RANGE="endOfRange";class cf extends dc{state=hc.OK;status="Idle";additionalInfo={};groups=["buffer"];_lastPlaybackPosition=0;_videoElement=null;_numberOfDetectedStallCandidates=0;constructor(e){super("bufferController",e),this._logger=Uu(e,"Doppio - LiveGapController"),this._lifecycleEventReporter=af("LiveGapController",this._eventBus),this._onBufferMetricsReadyListener=this._eventBus.subscribe(vc,this._onBufferMetricsReady)}setVideoElement(e){this._videoElement=e}removeVideoElement(){this._videoElement=null}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener)}_handleConfigUpdated(){}_checkIfJumpNeeded(e){let t=!1,r=uf.UNKNOWN;const n=this._lastPlaybackPosition!==e.currentPlaybackPosition;this._lastPlaybackPosition=e.currentPlaybackPosition,n?this._numberOfDetectedStallCandidates=0:this._numberOfDetectedStallCandidates+=1;const i=!e.bufferedTimeRanges.some((({isCurrentTimeRange:e})=>e));return!n&&this.config.numberOfCandidatesToDetectGap<=this._numberOfDetectedStallCandidates&&(this._numberOfDetectedStallCandidates=0,this._lifecycleEventReporter("Playback stalled"),this._logger.info("Playback position didnt changed since last check"),t=!0,r=e.currentTimeRange&&e.currentTimeRange.end-e.currentPlaybackPosition<this.config.endOfRangeThreshold?uf.END_OF_RANGE:uf.IN_RANGE),i&&(this._lifecycleEventReporter("Gap detected"),this._logger.info("Gap detected"),t=!0,r=uf.GAP),this.additionalInfo.isInLastBufferedRange=e.isInLastBufferedRange,this.additionalInfo.isPlaybackPositionChanged=n,this.additionalInfo.isInGap=i,this.additionalInfo.stuckType=r,{isJumpNeeded:t,stuckType:r}}_onBufferMetricsReady(e){if(!e.bufferedTimeRanges.length||0===this._videoElement?.currentTime||this._videoElement?.paused)return;const{isJumpNeeded:t,stuckType:r}=this._checkIfJumpNeeded(e);return t?(this._lifecycleEventReporter("Gap detected. Skipping it"),[uf.END_OF_RANGE,uf.GAP].includes(r)?this._jumpToNextRangeStart(e):this._nudgePlayback(e)):void 0}_setNextPlaybackPosition(e){this._videoElement&&(this._videoElement.currentTime=e)}_jumpToNextRangeStart(e){if(e.isInLastBufferedRange||e.currentPlaybackPosition>=e.bufferedTimeRanges.slice(-1)[0].end)return void this._nudgePlayback(e);const t=e.bufferedTimeRanges.find((({start:t})=>t>e.currentPlaybackPosition));t?(this._lifecycleEventReporter(`Jump to next range requested, jumping to ${t.start+.01}`),this._setNextPlaybackPosition(t.start+.01)):this._nudgePlayback(e)}_nudgePlayback(e){if(e.isOnBufferEdge)return;const t=e.currentPlaybackPosition+this.config.nudgePlaybackAmount;this._lifecycleEventReporter("Nudge playback position"),this._setNextPlaybackPosition(t)}}(0,Wa.__decorate)([mc.default],cf.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],cf.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],cf.prototype,"_onBufferMetricsReady",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class ff extends dc{state=hc.OK;status="Idle";additionalInfo={};groups=["buffer"];_videoElement=null;_fragments=[];_lastPlaybackPosition=0;_numberOfDetectedStallCandidates=0;constructor(e){super("bufferController",e),this._onBufferMetricsReadyListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable),this._onVODFragmentInfoAvailableListener=this._eventBus.subscribe(gc.playlists.vodFragmentsInfo,this._onVODFragmentsInfoAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener),this._eventBus.unsubscribe(this._onVODFragmentInfoAvailableListener)}setVideoElement(e){this._videoElement=e}removeVideoElement(){this._videoElement=null}_handleConfigUpdated(){}_onVODFragmentsInfoAvailable(e){this._fragments=e.map((({fragmentEndTS:e,fragmentStartTS:t})=>({startTs:t,endTs:e})))}_onBufferMetricsAvailable(e){if(!this._fragments.length||!e.bufferedTimeRanges||this._videoElement?.paused)return;const t=this._lastPlaybackPosition!==e.currentPlaybackPosition;this._lastPlaybackPosition=e.currentPlaybackPosition,t?this._numberOfDetectedStallCandidates=0:this._numberOfDetectedStallCandidates+=1;const r=!e.bufferedTimeRanges.some((({isCurrentTimeRange:e})=>e)),n=!t&&this.config.numberOfCandidatesToDetectGap<=this._numberOfDetectedStallCandidates;if(r||n){const t=this._fragments.find((({startTs:t})=>t>e.currentPlaybackPosition))?.startTs||-1,r=e.bufferedTimeRanges.find((({start:t})=>t>e.currentPlaybackPosition))?.start||-1;t===r&&this._videoElement&&(this._videoElement.currentTime=r+.01,this._numberOfDetectedStallCandidates=0)}}}(0,Wa.__decorate)([mc.default],ff.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],ff.prototype,"_onVODFragmentsInfoAvailable",null),(0,Wa.__decorate)([mc.default],ff.prototype,"_onBufferMetricsAvailable",null);class df{groups=["buffer"];_liveGapController=null;_vodGapController=null;_videoElement=null;_isInVODMode=!1;constructor(e){this._eventBus=e,this._liveGapController=new cf(this._eventBus),this._recreateGapController()}destroy(){this._vodGapController?.destroy(),this._liveGapController?.destroy()}setIsVod(e){this._isInVODMode=e,this._recreateGapController()}setVideoElement(e){this._videoElement=e,this._liveGapController&&this._liveGapController.setVideoElement(e),this._vodGapController&&this._vodGapController.setVideoElement(e)}removeVideoElement(){this._videoElement=null,this._liveGapController?.removeVideoElement(),this._vodGapController?.removeVideoElement()}_recreateGapController(){this._vodGapController?.destroy(),this._liveGapController?.destroy(),this._isInVODMode?this._vodGapController=new ff(this._eventBus):this._liveGapController=new cf(this._eventBus),this._videoElement&&this.setVideoElement(this._videoElement)}get status(){return this._vodGapController?.status||this._liveGapController?.status||"Idle"}get state(){return this._vodGapController?.state||this._liveGapController?.state||hc.OK}get additionalInfo(){return this._vodGapController?.additionalInfo||this._liveGapController?.additionalInfo||{}}}Ga("8NFq9"),Wa=Ga("a8VW4");const hf="targetBuffer.targetBufferIncreaseRequested",pf="targetBuffer.targetBufferIncreased",gf="targetBuffer.targetBufferDecreaseRequested",mf="targetBuffer.originalTargetBufferDecreaseRequested",yf="targetBuffer.originalTargetBufferDisable",_f="playbackSpeed.setPlaybackSpeed";class vf{_registeredEvents=[];registerEvent(){this._registeredEvents.push(Date.now())}checkEventsInPeriod(e){const t=Date.now()-e;return this._registeredEvents=this._registeredEvents.filter((e=>e>=t)),this._registeredEvents.length}clear(){this._registeredEvents=[]}}mc=Ga("eQOGK");class bf extends dc{state=hc.OK;status="Idle";groups=["PlaybackSpeed"];_nextCheckTimestamp=0;_currentMultiplier=0;_increaseEventsCollector=new vf;constructor(e){super("originalTargetBufferDecreaser",e),this.additionalInfo={isDecreasingDisabled:!1,currentMultiplier:this._currentMultiplier},this._onTargetBufferIncreasedListener=this._eventBus.subscribe(pf,this._onTargetBufferIncreased),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onTargetBufferIncreasedListener),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener)}_updateIsDisabledAdditionalInfo(){this.additionalInfo.isDecreasingDisabled=!0}_updateMultiplier(){this._currentMultiplier+=1,this.additionalInfo.currentMultiplier=this._currentMultiplier}_onTargetBufferIncreased(){this._increaseEventsCollector.registerEvent(),this._eventBus.publish(yf,{}),this._updateIsDisabledAdditionalInfo()}_onBufferMetricsAvailable(){0!==this._nextCheckTimestamp&&this._nextCheckTimestamp<performance.now()&&this.config.allowTargetBufferDecrease&&0===this._increaseEventsCollector.checkEventsInPeriod(this.config.targetBufferDecreaseTimeout)&&this._currentMultiplier<this.config.maxTargetBufferMultiplier&&(this._eventBus.publish(mf,{}),this._updateMultiplier(),this._nextCheckTimestamp=performance.now()+this.config.targetBufferDecreaseTimeout),this._nextCheckTimestamp=0===this._nextCheckTimestamp?performance.now()+this.config.targetBufferDecreaseTimeout:this._nextCheckTimestamp}}let Sf;var Ef;(0,Wa.__decorate)([mc.default],bf.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],bf.prototype,"_onTargetBufferIncreased",null),(0,Wa.__decorate)([mc.default],bf.prototype,"_onBufferMetricsAvailable",null),Ga("8NFq9"),Wa=Ga("a8VW4"),(Ef=Sf||(Sf={})).FAST="fast",Ef.NORMAL="normal",Ef.SLOW="slow",mc=Ga("eQOGK");class wf extends dc{state=hc.OK;status="Idle";groups=["PlaybackSpeed"];_videoElement=null;_currentPlaybackSpeed=Sf.NORMAL;constructor(e){super("playbackSpeedActuator",e),this._onPlaybackSpeedChangedListener=this._eventBus.subscribe(_f,this._onPlaybackSpeedChanged)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPlaybackSpeedChangedListener)}setVideoElement(e){this._videoElement=e,this._setPlaybackSpeed()}_handleConfigUpdated(){this._setPlaybackSpeed()}_onPlaybackSpeedChanged(e){this._currentPlaybackSpeed=e,this._setPlaybackSpeed()}_setPlaybackSpeed(){if(!this._videoElement)return;const e={[Sf.FAST]:this.config.maxPlaybackRate,[Sf.NORMAL]:1,[Sf.SLOW]:this.config.minPlaybackRate};this._videoElement.playbackRate=e[this._currentPlaybackSpeed]}get additionalInfo(){return{currentPlaybackMode:this._currentPlaybackSpeed}}}(0,Wa.__decorate)([mc.default],wf.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],wf.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],wf.prototype,"_onPlaybackSpeedChanged",null),Ga("8NFq9"),Wa=Ga("a8VW4");const Tf="getSideMetricsAsyncEvents.getPlaybackSpeedControllerMetrics",Lf="getSideMetricsAsyncEvents.playbackSpeedControllerMetricsAvailable",Of="getSideMetricsAsyncEvents.getPlayingTimeFraction",Mf="getSideMetricsAsyncEvents.getPlayingTimeFractionAvailable",Af={fragments:{fragmentLoaded:"fragmentLoader.fragments.fragmentLoaded",fragmentLoadingStarted:"fragmentLoader.fragments.fragmentLoadingStarted",fragmentLoadingAborted:"fragmentLoader.fragments.fragmentLoadingAborted",fragmentLoadingError:"fragmentLoader.fragments.fragmentLoadingError",fragmentHistoryReadyForPrint:"fragmentLoader.fragments.fragmentHistoryReadyForPrint"}},Pf=Af,Rf=gc,If={playlistRotatorTypeChanged:"streamLoader.playlistRotatorTypeChanged"},jf=(e,t)=>e.partHoldBack||e.serverControl?.partHoldBack||e.serverControl?.holdBack||t;mc=Ga("eQOGK");class Df extends dc{state=hc.OK;status="Idle";groups=["PlaybackSpeed"];_originalTargetBuffer=2;_currentTargetBufferMultiplier=1;_currentPlaybackRateMode=Sf.NORMAL;_isPaused=!1;_isDecriseable=!0;_currentOriginalTargetBufferMultiplier=0;constructor(e){super("playbackSpeedWatcher",e),this._logger=Uu(e,"Doppio - PlaybackSpeedWatcher"),this._onBufferMetricsReadyListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable),this._onTargetBufferDecreaseRequestedListener=this._eventBus.subscribe(gf,this._targetBufferDecreaseRequested),this._onTargetBufferIncreaseRequestedListener=this._eventBus.subscribe(hf,this._targetBufferIncreaseRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Rf.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onPlaybackSpeedControllerMetricsRequestedListener=this._eventBus.subscribe(Tf,this._onPlaybackSpeedControllerMetricsRequested),this._onOriginalTargetBufferDecreaseRequestedListener=this._eventBus.subscribe(mf,this._originalTargetBufferDecreaseRequested),this._onOriginalTargetBufferDecreaseDisableListener=this._eventBus.subscribe(yf,this._onOriginalTargetBufferDecreaseDisable),this.config.targetBufferInitialMultiplier&&this.config.targetBufferInitialMultiplier<1&&this._logger.warn("Target buffer multiplier set to value lower than 1. It is unsafe to load less than target-duration, forcing no multiplier instead")}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsReadyListener),this._eventBus.unsubscribe(this._onTargetBufferDecreaseRequestedListener),this._eventBus.unsubscribe(this._onTargetBufferIncreaseRequestedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onPlaybackSpeedControllerMetricsRequestedListener),this._eventBus.unsubscribe(this._onOriginalTargetBufferDecreaseRequestedListener),this._eventBus.unsubscribe(this._onOriginalTargetBufferDecreaseDisableListener)}pause(){this._isPaused=!0,this._setNewPlaybackRateMode(Sf.NORMAL)}resume(){this._isPaused=!1}_handleConfigUpdated(){}_setNewPlaybackRateMode(e){this._currentPlaybackRateMode!==e&&(this._currentPlaybackRateMode=e,this._eventBus.publish(_f,e))}_onBufferMetricsAvailable(e){if(this._isPaused)return;const t=this._getTargetBuffer(),r=e.bufferAmountWithoutGaps-t;0!==e.currentPlaybackPosition&&(r>this.config.maxLiveSyncThreshold*t?this._setNewPlaybackRateMode(Sf.FAST):-1*r>this.config.minLiveSyncThreshold*t?this._setNewPlaybackRateMode(Sf.SLOW):(this._currentPlaybackRateMode===Sf.SLOW&&r>0||this._currentPlaybackRateMode===Sf.FAST&&r<0)&&this._setNewPlaybackRateMode(Sf.NORMAL))}_targetBufferIncreaseRequested(){this._currentTargetBufferMultiplier<this.config.maxTargetBufferMultiplier&&(this._currentTargetBufferMultiplier+=1,this._eventBus.publish(pf,{}))}_targetBufferDecreaseRequested(){this._currentTargetBufferMultiplier>1&&(this._currentTargetBufferMultiplier-=1,this._eventBus.publish(pf,{}))}_onPlaylistInfoAvailable(e){this._originalTargetBuffer=jf(e,3*e.targetDuration)}_onPlaybackSpeedControllerMetricsRequested(){this._eventBus.publish(Lf,this._getTargetBuffer())}_getTargetBuffer(){return this._isDecriseable?this._originalTargetBuffer-this._currentOriginalTargetBufferMultiplier*this.config.targetBufferDecreaseCoefficient:this._originalTargetBuffer*this._currentTargetBufferMultiplier*this.config.targetBufferInitialMultiplier}get additionalInfo(){return{currentTargetBufferMultiplier:this._currentTargetBufferMultiplier,currentTargetBuffer:this._getTargetBuffer()}}_originalTargetBufferDecreaseRequested(){this._currentOriginalTargetBufferMultiplier+=1}_onOriginalTargetBufferDecreaseDisable(){this._isDecriseable=!1}}(0,Wa.__decorate)([mc.default],Df.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],Df.prototype,"_onBufferMetricsAvailable",null),(0,Wa.__decorate)([mc.default],Df.prototype,"_targetBufferIncreaseRequested",null),(0,Wa.__decorate)([mc.default],Df.prototype,"_targetBufferDecreaseRequested",null),(0,Wa.__decorate)([mc.default],Df.prototype,"_onPlaylistInfoAvailable",null),(0,Wa.__decorate)([mc.default],Df.prototype,"_onPlaybackSpeedControllerMetricsRequested",null),(0,Wa.__decorate)([mc.default],Df.prototype,"_originalTargetBufferDecreaseRequested",null),(0,Wa.__decorate)([mc.default],Df.prototype,"_onOriginalTargetBufferDecreaseDisable",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class Nf extends dc{state=hc.OK;status="Idle";groups=["PlaybackSpeed"];additionalInfo={};currentTargetBufferMultiplier=1;_nextCheckTimestamp=0;_currentPlaybackRateMode=Sf.NORMAL;_slowdownEventsCollector=new vf;constructor(e){super("targetBufferDecreaser",e),this._onPlaybackRateModeChangedListener=this._eventBus.subscribe(_f,this._onPlaybackRateModeChanged),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable),this._onTargetBufferIncreasedListener=this._eventBus.subscribe(pf,this._onTargetBufferIncreased)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPlaybackRateModeChangedListener),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener),this._eventBus.unsubscribe(this._onTargetBufferIncreasedListener)}_handleConfigUpdated(){}_onPlaybackRateModeChanged(e){e===this._currentPlaybackRateMode||e!==Sf.SLOW&&this._currentPlaybackRateMode!==Sf.SLOW||this._slowdownEventsCollector.registerEvent(),this._currentPlaybackRateMode=e}_onBufferMetricsAvailable(){0!==this._nextCheckTimestamp&&this._nextCheckTimestamp<Date.now()&&this.currentTargetBufferMultiplier>1&&this._currentPlaybackRateMode!==Sf.SLOW&&0===this._slowdownEventsCollector.checkEventsInPeriod(this.config.periodOfEventsToCancelDecrease)&&(this._eventBus.publish(gf,{}),this.currentTargetBufferMultiplier-=1,this._nextCheckTimestamp=this.currentTargetBufferMultiplier>1?Date.now()+this.config.periodOfEventsToCancelDecrease:0)}_onTargetBufferIncreased(){this.currentTargetBufferMultiplier+=1,this._nextCheckTimestamp=Date.now()+this.config.periodOfEventsToCancelDecrease}}(0,Wa.__decorate)([mc.default],Nf.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],Nf.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Nf.prototype,"_onPlaybackRateModeChanged",null),(0,Wa.__decorate)([mc.default],Nf.prototype,"_onBufferMetricsAvailable",null),(0,Wa.__decorate)([mc.default],Nf.prototype,"_onTargetBufferIncreased",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class Cf extends dc{state=hc.OK;status="Idle";groups=["PlaybackSpeed"];_hasFallenBelowLine=!0;constructor(e){super("targetBufferIncreaser",e),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener)}_handleConfigUpdated(){}_onBufferMetricsAvailable(e){this._hasFallenBelowLine?1e3*e.bufferAmountWithoutGaps>=this.config.bufferAmountThreshold&&(this._hasFallenBelowLine=!1):1e3*e.bufferAmountWithoutGaps<this.config.bufferAmountToIncrease&&(this._hasFallenBelowLine=!0,this._eventBus.publish(hf,{}))}get additionalInfo(){return{hasFallenBelowLine:this._hasFallenBelowLine}}}(0,Wa.__decorate)([mc.default],Cf.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],Cf.prototype,"_onBufferMetricsAvailable",null);class xf{state=hc.OK;status="Idle";groups=["PlaybackSpeed"];additionalInfo={};constructor(e){this._eventBus=e,this._playbackSpeedActuator=new wf(this._eventBus),this._playbackSpeedWatcher=new Df(this._eventBus),this._targetBufferDecreaser=new Nf(this._eventBus),this._targetBufferIncreaser=new Cf(this._eventBus),this._originalTargetBufferDecreaser=new bf(this._eventBus)}setVideoElement(e){this._playbackSpeedActuator.setVideoElement(e)}removeVideoElement(){this._playbackSpeedActuator.setVideoElement(null)}pause(){this._playbackSpeedWatcher.pause()}resume(){this._playbackSpeedWatcher.resume()}destroy(){this._playbackSpeedActuator.destroy(),this._playbackSpeedWatcher.destroy(),this._targetBufferDecreaser.destroy(),this._targetBufferIncreaser.destroy(),this._originalTargetBufferDecreaser.destroy()}get additionalModules(){return{playbackSpeedActuator:this._playbackSpeedActuator,playbackSpeedWatcher:this._playbackSpeedWatcher,targetBufferIncreaser:this._targetBufferIncreaser,targetBufferDecreaser:this._targetBufferDecreaser,originalTargetBufferDecreaser:this._originalTargetBufferDecreaser}}}let kf;var Bf;Ga("8NFq9"),Wa=Ga("a8VW4"),(Bf=kf||(kf={})).IDLE="idle",Bf.LOADING="loading",Bf.PLAYING="playing",Bf.PAUSED="paused",Bf.ERROR="error",mc=Ga("eQOGK");class Ff extends dc{_currentState=kf.IDLE;_numberOfStallsOnEdge=0;_videoElement=null;_syncOnNextMetrics=!1;_isInStall=!1;_targetLiveEdge=6;_stallTS=0;_startTS=0;_stalledTimeRanges=[];_stallsToChangeState=3;constructor(e){super("playbackStateController",e),this._onPlaybackMetricsReadyListener=this._eventBus.subscribe(vc,this._onMetricsAvailable),this._onResolutionChangedListener=this._eventBus.subscribe(Ac,this.reset),this._onFragmentRequestedListener=this._eventBus.subscribe(Pf.fragments.fragmentLoadingStarted,this._onFragmentRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Rf.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onPlayingTimeFractionRequestedListener=this._eventBus.subscribe(Of,this._onPlayingTimeFractionRequested)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onPlaybackMetricsReadyListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onFragmentRequestedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onPlayingTimeFractionRequestedListener),this._videoElement?.removeEventListener("canplaythrough",this._onCanPlayThrough),this._videoElement?.removeEventListener("play",this._onPlay),this._videoElement?.removeEventListener("playing",this._onPlaying)}setVideoElement(e){this._videoElement&&(this._videoElement.removeEventListener("canplaythrough",this._onCanPlayThrough),this._videoElement?.removeEventListener("play",this._onPlay),this._videoElement?.removeEventListener("playing",this._onPlaying)),this._videoElement=e,this._videoElement?.addEventListener("canplaythrough",this._onCanPlayThrough),this._videoElement?.addEventListener("play",this._onPlay),this._videoElement?.addEventListener("playing",this._onPlaying)}reset(){this._currentState=kf.IDLE,this._numberOfStallsOnEdge=0}resetPlayingTimeCollector(){this._stallTS=0,this._startTS=0,this._stalledTimeRanges=[]}_handleConfigUpdated(){}_setNextState(e){e!==this._currentState&&(this._eventBus.publish(Ec,{prevState:this._currentState,nextState:e}),this._currentState=e)}_onFragmentRequested(){this._currentState===kf.IDLE&&this._setNextState(kf.LOADING)}_onMetricsAvailable(e){if(this._syncOnNextMetrics&&e.bufferedTimeRanges.length&&(this._syncOnNextMetrics=!1,this._syncToLiveEdge(e.bufferedTimeRanges.slice(-1)[0].end)),this._currentState===kf.IDLE)return;this._isInStall!==e.isStallCandidate&&(this._isInStall=e.isStallCandidate,e.isStallCandidate?this._onStall():this._onPlaying());const t=0===e.playbackPositionDelta&&e.isOnBufferEdge;if(!t)return this._numberOfStallsOnEdge=0,void this._setNextState(kf.PLAYING);t&&this._currentState===kf.PLAYING&&this._numberOfStallsOnEdge++,this._numberOfStallsOnEdge>=this._stallsToChangeState&&this._setNextState(kf.PAUSED),this._isInStall&&this.config.stallDurationToDisableTargetBufferDecrease<=Date.now()-this._stallTS&&this._eventBus.publish(yf,{})}_onCanPlayThrough(){this._startTS||(this._startTS=Date.now()),this.config.autoPlay&&this._videoElement?.play()}_onPlaylistInfoAvailable(e){this._targetLiveEdge=jf(e,3*e.targetDuration)}_onPlay(){this.config.syncToLiveEdge&&this._videoElement&&(this._videoElement.buffered.length?this._syncToLiveEdge(this._videoElement.buffered.end(this._videoElement.buffered.length-1)):this._syncOnNextMetrics=!0)}_getDesiredPosition(e){return e-this.config.syncToLiveDelta*this._targetLiveEdge}_syncToLiveEdge(e){if(!this._videoElement||!this._videoElement?.buffered.length)return;const t=this._getDesiredPosition(e);t>this._videoElement.buffered.start(0)&&t>this._videoElement.currentTime&&(this._videoElement.currentTime=t)}_onPlaying(){this._stallTS&&(this._stalledTimeRanges.push({startTS:this._stallTS,endTS:Date.now()}),this._stallTS=0)}_onStall(){this._stallTS=Date.now()}_onPlayingTimeFractionRequested(){const e=this._calculatePlayingTimeFraction();this._eventBus.publish(Mf,e)}_calculatePlayingTimeFraction(){if(!this._startTS)return null;const e=Date.now()-this.config.playingTimeFractionCollectionWindow;this._stalledTimeRanges=this._stalledTimeRanges.filter((({endTS:t})=>t>e));const t=Date.now()-this._startTS,r=t-this._stalledTimeRanges.reduce(((e,t)=>e+(t.endTS-t.startTS)),0)-(this._stallTS?Date.now()-this._stallTS:0);return this._startTS=Date.now(),r/t}}(0,Wa.__decorate)([mc.default],Ff.prototype,"reset",null),(0,Wa.__decorate)([mc.default],Ff.prototype,"_onFragmentRequested",null),(0,Wa.__decorate)([mc.default],Ff.prototype,"_onMetricsAvailable",null),(0,Wa.__decorate)([mc.default],Ff.prototype,"_onCanPlayThrough",null),(0,Wa.__decorate)([mc.default],Ff.prototype,"_onPlaylistInfoAvailable",null),(0,Wa.__decorate)([mc.default],Ff.prototype,"_onPlay",null),(0,Wa.__decorate)([mc.default],Ff.prototype,"_onPlaying",null),(0,Wa.__decorate)([mc.default],Ff.prototype,"_onPlayingTimeFractionRequested",null);const Uf={fragmentsParsed:"fragmentParser.fragments.fragmentsParsed",videoFragmentParsed:"fragmentParser.fragments.videoFragmentParsed",audioFragmentParsed:"fragmentParser.fragments.audioFragmentParsed"};mc=Ga("eQOGK");class zf extends dc{_cache=[];_lastMsn=-1;constructor(e){super("bufferController",e)}append(e){for(const t of e)if(this._cache.length){if(t.msn!==this._lastMsn){const e=t.msn-this.config.saveLastSegmentsCount+1;this._cache=[...this._cache.filter((t=>t.isInitSection||t.msn>=e)),t]}else this._cache.push(t);this._lastMsn=t.msn}else t.isInitSection&&(this._cache=[t])}getAll(){return this._cache}reset(){this._cache=[],this._lastMsn=-1}destroy(){super.destroy(),this._cache=[],this._lastMsn=-1}}Ga("8NFq9"),Wa=Ga("a8VW4");mc=Ga("eQOGK");class Vf extends dc{state=hc.OK;status="Idle";groups=["buffer","general"];additionalInfo={};_videoElement=null;_checkIntervalId=null;_lastCheckTimestamp=0;_lastFramesTotal=0;_lastFramesDropped=0;_lastFramesPlayed=0;_lastRealFPS=0;_lastPlaybackFPS=0;_lastPlaybackPosition=0;_lastBufferAmount=0;constructor(e){super("bufferController",e),this._logger=Uu(e,"Doppio - BufferMetrics")}destroy(){this._checkIntervalId&&globalThis.clearInterval(this._checkIntervalId)}setVideoElement(e){this._videoElement=e,this._rearmInterval()}removeVideoElement(){this._videoElement=null,this._checkIntervalId&&globalThis.clearInterval(this._checkIntervalId)}_handleConfigUpdated(e){Number.isNaN(e.checkMetricsInterval)||this._rearmInterval()}_rearmInterval(){this._checkIntervalId&&globalThis.clearInterval(this._checkIntervalId),this._checkIntervalId=globalThis.setInterval(this._performCheck,this.config.checkMetricsInterval)}_getCurrentBufferAmount(e){if(!this._videoElement)return this._logger.warn("Cannot compute buffer, there is no video element registered"),0;const{currentTime:t,buffered:r}=this._videoElement;return 0===r.length||t>r.end(r.length-1)?0:e?r.end(r.length-1)-t:0}_getCurrentBufferAmountWithoutGaps(e,t){if(!this._videoElement)return this._logger.warn("Cannot compute buffer, there is no video element registered"),0;if(!e)return 0;const{currentTime:r}=this._videoElement;return e.end-r+t.filter((({start:t})=>t>=e.end)).reduce(((e,t)=>e+(t.end-t.start)),0)}async _performCheck(){if(!this._videoElement)return this._checkIntervalId&&globalThis.clearInterval(this._checkIntervalId),void this._logger.warn("Cannot compute metrics, there is no video element registered");const{creationTime:e,totalVideoFrames:t,droppedVideoFrames:r}=this._videoElement.getVideoPlaybackQuality(),{buffered:n,currentTime:i,paused:o,duration:s,playbackRate:a}=this._videoElement,u=e/1e3;if(!this._lastCheckTimestamp)return this._lastCheckTimestamp=u,this._lastFramesTotal=t,this._lastFramesDropped=r,this._lastFramesPlayed=t-r,void(this._lastPlaybackPosition=i);const l=await(c=this._eventBus,new Promise((e=>{c.publish(Tf,{}),c.subscribeOnce(Lf,(t=>{e(t)}))})));var c;const f=await(e=>new Promise((t=>{e.publish(Of,{}),e.subscribeOnce(Mf,(e=>{t(e)}))})))(this._eventBus)||0,d=t-r,h=u-this._lastCheckTimestamp,p=i-this._lastPlaybackPosition,g=t-this._lastFramesTotal,m=r-this._lastFramesDropped,y=d-this._lastFramesPlayed,_=g/h,v=g/p,b=this._lastRealFPS-_,S=this._lastPlaybackFPS-v,E=Array(n.length).fill(null).map(((e,t)=>{const r={start:n.start(t),end:n.end(t),index:t,isCurrentTimeRange:!1};return(r.start<=i&&i<=r.end||o&&0===t)&&(r.isCurrentTimeRange=!0),r})),w=E.find((({isCurrentTimeRange:e})=>e))||null,T=this._getCurrentBufferAmount(w),L=T<this.config.bufferEdgeThreshold,O=i>0&&!o&&(T<this.config.bufferStallThreshold||0===p),M=w?.index===E.length-1,A=this._getCurrentBufferAmountWithoutGaps(w,E),P={currentTimestamp:e,currentPlaybackPosition:i,playedVideoFrames:d,totalVideoFramesDelta:g,droppedVideoFramesDelta:m,playedVideoFramesDelta:y,playbackSpeed:a,isOnBufferEdge:L,bufferAmount:T,bufferAmountWithoutGaps:A,latency:0,totalVideoFrames:t,droppedVideoFrames:r,realFPS:_,playbackFPS:v,timeDelta:h,playbackPositionDelta:p,playingTimeFraction:f,realFPSDelta:b,playbackFPSDelta:S,isStallCandidate:O,bufferedTimeRanges:E,currentTimeRange:w,isInLastBufferedRange:M,knownDuration:s,isPaused:o,targetBuffer:l};this._lastCheckTimestamp=u,this._lastFramesTotal=t,this._lastFramesDropped=r,this._lastFramesPlayed=t-r,this._lastRealFPS=_,this._lastPlaybackFPS=v,this._lastPlaybackPosition=i,this._lastBufferAmount=T,this._eventBus.publish(vc,P),this.additionalInfo=P}}(0,Wa.__decorate)([mc.default],Vf.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Vf.prototype,"_performCheck",null);const qf=e=>`video/mp4; codecs="${e}"`;class $f extends dc{state=hc.OK;status="Idle";additionalInfo={};groups=["buffer","general"];_sourceBuffer=null;_isSourceBufferReady=!1;_awaitingForNextSourceBuffer=!1;_isVODMode=!1;_closeOnNextSegment=!1;_currentVideoDuration=Number.POSITIVE_INFINITY;_videoElement=null;_mediaSource=null;_knownObjectURL="";_mimeType='video/mp4; codecs="mp4a.40.2,avc1.64001f"';_shouldRecreateSourceBufferOnStall=!1;_sourceBufferStuckTimer=null;constructor(e){super("bufferController",e),this._logger=Uu(e,"Doppio - BufferController"),this._logger.info("Created"),this._eventBus=e,this._bufferCleaner=new Yc(this._eventBus),this._bufferMetrics=new Vf(this._eventBus),this._bufferStallsDetector=new nf(this._eventBus),this._bufferOpsQueue=new rf(this._eventBus),this._playbackSpeedController=new xf(this._eventBus),this._playbackStateController=new Ff(this._eventBus),this._bufferChunksCache=new zf(this._eventBus),this._onFragmentParsedListener=this._eventBus.subscribe(Uf.fragmentsParsed,this._onFragmentsParsed),this._onSoftResetRequestedListener=this._eventBus.subscribe(_c,this._onSoftResetRequested),this._onVODPlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.vodDetected,this._onVODPlaylistDetected),this._onSimplePlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.simpleDetected,this._onLivePlaylistDetected),this._onLLPlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.llDetected,this._onLivePlaylistDetected),this._onSourceBufferOperationRequestedListener=this._eventBus.subscribe(Sc,this._onSourceBufferOperationRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Rf.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onEndOfStreamReachedListener=this._eventBus.subscribe(wc,this._onEndOfStreamReached),this._onResolutionCodecChangeRequestListener=this._eventBus.subscribe(Lc,this._onResolutionCodecChangeRequest),this._onResolutionChangeListener=this._eventBus.subscribe(Ac,this._onResolutionChange),this._onPlaybackStallChangedListener=this._eventBus.subscribe(bc,this._onPlaybackStallChanged),this._onSourceBufferStuckListener=this._eventBus.subscribe(Oc,this._onSourceBufferStuck),this._gapController=new df(this._eventBus)}attachVideoElement(e){this._logger.info("Attach video element"),this._bufferMetrics.setVideoElement(e),this._playbackSpeedController.setVideoElement(e),this._gapController.setVideoElement(e),this._bufferCleaner.setVideoElement(e),this._playbackStateController.setVideoElement(e),this._videoElement=e,this._recreateMediaSource()}scheduleSourceBufferRecreation(){this._awaitingForNextSourceBuffer=!0}detachVideoElement(){if(this._logger.info("Detaching video element"),this._eventBus.publish(_c,{}),this._bufferMetrics.removeVideoElement(),this._playbackSpeedController.removeVideoElement(),this._gapController.removeVideoElement(),this._bufferCleaner.removeVideoElement(),this._playbackStateController.setVideoElement(null),"open"===this._mediaSource?.readyState&&this._videoElement&&this._videoElement.readyState>=this._videoElement.HAVE_METADATA)try{this._logger.verbose("Calling endOfStream of mediaSource"),this._mediaSource.endOfStream()}catch(tv){this._logger.warn(`Error occurred while detaching video element. Ignoring it ${tv.message}`)}try{this._mediaSource&&this._sourceBuffer&&([...this._mediaSource.sourceBuffers].includes(this._sourceBuffer)&&(this._logger.debug("Removing sourceBuffer from MediaSource"),this._mediaSource.removeSourceBuffer(this._sourceBuffer)),this._sourceBuffer=null)}catch(tv){this._logger.error(`Failed to reset source buffer ${tv.message}`)}if(this._mediaSource&&(this._mediaSource.removeEventListener("sourceopen",this._onSourceBufferOpened),this._mediaSource.removeEventListener("sourceclose",this._onSourceBufferClosed),this._mediaSource.removeEventListener("error",this._onSourceBufferClosed)),this._videoElement){if(this._knownObjectURL){const e=this._knownObjectURL;setTimeout((()=>{this._logger.debug(`Revoking Object URL ${e}`),globalThis.URL.revokeObjectURL(e)}),100)}this._videoElement.src===this._knownObjectURL&&(this._videoElement.removeAttribute("src"),this._videoElement.load())}this._mediaSource=null,this._videoElement=null,this._knownObjectURL="",this._isSourceBufferReady=!1}destroy(){super.destroy(),this._logger.info("Destroy"),this.detachVideoElement(),this._eventBus.unsubscribe(this._onFragmentParsedListener),this._eventBus.unsubscribe(this._onSoftResetRequestedListener),this._eventBus.unsubscribe(this._onSourceBufferOperationRequestedListener),this._eventBus.unsubscribe(this._onVODPlaylistDetectedListener),this._eventBus.unsubscribe(this._onSimplePlaylistDetectedListener),this._eventBus.unsubscribe(this._onLLPlaylistDetectedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onEndOfStreamReachedListener),this._eventBus.unsubscribe(this._onResolutionCodecChangeRequestListener),this._eventBus.unsubscribe(this._onResolutionChangeListener),this._eventBus.unsubscribe(this._onPlaybackStallChangedListener),this._eventBus.unsubscribe(this._onSourceBufferStuckListener),this._gapController.destroy(),this._bufferMetrics.destroy(),this._bufferOpsQueue.destroy(),this._bufferCleaner.destroy(),this._playbackSpeedController.destroy(),this._playbackStateController.destroy(),this._bufferChunksCache.destroy(),this._disarmSourceBufferStuckTimer()}reset(){this._disarmSourceBufferStuckTimer(),this._recreateSourceBuffer(),this._bufferChunksCache.reset()}_onFragmentsParsed(e){this._awaitingForNextSourceBuffer&&(this._awaitingForNextSourceBuffer=!1,this._recreateSourceBuffer()),this._bufferOpsQueue.addBufferOperation((()=>{this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration)}),(()=>{this._logger.warn("Could not set mediaSource duration")}),"setMediaSourceDuration");for(const t of e)this._bufferOpsQueue.addBufferOperation((e=>{this._logger.debug(`Adding ${t.getMsnPn()} to buffer`),e.appendBuffer(t.data),t.msn>-1&&(this._logger.debug(`${t.startTs} -> ${t.endTs} loaded (${t.getMsnPn()})`),this._eventBus.publish(Tc,t)),this._mediaSource&&t.endTs===this._mediaSource.duration&&this._eventBus.publish(wc,{})}),((e,r)=>{this._logger.error(`${t.url} (${t.getMsnPn()}) cannot be added to buffer: ${r}`)}),"appendBuffer");this._sourceBuffer||this._bufferChunksCache.append(e),this._bufferOpsQueue.addBufferOperation((()=>{this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration,this._videoElement&&0===this._videoElement.currentTime&&this._videoElement.buffered.length>0&&this._videoElement.buffered.start(0)>0&&(this._videoElement.currentTime=this._videoElement.buffered.start(0)))}),(()=>{this._logger.warn("Could not change current time of video")}),"setVideoElementStartPosition")}_onSourceBufferOpened(){if(this._disarmSourceBufferStuckTimer(),this._mediaSource){"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration),this._isSourceBufferReady=!0,this._sourceBuffer=this._mediaSource.addSourceBuffer(this._mimeType),this._bufferOpsQueue.setSourceBuffer(this._sourceBuffer);const e=this._bufferChunksCache.getAll();this._bufferChunksCache.destroy(),e.length&&this._onFragmentsParsed(e)}}_recreateSourceBuffer(){this._logger.info("Will recreate source buffer"),this._bufferOpsQueue.immediatelyRecreateSourceBuffer(this._mediaSource),this._videoElement&&(this._videoElement.currentTime=0)}_onResolutionCodecChangeRequest({codec:e}){if(e){const t=qf(e);t!==this._mimeType&&(this._mimeType=t)}}_onSourceBufferClosed(){this._isSourceBufferReady=!1}_onSoftResetRequested(){this._shouldRecreateSourceBufferOnStall=!1,this._awaitingForNextSourceBuffer=!0,this._playbackStateController.resetPlayingTimeCollector()}_endOfStreamReached(){this._mediaSource&&(this._closeOnNextSegment=!0)}_onSourceBufferOperationRequested(e){this._bufferOpsQueue.addBufferOperation(e)}_onLivePlaylistDetected(){this._isVODMode=!1,this._bufferCleaner.setVODMode(!1),this._gapController.setIsVod(!1),this._currentVideoDuration=Number.POSITIVE_INFINITY,this._playbackSpeedController.resume(),this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration)}_onVODPlaylistDetected(){this._isVODMode=!0,this._bufferCleaner.setVODMode(!0),this._playbackSpeedController.pause(),this._gapController.setIsVod(!0)}_onPlaybackStallChanged(e){e&&this._shouldRecreateSourceBufferOnStall&&(this._logger.info("Will recreate source buffer, because playback stall was detected"),this._onSoftResetRequested())}_onPlaylistInfoAvailable(e){e&&e.playlists&&e.playlists[0].attributes.CODECS&&(this._mimeType=qf(e.playlists[0].attributes.CODECS),this._bufferOpsQueue.addBufferOperation((e=>{e.changeType(this._mimeType)}),(()=>{this._logger.warn("Could not change codecs")}),"changeType")),("VOD"===e.playlistType||e.endList)&&(this._currentVideoDuration=e.segments.reduce(((e,t)=>e+t.duration),0),this._mediaSource&&"open"===this._mediaSource.readyState&&(this._mediaSource.duration=this._currentVideoDuration,this._mediaSource.setLiveSeekableRange(0,this._currentVideoDuration)))}_onEndOfStreamReached(){this._bufferOpsQueue.addBufferOperation((()=>{this._logger.info("Setting endOfStream"),this._mediaSource?.endOfStream()}))}_onResolutionChange(){this.config.recreateSourceBufferOnResolutionChange?(this._logger.info("Will recreate source buffer, because resolution was changed, and config.recreateSourceBufferOnResolutionChange is true"),this._onSoftResetRequested()):this._shouldRecreateSourceBufferOnStall=!0}_onSourceBufferStuck(){this._onSoftResetRequested()}_recreateMediaSource(){this._mediaSource&&(this._mediaSource.removeEventListener("sourceopen",this._onSourceBufferOpened),this._mediaSource.removeEventListener("sourceclose",this._onSourceBufferClosed),this._mediaSource.removeEventListener("error",this._onSourceBufferClosed)),this._mediaSource=new $f.MediaSource,this._mediaSource.addEventListener("sourceopen",this._onSourceBufferOpened,{once:!0}),this._mediaSource.addEventListener("sourceclose",this._onSourceBufferClosed),this._mediaSource.addEventListener("error",this._onSourceBufferClosed),this._videoElement&&(this._videoElement.src=globalThis.URL.createObjectURL(this._mediaSource)),this._sourceBufferStuckTimer=setTimeout((()=>{this._recreateMediaSource()}),this.config.sourceBufferStuckTimeout)}_disarmSourceBufferStuckTimer(){this._sourceBufferStuckTimer&&clearTimeout(this._sourceBufferStuckTimer)}get additionalModules(){return{gapController:this._gapController,bufferMetrics:this._bufferMetrics,playbackSpeed:this._playbackSpeedController}}static get MediaSource(){if(window?.ManagedMediaSource)return window.ManagedMediaSource;if(window?.MediaSource)return window.MediaSource;throw new Error("No Media Source candidates found")}}(0,Wa.__decorate)([mc.default],$f.prototype,"_onFragmentsParsed",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onSourceBufferOpened",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onResolutionCodecChangeRequest",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onSourceBufferClosed",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onSoftResetRequested",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_endOfStreamReached",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onSourceBufferOperationRequested",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onLivePlaylistDetected",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onVODPlaylistDetected",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onPlaybackStallChanged",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onPlaylistInfoAvailable",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onEndOfStreamReached",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onResolutionChange",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_onSourceBufferStuck",null),(0,Wa.__decorate)([mc.default],$f.prototype,"_recreateMediaSource",null);class Gf extends Eu{}Ga("8NFq9"),Wa=Ga("a8VW4");const Wf="fragmentsFilter.fragmentsReleased",Yf="fragmentsFilter.problemDetected";mc=Ga("eQOGK");class Hf extends dc{_localFragmentParser=null;_workerFragmentParser=null;_fragmentsCache=[];_isCacheRequired=!1;constructor(e){super("fragmentParser",e),this._logger=Uu(e,"Doppio - FragmentParser"),this._onFragmentReleasedListener=this._eventBus.subscribe(Wf,this._onFragmentsLoaded),this._onVODPlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.vodDetected,this._onVODPlaylistDetected),this._onSimplePlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.simpleDetected,this._onLivePlaylistDetected),this._onLLPlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.llDetected,this._onLivePlaylistDetected),this._onReleaseFromCacheRequestedListener=this._eventBus.subscribe(gc.fragments.requestReleaseFromCache,this._onReleaseFromCacheRequested)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentReleasedListener),this._eventBus.unsubscribe(this._onVODPlaylistDetectedListener),this._eventBus.unsubscribe(this._onSimplePlaylistDetectedListener),this._eventBus.unsubscribe(this._onLLPlaylistDetectedListener),this._eventBus.unsubscribe(this._onReleaseFromCacheRequestedListener)}_handleConfigUpdated(){}_onReleaseFromCacheRequested({msn:e}){const t=this._fragmentsCache.find((t=>t.msn===e));t&&this._eventBus.publish(Uf.fragmentsParsed,[t])}_onLivePlaylistDetected(){this._isCacheRequired=!1,this._fragmentsCache=[]}_onVODPlaylistDetected(){this._isCacheRequired=!0}async _onFragmentsLoaded(e){this._logger.verbose(`Sending fragment ${e.map((e=>e.getMsnPn()))} for parsing`),this._eventBus.publish(Uf.fragmentsParsed,e)}}(0,Wa.__decorate)([mc.default],Hf.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],Hf.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Hf.prototype,"_onReleaseFromCacheRequested",null),(0,Wa.__decorate)([mc.default],Hf.prototype,"_onLivePlaylistDetected",null),(0,Wa.__decorate)([mc.default],Hf.prototype,"_onVODPlaylistDetected",null),(0,Wa.__decorate)([mc.default],Hf.prototype,"_onFragmentsLoaded",null),Ga("8NFq9"),Wa=Ga("a8VW4");const Qf=e=>{const t=new DataView(e);let r=0;const n=[];for(;r<e.byteLength;){const i=t.getUint32(r,!1),o={size:i,name:(new TextDecoder).decode(e.slice(r+4,r+8)),payload:e.slice(r+8,r+i)};r+=i,n.push(o)}return n},Kf="fragmentsQueue.fragmentReleased";mc=Ga("eQOGK");const Xf="fragmentsBufferEvents.saveData";class Jf extends dc{_lastKnownInitSectionNumberOfTracks=null;constructor(e){super("fragmentsFilter",e),this._logger=Uu(e,"Doppio - FragmentsFilter"),this._onFragmentReleasedListenerToken=this._eventBus.subscribe(Kf,this._onFragmentReleasedFromQueue)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentReleasedListenerToken)}_onFragmentReleasedFromQueue(e){const t=[];for(const r of e)if(r.isInitSection)this._parseInitSection(r),t.push(r);else{const e=this._parseMediaFragment(r);this.config.filterOutInconsistentTracks&&!e||t.push(r)}this._eventBus.publish(Wf,t)}_parseInitSection(e){this._logger.debug("Parsing init section");const t=Qf(e.data),r=t.find((({name:e})=>"moov"===e))||null;if(this._logger.verbose(`Found following root boxes: ${t.map((({name:e})=>e)).join(", ")}`),r){const e=Qf(r.payload);this._logger.verbose(`Found following child of moov boxes: ${e.map((({name:e})=>e)).join(", ")}`);const t=e.filter((({name:e})=>"trak"===e));this._logger.info(`Found ${t.length} trak boxes`),this._lastKnownInitSectionNumberOfTracks=t.length}}_parseMediaFragment(e){if(null===this._lastKnownInitSectionNumberOfTracks)return!0;const t=Qf(e.data),r=t.filter((({name:e})=>"sidx"===e));this._logger.verbose(`Found following root boxes: ${t.map((({name:e})=>e)).join(", ")}`);const n=t.filter((({name:e})=>"moof"===e)),i=[];let o=!1;r.length>0&&r.length%this._lastKnownInitSectionNumberOfTracks!=0&&(this._logger.warn(`Inconsistent media chunk: number of SIDX boxes is invalid, ${r.length} found, ${this._lastKnownInitSectionNumberOfTracks} expected`),i.push(`Number of SIDX boxes (${r.length}) is not equal to the known amount of media tracks (${this._lastKnownInitSectionNumberOfTracks})`),o=!0);for(const s of n){const e=Qf(s.payload),t=e.filter((({name:e})=>"traf"===e));this._logger.verbose(`Found following child of moof boxes: ${e.map((({name:e})=>e)).join(", ")}`),t.length!==this._lastKnownInitSectionNumberOfTracks&&(this._logger.warn(`Inconsistent media chunk: number of TRAF boxes is invalid, ${t.length} found, ${this._lastKnownInitSectionNumberOfTracks} expected`),i.push(`Number of TRAF boxes (${t.length}) is not equal to the known amount of media tracks (${this._lastKnownInitSectionNumberOfTracks})`),o=!0)}return o&&(this._logger.warn(`Fragment ${e.getMsnPn()} should be reported`),this._eventBus.publish(Yf,{fragment:e.url.split("/").slice(-1)[0],reason:i.join("; ")}),this._eventBus.publish(Xf,{})),o}}let Zf;var ed;(0,Wa.__decorate)([mc.default],Jf.prototype,"_onFragmentReleasedFromQueue",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK"),(ed=Zf||(Zf={})).UNKNOWN="unknown",ed.INDEPENDENT="independent",ed.PART="part";class td{state=hc.OK;status="Idle";groups=["queue"];_queuedFragments=[];_additionalInfo={};constructor(e){this._eventBus=e,this._logger=Uu(e,"Doppio - FragmentsQueue"),this._fragmentRequestedListenerToken=this._eventBus.subscribe(Pf.fragments.fragmentLoadingStarted,this._onFragmentRequested),this._onFragmentsDetectedListenerToken=this._eventBus.subscribe(gc.fragments.fragmentsDetected,this._onFragmentsDetected),this._softResetRequestedListenerToken=this._eventBus.subscribe(_c,this._onSoftResetRequested),this._fragmentLoadedListenerToken=this._eventBus.subscribe(Pf.fragments.fragmentLoaded,this._onFragmentLoaded),this._fragmentAbortedListenerToken=this._eventBus.subscribe(Pf.fragments.fragmentLoadingAborted,this._onFragmentAborted),this._fragmentErrorListenerToken=this._eventBus.subscribe(Pf.fragments.fragmentLoadingError,this._onFragmentAborted),this._onFragmentReleaseFromCacheRequestedToken=this._eventBus.subscribe(gc.fragments.requestReleaseFromCache,this._onFragmentReleasedFromCache),this._onResolutionChangedListenerToken=this._eventBus.subscribe(Ac,this._onSoftResetRequested)}getCurrentQueue(){return this._queuedFragments}destroy(){this._eventBus.unsubscribe(this._onFragmentsDetectedListenerToken),this._eventBus.unsubscribe(this._fragmentLoadedListenerToken),this._eventBus.unsubscribe(this._fragmentRequestedListenerToken),this._eventBus.unsubscribe(this._softResetRequestedListenerToken),this._eventBus.unsubscribe(this._onResolutionChangedListenerToken),this._eventBus.unsubscribe(this._fragmentErrorListenerToken),this._eventBus.unsubscribe(this._fragmentAbortedListenerToken),this._eventBus.unsubscribe(this._onFragmentReleaseFromCacheRequestedToken),this.reset()}reset(){this._queuedFragments=[],this.status="Idle"}_onSoftResetRequested(){this.reset()}_onFragmentRequested(e){this._queuedFragments.find((({url:t})=>e.url===t))?this._logger.warn(`Same fragment (${e.getMsnPn()}) was already in queue! Ignoring it`):(this._logger.verbose(`Add fragment ${e.getMsnPn()} to queue`),e.goToLifecycleStage("addedToQueue"),this._queuedFragments.push(e),this.status="Awaiting fragments")}_onFragmentLoaded(e){const t=this._queuedFragments.find((({msn:t,pn:r})=>t===e.msn&&r===e.pn));t?(this._logger.debug(`Fragment ${e.getMsnPn()} was resolved finally`),t.data=e.data,this._checkQueue()):this._logger.warn(`Received fragment ${e.getMsnPn()} was not in queue. Pls check it`)}_onFragmentReleasedFromCache({msn:e}){this._queuedFragments=this._queuedFragments.filter((t=>t.msn===e)),this._checkQueue()}_onFragmentsDetected(e){e.forEach((e=>{const t=this._queuedFragments.find((({msn:t,pn:r})=>t===e.msn&&r===e.pn));t&&(t.independent=e.independent)})),this._checkQueue()}_onFragmentAborted(e){const t=this._queuedFragments.filter((({msn:t})=>t<=e.msn));this._queuedFragments=this._queuedFragments.filter((e=>!t.includes(e))),this._checkQueue()}_checkQueue(){if(this._logger.verbose("Checking queue"),!this._queuedFragments.length)return void this._logger.verbose("Queue is empty. Skipping");if(!this._queuedFragments[0].data||this._queuedFragments[0].independent===Zf.UNKNOWN)return void this._logger.verbose("First queued fragment is empty. Skipping");const e=this._queuedFragments.findIndex((e=>!e.data||e.independent===Zf.UNKNOWN));if(-1===e)return this._logger.verbose("Looks like whole queue was resolved"),void this._releaseFragmentsFromQueue(this._queuedFragments);this._logger.verbose(`${e} fragments ready. Releasing them`);const t=this._queuedFragments.slice(0,e);this._releaseFragmentsFromQueue(t)}_releaseFragmentsFromQueue(e){this._logger.verbose(`Release fragment  ${e.map((e=>e.getMsnPn()))}from queue`),e.forEach((e=>e.goToLifecycleStage("releasedFromQueue"))),this._queuedFragments=this._queuedFragments.filter((t=>!e.includes(t))),this._eventBus.publish(Kf,e),this.status=this._queuedFragments.length>0?this.status:"Idle"}get additionalInfo(){return{...this._additionalInfo,awaitingFragments:this.getCurrentQueue().map((e=>({...e,data:void 0})))}}}(0,Wa.__decorate)([mc.default],td.prototype,"_onSoftResetRequested",null),(0,Wa.__decorate)([mc.default],td.prototype,"_onFragmentRequested",null),(0,Wa.__decorate)([mc.default],td.prototype,"_onFragmentLoaded",null),(0,Wa.__decorate)([mc.default],td.prototype,"_onFragmentReleasedFromCache",null),(0,Wa.__decorate)([mc.default],td.prototype,"_onFragmentsDetected",null),(0,Wa.__decorate)([mc.default],td.prototype,"_onFragmentAborted",null),(0,Wa.__decorate)([mc.default],td.prototype,"_releaseFragmentsFromQueue",null);const rd=new class{_ooEndpoint="/api/front/v2/logs/streaming";async reportError(e,t){try{await fetch(this._ooEndpoint,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({doppioLifecycleError:{errorType:e,context:t}})})}catch(e){}}};let nd;var id;let od;var sd;Ga("8NFq9"),Wa=Ga("a8VW4"),Ga("8NFq9"),Wa=Ga("a8VW4"),Ga("8NFq9"),Wa=Ga("a8VW4"),(id=nd||(nd={})).UNKNOWN="unknown",id.LOADING="loading",id.LOADED="loaded",id.ABORTED="aborted",id.ERROR="error",id.DESTROYED="destroyed",Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK"),(sd=od||(od={})).FETCH="fetch",sd.ABORT="abort",sd.DESTROY="destroy",sd.DATA_READY="dataReady",sd.STATS_READY="statsReady",sd.CHANGE_STATE="changeState",sd.ERROR="error",sd.REDIRECT_DETECTED="redirectDetected";const ad=e=>{const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;return e.forEach((e=>{r.set(e,n),n+=e.length})),r};class ud{requestUrl="";realUrl="";mode="";_dataChunks=[];_receivedLength=0;_abortController=new AbortController;_startLoadTimestamp=0;_isAborted=!1;constructor(e){this._config=e}abort(){this._isAborted=!0,this._abortController.abort()}async fetch(e,t){try{globalThis.performance&&globalThis.performance.clearResourceTimings&&globalThis.performance.clearResourceTimings(),this._config.onChangeState(nd.LOADING),this._startLoadTimestamp=Date.now(),this.requestUrl=e,this.mode=t,this._receivedLength=0;const r=new Request(this.requestUrl),n={signal:this._abortController.signal};this._config.requestCustomReferer&&(n.headers={"X-Referer":this._config.requestCustomReferer});const i=await fetch(r,n);this.realUrl=i.url;const o=i.body?.getReader();if(!o)throw new Error;for(;;){const{done:e,value:t}=await o.read();if(e)break;this._dataChunks.push(t),this._receivedLength+=t.length}if(!i.ok&&(!i.status||i.status>399))throw this.error={status:i.status,statusText:i.statusText||this._receivedLength?String.fromCharCode(...ad(this._dataChunks)):""},new Error;const s=ad(this._dataChunks).buffer;this._config.onDataReady("text"!==this.mode?s:new TextDecoder("utf-8").decode(s)),this._config.onStatsReady(this._getNetworkStats()),this.realUrl!==this.requestUrl&&this._config.onRedirectDetected(this.requestUrl,this.realUrl),this._config.onChangeState(nd.LOADED,{realUrl:i.url,status:i.status})}catch(e){if(this._isAborted)return this._config.onStatsReady(this._getNetworkStats()),void this._config.onChangeState(nd.ABORTED);this.error||(this.error={status:-1,statusText:e.toString()}),this._config.onError(this.error),this._config.onChangeState(nd.ERROR,{status:this.error.status})}}_getNetworkStats(){const e=Date.now()-this._startLoadTimestamp,t="text"===this.mode?"text":"binary";return((e,t,r,n)=>{const i=((e,t,r)=>{if(!globalThis.performance||!globalThis.performance.getEntriesByName)return null;const n=globalThis.performance.getEntriesByName(e)[0];if(!n)return null;const{connectStart:i,connectEnd:o,domainLookupEnd:s,duration:a,domainLookupStart:u,encodedBodySize:l,responseStart:c,requestStart:f}=n,d=(l||t)/1024,h=a;return globalThis.performance.clearResourceTimings(),{connectDuration:o-i,domainLookupDuration:s-u,sizeInKb:d,ttfb:c-f,downloadDuration:h,calculatedSpeed:d/(h/1e3)*8,type:r,url:e}})(e,r,n);return i||{connectDuration:0,domainLookupDuration:0,sizeInKb:r/1024,ttfb:0,url:e,downloadDuration:t,calculatedSpeed:r/1024/(t/1e3)*8,type:n}})(this.requestUrl,e,this._receivedLength,t)}}const ld=[nd.ERROR,nd.LOADED,nd.ABORTED],cd=new Map,fd=async(e="",t)=>{let r=cd.get(e);if(!r&&t){const t=URL.createObjectURL(new Blob([`${Va('let e;var t;(t=e||(e={})).FETCH="fetch",t.ABORT="abort",t.DESTROY="destroy",t.DATA_READY="dataReady",t.STATS_READY="statsReady",t.CHANGE_STATE="changeState",t.ERROR="error",t.REDIRECT_DETECTED="redirectDetected";const r=e=>{const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let a=0;return e.forEach((e=>{r.set(e,a),a+=e.length})),r};let a;var o;(o=a||(a={})).UNKNOWN="unknown",o.LOADING="loading",o.LOADED="loaded",o.ABORTED="aborted",o.ERROR="error",o.DESTROYED="destroyed";const s=(e,t,r,a)=>{const o=((e,t,r)=>{if(!globalThis.performance||!globalThis.performance.getEntriesByName)return null;const a=globalThis.performance.getEntriesByName(e)[0];if(!a)return null;const{connectStart:o,connectEnd:s,domainLookupEnd:n,duration:i,domainLookupStart:l,encodedBodySize:d,responseStart:c,requestStart:u}=a,h=(d||t)/1024,g=i;return globalThis.performance.clearResourceTimings(),{connectDuration:s-o,domainLookupDuration:n-l,sizeInKb:h,ttfb:c-u,downloadDuration:g,calculatedSpeed:h/(g/1e3)*8,type:r,url:e}})(e,r,a);return o||{connectDuration:0,domainLookupDuration:0,sizeInKb:r/1024,ttfb:0,url:e,downloadDuration:t,calculatedSpeed:r/1024/(t/1e3)*8,type:a}};class $23b27e332a61b135$export$df6d58d46cb3f0ea{requestUrl="";realUrl="";mode="";_dataChunks=[];_receivedLength=0;_abortController=new AbortController;_startLoadTimestamp=0;_isAborted=!1;constructor(e){this._config=e}abort(){this._isAborted=!0,this._abortController.abort()}async fetch(e,t){try{globalThis.performance&&globalThis.performance.clearResourceTimings&&globalThis.performance.clearResourceTimings(),this._config.onChangeState(a.LOADING),this._startLoadTimestamp=Date.now(),this.requestUrl=e,this.mode=t,this._receivedLength=0;const o=new Request(this.requestUrl),s={signal:this._abortController.signal};this._config.requestCustomReferer&&(s.headers={"X-Referer":this._config.requestCustomReferer});const n=await fetch(o,s);this.realUrl=n.url;const i=n.body?.getReader();if(!i)throw new Error;for(;;){const{done:e,value:t}=await i.read();if(e)break;this._dataChunks.push(t),this._receivedLength+=t.length}if(!n.ok&&(!n.status||n.status>399))throw this.error={status:n.status,statusText:n.statusText||this._receivedLength?String.fromCharCode(...r(this._dataChunks)):""},new Error;const l=r(this._dataChunks).buffer;this._config.onDataReady("text"!==this.mode?l:new TextDecoder("utf-8").decode(l)),this._config.onStatsReady(this._getNetworkStats()),this.realUrl!==this.requestUrl&&this._config.onRedirectDetected(this.requestUrl,this.realUrl),this._config.onChangeState(a.LOADED,{realUrl:n.url,status:n.status})}catch(e){if(this._isAborted)return this._config.onStatsReady(this._getNetworkStats()),void this._config.onChangeState(a.ABORTED);this.error||(this.error={status:-1,statusText:e.toString()}),this._config.onError(this.error),this._config.onChangeState(a.ERROR,{status:this.error.status})}}_getNetworkStats(){const e=Date.now()-this._startLoadTimestamp,t="text"===this.mode?"text":"binary";return s(this.requestUrl,e,this._receivedLength,t)}}const n=new Map;self.addEventListener("message",(({data:t})=>{if(t.type)switch(t.type){case e.ABORT:{const e=n.get(t.payload.url);e&&e.abort();break}case e.DESTROY:{const e=n.get(t.payload.url);e&&e.abort(),n.delete(t.payload.url);break}case e.FETCH:{const r=new $23b27e332a61b135$export$df6d58d46cb3f0ea({requestCustomReferer:t.payload.requestCustomReferer,onDataReady:r=>{self.postMessage({type:e.DATA_READY,payload:{binaryData:r,url:t.payload.url}})},onChangeState:(r,a)=>{self.postMessage({type:e.CHANGE_STATE,payload:{newState:r,url:t.payload.url,metadata:a}})},onStatsReady:r=>{self.postMessage({type:e.STATS_READY,payload:{stats:r,url:t.payload.url}})},onError:r=>{self.postMessage({type:e.ERROR,payload:{error:r,url:t.payload.url}})},onRedirectDetected:(t,r)=>{self.postMessage({type:e.REDIRECT_DETECTED,payload:{url:t,responseUrl:r}})}});r.fetch(t.payload.url,t.payload.mode),n.set(t.payload.url,r);break}}}));')}`],{type:"application/javascript"}));if(r=new Worker(t),!r)throw new Error;cd.set(e,r)}return r||null};class dd{data=null;error=null;stats=null;realUrl="";_state=nd.UNKNOWN;_retriesAmount=0;_timeoutAbortHandler=null;_retryTimeoutHandler=null;_fetcherWorker=null;_fetcherSimple=null;_workerMode=!1;constructor(e,t){if(this._eventBus=t,this._logger=Uu(this._eventBus,"Doppio - NetworkLoader"),!e.url||!e.onStateChanged)throw new Error("Invalid config");this._workerMode=!!e.workerMode,this._config=e,this._logger.debug("Created with config",e),this._recreateFetcherAndAutoload()}startLoad(){return this._state===nd.UNKNOWN&&(this._armTimeoutAbort(),this._logger.debug(`Starting load ${this._config.url}`),this._startAsyncLoad(),!0)}cancel(e){this._disarmTimeoutAbort(),this._disarmRetryTimeout(),this.error={status:-1,statusText:`Cancelled because of ${e??"unknown reason"}`},ld.includes(this._state)||(this._logger.warn(`${this._config.url} loading was cancelled with reason ${e}, current status is ${this._state}`),this._workerMode?this._fetcherWorker?.postMessage({type:od.ABORT,payload:{url:this._config.url}}):this._fetcherSimple?.abort())}destroy(){ld.includes(this._state)||(this.cancel("Destroyed"),this._state=nd.DESTROYED),this._disarmTimeoutAbort(),this._disarmRetryTimeout(),this.data=null,this.error=null,this._removeFetcherFromWorker()}_onAbortTimeoutFired(){this._logger.info(`${this._config.url} loading timeout`),this.cancel("Loading timeout")}_armRetryTimeout(){this._logger.info(`Retry loading ${this._retriesAmount} time`),this._disarmRetryTimeout(),this._setNewState(nd.UNKNOWN),this._retriesAmount++,this._retryTimeoutHandler=globalThis.setTimeout((()=>{this.startLoad()}),2**this._retriesAmount)}_disarmRetryTimeout(){this._retryTimeoutHandler&&globalThis.clearTimeout(this._retryTimeoutHandler)}_armTimeoutAbort(){!this._config.loadingTimeout||this._config.loadingTimeout<=0?this._logger.debug("LoadingTimeout is not defined or below zero! Skipping abort timeout arming"):(this._logger.debug("Arming loading abort timeout"),this._timeoutAbortHandler&&(this._logger.debug("Another timeout already armed. Cancel it"),this._disarmTimeoutAbort()),this._timeoutAbortHandler=setTimeout((()=>{this._onAbortTimeoutFired()}),this._config.loadingTimeout))}_disarmTimeoutAbort(){this._timeoutAbortHandler&&(this._logger.debug("Disarming abort timeout"),clearTimeout(this._timeoutAbortHandler))}_setNewState(e,t){this._state!==e&&(e===nd.LOADED&&this._logger.verbose(`${this._config.url} loading finished`),ld.includes(e)&&(this._eventBus.publish(Fc.networkRequestSettled,{response:{url:this.url,body:this.data,timestamp:performance.now(),...t||{}}}),this._removeFetcherFromWorker(),this._disarmTimeoutAbort()),this._logger.verbose(`Loading ${this._config.url}, state transition: ${this._state} -> ${e}`),[nd.ABORTED,nd.ERROR].includes(e)&&this._state!==nd.DESTROYED&&this._config.maxRetries&&this._config.baseRetryTimeout&&this._retriesAmount<this._config.maxRetries?this._armRetryTimeout():(this._config.onStateChanged(this._state,e,this),this._state=e))}_removeFetcherFromWorker(){this._fetcherWorker?.removeEventListener("message",this._handleWorkerMessage),this._fetcherWorker?.postMessage({type:od.DESTROY,payload:{url:this._config.url}})}async _startAsyncLoad(){if(this._workerMode){const e={type:od.FETCH,payload:{url:this._config.url,mode:this._config.mode,requestCustomReferer:this._config.requestCustomReferer}};this._fetcherWorker?.postMessage(e)}else this._fetcherSimple?.fetch(this._config.url,this._config.mode)}async _recreateFetcherAndAutoload(){if(this._fetcherSimple?.abort(),this._fetcherWorker?.postMessage({type:od.DESTROY,payload:{url:this._config.url}}),this._workerMode)try{this._fetcherWorker=await fd(this._eventBus.getAppId(),!0),this._fetcherWorker?.addEventListener("message",this._handleWorkerMessage)}catch(tv){return this._logger.warn("Could not use worker for network request. Fallback to simple mode",{error:tv}),this._workerMode=!1,void this._recreateFetcherAndAutoload()}else this._fetcherSimple=new ud({requestCustomReferer:this._config.requestCustomReferer,onDataReady:this._handleDataReady,onChangeState:this._setNewState,onStatsReady:this._handleLoadStatsReady,onError:this._handleError,onRedirectDetected:this._handleRedirectDetected});this._config.autoLoad&&(this._logger.debug("AutoLoad config field set to true. Starting load"),globalThis.queueMicrotask((()=>{this.startLoad()})))}_handleDataReady(e){this.data=e}_handleLoadStatsReady(e){this.stats=e,this._eventBus.publish(Uc.statsReady,e)}_handleError(e){this.error=e,this._logger.warn(`Cannot load ${this._config.url}`,e)}_handleRedirectDetected(e,t){this._eventBus.publish(Fc.browserRedirectDetected,{requestUrl:e,responseUrl:t})}_handleWorkerMessage({data:e}){if(e.payload.url===this._config.url&&e.type)switch(e.type){case od.DATA_READY:this._handleDataReady(e.payload.binaryData);break;case od.CHANGE_STATE:this._setNewState(e.payload.newState,e.payload.metadata);break;case od.STATS_READY:this._handleLoadStatsReady(e.payload.stats);break;case od.ERROR:this._handleError(e.payload.error);break;case od.REDIRECT_DETECTED:this._handleRedirectDetected(e.payload.url,e.payload.responseUrl)}}get url(){return this._config.url}}(0,Wa.__decorate)([mc.default],dd.prototype,"_setNewState",null),(0,Wa.__decorate)([mc.default],dd.prototype,"_handleDataReady",null),(0,Wa.__decorate)([mc.default],dd.prototype,"_handleLoadStatsReady",null),(0,Wa.__decorate)([mc.default],dd.prototype,"_handleError",null),(0,Wa.__decorate)([mc.default],dd.prototype,"_handleRedirectDetected",null),(0,Wa.__decorate)([mc.default],dd.prototype,"_handleWorkerMessage",null),mc=Ga("eQOGK");class hd extends dc{state=hc.OK;status="Idle";groups=["loader"];additionalInfo={loadingFragments:{}};_lastRequestedFragments=[];_pendingFragments=[];_loaders=[];constructor(e){super("fragmentLoader",e),this._logger=Uu(this._eventBus,"Doppio - FragmentLoader"),this._fragmentsDetectedSubscription=this._eventBus.subscribe(gc.fragments.fragmentsDetected,this._onFragmentsDetected),this._fragmentAddedToBufferSubscription=this._eventBus.subscribe(Tc,this._onFragmentAddedToBuffer),this._fragmentHistoryReadyToPrintSubscription=this._eventBus.subscribe(Af.fragments.fragmentHistoryReadyForPrint,this._onFragmentHistoryReadyToPrint),this._logger.info("Instance created")}destroy(){super.destroy(),this._loaders.forEach((e=>{e.destroy()})),this._eventBus.unsubscribe(this._fragmentsDetectedSubscription),this._eventBus.unsubscribe(this._fragmentAddedToBufferSubscription),this._eventBus.unsubscribe(this._fragmentHistoryReadyToPrintSubscription),this._logger.info("Destroyed")}_handleConfigUpdated(){}_onFragmentsDetected(e){this.status="Handling new fragments",this._logger.debug("Fragments was requested to load",e.map((e=>e.getMsnPn())));const t=e.filter((e=>!this._lastRequestedFragments.find((t=>t.url===e.url))));this._logger.verbose("Actual fragments is",t.map((e=>e.getMsnPn()))),this._pendingFragments=this._pendingFragments.concat(t),t.forEach((e=>{this._eventBus.publish(Af.fragments.fragmentLoadingStarted,e),this.additionalInfo.loadingFragments.url=nd.UNKNOWN,this._addFragmentToQueue(e.url,e.requestedLoadingTimeout,e)})),this._lastRequestedFragments=e}_onFragmentAddedToBuffer(e){e.goToLifecycleStage("addedToBuffer")}_onFragmentLoadAborted(e){e.goToLifecycleStage("loadDataAborted")}_onFragmentHistoryReadyToPrint(e){this._logger.info(e.historyString)}_addFragmentToQueue(e,t=this.config?.fragmentLoadingTimeout,r){this._logger.verbose(`Requesting ${e} to load; Fragment ${r.getMsnPn()}`),r.goToLifecycleStage("loadDataStart");const n=new dd({url:e,autoLoad:!0,mode:"arrayBuffer",onStateChanged:this._onLoaderStateChanged,loadingTimeout:t,workerMode:this.config.workerMode},this._eventBus);this._loaders.push(n)}_onLoaderStateChanged(e,t,r){if(this.additionalInfo.loadingFragments[r.url]=t,![nd.LOADED,nd.ERROR,nd.ABORTED].includes(t))return;this._logger.verbose(`Loader state changed: ${e} -> ${t}`);const n=this._pendingFragments.find((e=>e.url===r.url));n&&(n.stats=r.stats,n.data=r.data),n?(r.error&&(n.error=r.error),t===nd.LOADED&&(this._logger.debug(`${r.url} fragment downloaded (${n.getMsnPn()})`),n.goToLifecycleStage("loadDataEnd"),delete this.additionalInfo.loadingFragments[r.url],this._eventBus.publish(Af.fragments.fragmentLoaded,n)),t===nd.ERROR&&(this._lastRequestedFragments=this._lastRequestedFragments.filter((e=>e.url!==r.url)),this._logger.debug(`${r.url} fragment loading error (${n.getMsnPn()})`),this._onFragmentLoadAborted(n),this._eventBus.publish(Af.fragments.fragmentLoadingError,n)),t===nd.ABORTED&&(this._lastRequestedFragments=this._lastRequestedFragments.filter((e=>e.url!==r.url)),this._logger.debug(`${r.url} fragment loading aborted (${n.getMsnPn()})`),this._onFragmentLoadAborted(n),this._eventBus.publish(Af.fragments.fragmentLoadingError,n)),this._pendingFragments=this._pendingFragments.filter((e=>e!==n)),this._loaders=this._loaders.filter((e=>e!==r)),this.status=this._loaders.length?"Loading fragments":"Idle"):this._logger.warn("Downloaded fragment was not even planned. Ignoring it",{url:r.url})}}(0,Wa.__decorate)([mc.default],hd.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],hd.prototype,"_onFragmentsDetected",null),(0,Wa.__decorate)([mc.default],hd.prototype,"_onFragmentAddedToBuffer",null),(0,Wa.__decorate)([mc.default],hd.prototype,"_onFragmentLoadAborted",null),(0,Wa.__decorate)([mc.default],hd.prototype,"_onFragmentHistoryReadyToPrint",null),(0,Wa.__decorate)([mc.default],hd.prototype,"_onLoaderStateChanged",null),Ga("8NFq9"),Wa=Ga("a8VW4"),Ga("8NFq9"),Wa=Ga("a8VW4");const pd=e=>{try{const t=new URL(e);return Boolean(t.origin)}catch(e){return!1}};mc=Ga("eQOGK");class gd{_logger=null;_shouldLogHistory=!1;_history=[];_hasLifecycleEnded=!1;_isStuckTimer=null;_lastTs=Date.now();constructor(e,t,r){Object.assign(this,e),this._eventBus=t,this._shouldLogHistory=r||!1,t&&(this._logger=Uu(t,"Doppio - Fragment")),this.duration=e.duration,this.msn=e.msn,this.pn=e.pn,e.playlistUrl||e.fragmentUrl?this.url=gd._buildUrl(e.playlistUrl,e.fragmentUrl):this.url=e.url,this._logger?.verbose(`Fragment ${this.getMsnPn()} created`),this.goToLifecycleStage("created")}getMsnPn(){return`${this.msn}/${this.pn||0}`}goToLifecycleStage(e){if(this._clearStuckTimer(),!this._shouldLogHistory||this._hasLifecycleEnded)return;const t=Date.now();this._history.push({event:e,timeSincePreviousEvent:t-this._lastTs}),this._lastTs=t,"loadDataAborted"===e?(this._hasLifecycleEnded=!0,this._publishHistoryReadyForPrint("Fragments lifecycle: ABORTED")):"addedToBuffer"===e?(this._hasLifecycleEnded=!0,this._publishHistoryReadyForPrint("Fragments lifecycle: SUCCESS")):this._isStuckTimer=setTimeout(this._handleFragmentStuck,3e3)}static _buildUrl(e,t){if(pd(t))return t;const r=new URL(e);if(t.startsWith("/"))return`${r.origin}${t}`;const n=r.pathname.split("/");return n.pop()||n.pop(),`${r.origin}/${n.concat(t).join("/")}`}_handleFragmentStuck(){this._publishHistoryReadyForPrint("Fragments lifecycle: STUCK")}_publishHistoryReadyForPrint(e){this._eventBus?.publish(Af.fragments.fragmentHistoryReadyForPrint,{historyString:`${e} ${this.getMsnPn()}:\n${this._history.map((e=>`Event: ${e.event}, ${e.timeSincePreviousEvent}ms since previous event`)).join("\n")}`})}_clearStuckTimer(){this._isStuckTimer&&clearTimeout(this._isStuckTimer)}}(0,Wa.__decorate)([mc.default],gd.prototype,"_handleFragmentStuck",null),Ga("8NFq9"),Wa=Ga("a8VW4");var md={},yd={};function _d(e,t){return(yd=_d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e}).__esModule=!0,yd.default=yd,_d(e,t)}(yd=_d).__esModule=!0,yd.default=yd,(md=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,yd(e,t)}).__esModule=!0,md.default=md;var vd=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var r=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(r,1),r>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=t.length,s=0;s<o;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),bd={};function Sd(){return bd=Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bd.__esModule=!0,bd.default=bd,Sd.apply(null,arguments)}(bd=Sd).__esModule=!0,bd.default=bd;var Ed,wd,Td={};(Td=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}).__esModule=!0,Td.default=Td,wd="undefined"!=typeof window?window:void 0!==za?za:"undefined"!=typeof self?self:{},Ed=wd;var Ld=Fa.hp;function Od(e){for(var t,r=(t=e,Va(Ed).atob?Va(Ed).atob(t):Ld.from(t,"base64").toString("binary")),n=new Uint8Array(r.length),i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}var Md=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return Va(md)(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(vd),Ad=String.fromCharCode(9),Pd=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),r={};return t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),r},Rd=function(e){for(var t,r=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},i=r.length;i--;)""!==r[i]&&((t=/([^=]*)=(.*)/.exec(r[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),n[t[0]]=t[1]);return n},Id=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}Va(md)(t,e);var r=t.prototype;return r.push=function(e){var t,r,n=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,r){var n=r(e);return n===e?t:t.concat([n])}),[e]).forEach((function(e){for(var i=0;i<n.customParsers.length;i++)if(n.customParsers[i].call(n,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))n.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void n.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void n.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void n.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return r=Va(bd)(Pd(t[1]),{type:"tag",tagType:"byterange"}),void n.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"map"},t[1]){var o=Rd(t[1]);o.URI&&(r.uri=o.URI),o.BYTERANGE&&(r.byterange=Pd(o.BYTERANGE))}n.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=Rd(t[1]),r.attributes.RESOLUTION){var s=r.attributes.RESOLUTION.split("x"),a={};s[0]&&(a.width=parseInt(s[0],10)),s[1]&&(a.height=parseInt(s[1],10)),r.attributes.RESOLUTION=a}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}n.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=Rd(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(e))n.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))n.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void n.trigger("data",r);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return r={type:"tag",tagType:"key"},t[1]&&(r.attributes=Rd(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void n.trigger("data",r);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return r={type:"tag",tagType:"start"},t[1]&&(r.attributes=Rd(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out-cont"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-out"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return r={type:"tag",tagType:"cue-in"},t[1]?r.data=t[1]:r.data="",void n.trigger("data",r);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"skip"}).attributes=Rd(t[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(Ad)),void n.trigger("data",r);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"part"}).attributes=Rd(t[1]),["DURATION"].forEach((function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=/YES/.test(r.attributes[e]))})),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=Pd(r.attributes.BYTERANGE)),void n.trigger("data",r);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"server-control"}).attributes=Rd(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=/YES/.test(r.attributes[e]))})),void n.trigger("data",r);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"part-inf"}).attributes=Rd(t[1]),["PART-TARGET"].forEach((function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseFloat(r.attributes[e]))})),void n.trigger("data",r);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"preload-hint"}).attributes=Rd(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(r.attributes.hasOwnProperty(e)){r.attributes[e]=parseInt(r.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[t]=r.attributes[e],delete r.attributes[e]}})),void n.trigger("data",r);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(r={type:"tag",tagType:"rendition-report"}).attributes=Rd(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){r.attributes.hasOwnProperty(e)&&(r.attributes[e]=parseInt(r.attributes[e],10))})),void n.trigger("data",r);n.trigger("data",{type:"tag",data:e.slice(4)})}}}else n.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},r.addParser=function(e){var t=this,r=e.expression,n=e.customType,i=e.dataParser,o=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(r.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:n,segment:o}),!0}))},r.addTagMapper=function(e){var t=e.expression,r=e.map;this.tagMappers.push((function(e){return t.test(e)?r(e):e}))},t}(vd),jd=function(e){var t={};return Object.keys(e).forEach((function(r){var n;t[(n=r,n.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[r]})),t},Dd=function(e){var t=e.serverControl,r=e.targetDuration,n=e.partTargetDuration;if(t){var i="#EXT-X-SERVER-CONTROL",o="holdBack",s="partHoldBack",a=r&&3*r,u=n&&2*n;r&&!t.hasOwnProperty(o)&&(t[o]=a,this.trigger("info",{message:i+" defaulting HOLD-BACK to targetDuration * 3 ("+a+")."})),a&&t[o]<a&&(this.trigger("warn",{message:i+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+a+")"}),t[o]=a),n&&!t.hasOwnProperty(s)&&(t[s]=3*n,this.trigger("info",{message:i+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[s]+")."})),n&&t[s]<u&&(this.trigger("warn",{message:i+" clamping PART-HOLD-BACK ("+t[s]+") to partTargetDuration * 2 ("+u+")."}),t[s]=u)}},Nd=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new Md,t.parseStream=new Id,t.lineStream.pipe(t.parseStream);var r,n,i=Va(Td)(t),o=[],s={},a=!1,u=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var f=0,d=0;return t.on("end",(function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&r&&(s.map=r),!s.key&&n&&(s.key=n),s.timeline||"number"!=typeof c||(s.timeline=c),t.manifest.preloadSegment=s)})),t.parseStream.on("data",(function(e){var t,h;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(s.byterange=t,t.length=e.length,"offset"in e||(e.offset=f)),"offset"in e&&(s.byterange=t,t.offset=e.offset),f=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(s.duration=e.duration),0===e.duration&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:Od(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(n.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,c=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){r={},e.uri&&(r.uri=e.uri),e.byterange&&(r.byterange=e.byterange),n&&(r.key=n)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(s.attributes||(s.attributes={}),Va(bd)(s.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{},t=r[e.attributes["GROUP-ID"]],(h={default:/yes/i.test(e.attributes.DEFAULT)}).default?h.autoselect=!0:h.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(h.language=e.attributes.LANGUAGE),e.attributes.URI&&(h.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(h.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(h.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(h.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=h}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,Dd.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.data},"cue-in":function(){s.cueIn=e.data},skip:function(){this.manifest.skip=jd(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;a=!0;var r=this.manifest.segments.length,n=jd(e.attributes);s.parts=s.parts||[],s.parts.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=d),d=n.byterange.offset+n.byterange.length);var i=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+i+" for segment #"+r,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,r){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+r+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=jd(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Dd.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,r=jd(e.attributes),n=r.type&&"PART"===r.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=n?d:0,n&&(d=r.byterange.offset+r.byterange.length)));var i=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t,e.attributes,["TYPE","URI"]),r.type)for(var o=0;o<s.preloadHints.length-1;o++){var a=s.preloadHints[o];a.type&&a.type===r.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t+" has the same TYPE "+r.type+" as preload hint #"+o})}},"rendition-report":function(){var t=jd(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var r=this.manifest.renditionReports.length-1,n=["LAST-MSN","URI"];a&&n.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+r,e.attributes,n)},"part-inf":function(){this.manifest.partInf=jd(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Dd.call(this,this.manifest)}}[e.tagType]||u).call(i)},uri:function(){s.uri=e.uri,o.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),n&&(s.key=n),s.timeline=c,r&&(s.map=r),d=0,s={}},comment:function(){},custom:function(){e.segment?(s.custom=s.custom||{},s.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}Va(md)(t,e);var r=t.prototype;return r.warnOnMissingAttributes_=function(e,t,r){var n=[];r.forEach((function(e){t.hasOwnProperty(e)||n.push(e)})),n.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+n.join(", ")})},r.push=function(e){this.lineStream.push(e)},r.end=function(){this.lineStream.push("\n"),this.trigger("end")},r.addParser=function(e){this.parseStream.addParser(e)},r.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(vd);mc=Ga("eQOGK");const Cd=(e,t)=>e.reduce(((e,t)=>(t.startTs=e.prevStart,t.endTs=t.startTs+t.duration,e.prevStart=t.endTs,e.parts.push(t),e)),{parts:[],prevStart:t}).parts;class xd extends dc{_lastPlaylistContent="";_samePlaylistsCount=0;_isActive=!0;_currentPlaylistLoader=null;_url=null;constructor(e,t,r){super(t,r),this._logger=Uu(r,`Doppio - ${e}`),this._lifecycleEventReporter=af("playlistRotator",this._eventBus),this._logger.info("Instance created")}destroy(){super.destroy(),this._isActive=!1,this._logger.info("Destroyed")}_onPlaylistLoadingStateChanged(e,t){if(!this._isActive)return void this._logger.warn("Loader was destroyed, but we are trying to load handle playlist load state change!");if(!this._currentPlaylistLoader||[nd.ABORTED,nd.ERROR].includes(t))return this._lifecycleEventReporter(`Loading error reported, ${this._currentPlaylistLoader?.error}`),this._logger.warn(`Playlist loader reported ${t===nd.ERROR?"error":"as aborted"} (${this._currentPlaylistLoader?.error?.statusText||"no error"} with status ${this._currentPlaylistLoader?.error?.statusText||"no status"}). Planning next load`),this._eventBus.publish(gc.playlists.playlistLoadingError,{error:this._currentPlaylistLoader?.error}),t===nd.ERROR&&"4"===this._currentPlaylistLoader?.error?.status.toString()[0]&&(this._logger.warn("Playlist loading reported 4xx status. Requesting start over"),this._eventBus.publish(Ic,{})),this._currentPlaylistLoader=null,void this._planNextLoad();if(t!==nd.LOADED)return;if(!this._isPlaylistValid(this._currentPlaylistLoader.data))return this._logger.warn("Playlist seems to be invalid. Plan next load"),this._currentPlaylistLoader=null,void this._planNextLoad();this._eventBus.publish(gc.playlists.playlistLoaded,{originalUrl:this._url,realUrl:this._currentPlaylistLoader.realUrl,stats:this._currentPlaylistLoader.stats});const r=this._currentPlaylistLoader.data,n=this._isPlaylistChanged(r);if(this._currentPlaylistLoader=null,!n)return this._logger.warn("Loaded playlist is identical to previous one. Skipping it"),void this._planNextLoad();const i=this._parsePlaylist(r);if(!i)return this._logger.warn("Empty playlist parse result! Should restart"),void this._eventBus.publish(Ic,{});this._eventBus.publish(gc.playlists.playlistInfo,i),this._lifecycleEventReporter("Playlist loaded"),this._handleParsedPlaylist(i)}_isPlaylistValid(e){return Boolean(e?.trim().length)&&e?.includes("#EXT-X-VERSION")}_isPlaylistChanged(e){return this._lastPlaylistContent!==e}_isPlaylistUpToDate(e){if(void 0!==this.config.equalPlaylistsAmountToDecline&&this.config.equalPlaylistsAmountToDecline<1)return!0;if(e===this._lastPlaylistContent){this._samePlaylistsCount++;const{equalPlaylistsAmountToDecline:e=2}=this.config;if(this._samePlaylistsCount>=e)return!1}else this._samePlaylistsCount=0;return this._lastPlaylistContent=e,!0}_parsePlaylist(e){this._logger.verbose("Parsing manifest");try{const t=new Nd;t.push(e),t.end();const{manifest:r}=t;this._logger.verbose("Manifest parsed");const n=Array.isArray(r?.playlists)&&r.playlists.length>0,i=Array.isArray(r?.segments)&&r.segments.length>0;return n||i||rd.reportError("Playlist seems to be parsed invalid",{playlistContent:e,playlistUrl:this._url,parsedPlaylistResult:r}),((e,t={})=>{const r=e.mediaSequence,n=e.segments.map(((e,t)=>({...e,uri:e.uri,msnNumber:r+t,partNumber:0,parts:(e?.parts||[]).map(((e,n)=>({...e,msnNumber:r+t,partNumber:n})))}))).map((e=>(e.parts=e.dateTimeObject?Cd(e.parts,e.dateTimeObject.getTime()/1e3):e.parts,e))),i=r+n.length,o=(e.preloadSegment?.parts||[]).map(((e,t)=>({...e,msnNumber:i,partNumber:t}))),s=(e.preloadSegment?.preloadHints||[]).map(((e,t)=>({...e,msnNumber:i,partNumber:t+o.length}))),a=n.slice(-1)[0],u={...e.preloadSegment,parts:e.preloadSegment&&a.dateTimeObject?Cd(o,a.dateTimeObject.getTime()/1e3+a.duration):o,preloadHints:s,msnNumber:i,partNumber:0},l={...e,segments:n,preloadSegment:u};return t.partHoldBack&&(l.partHoldBack=t.partHoldBack),l})(r,{partHoldBack:this.config.partHoldBack?this.config.partHoldBack/1e3:void 0})}catch(Ua){return rd.reportError("Could not parse playlist",{playlistContent:e,playlistUrl:this._url}),null}}_isMultiVariantPlaylist(e){return e.playlists&&(!e.segments||Array.isArray(e.segments)&&0===e.segments.length)}_isVODPlaylist(e){return"VOD"===e.playlistType||e.endList}_isSimplePlaylist(e){return!this._isLowLatencyPlaylist(e)&&!this._isVODPlaylist(e)}_isLowLatencyPlaylist(e){return Boolean(e.partInf)}_handleFragmentsDetected(e){this._logger.verbose("Detected fragments",e.map((e=>e.getMsnPn()))),this._logger.debug("Fragments was detected and extracted. Emitting it"),this._lifecycleEventReporter(`Found fragments ${e.map((({url:e})=>e)).join(",")}`),this._eventBus.publish(gc.fragments.fragmentsDetected,e)}_handleLLManifestDetected(e){this._logger.debug("Low-latency playlist detected. Emitting it"),this._eventBus.publish(gc.playlistType.llDetected,e)}_handleVODPlaylist(e){this._logger.debug("VOD playlist detected. Emitting it"),this._eventBus.publish(gc.playlistType.vodDetected,e)}_handleMultivariantManifestDetected(e){const t=e.playlists.reduce(((e,t)=>(e[t.attributes.NAME]={name:t.attributes.NAME,bitrate:t.attributes.BANDWIDTH,url:t.uri,width:t.attributes.RESOLUTION.width,height:t.attributes.RESOLUTION.height,fps:t.attributes["FRAME-RATE"]},e)),{});this._logger.verbose("Variants detected",t),this._logger.debug("Multivariant playlist detected. Emitting it"),this._eventBus.publish(gc.playlistType.multivariantDetected,t)}_handleSimplePlaylistDetected(e){this._logger.debug("Simple playlist detected. Emitting it"),this._eventBus.publish(gc.playlistType.simpleDetected,e)}}(0,Wa.__decorate)([mc.default],xd.prototype,"_onPlaylistLoadingStateChanged",null),mc=Ga("eQOGK");class kd extends xd{state=hc.OK;status="Idle";additionalInfo={};groups=["loader"];_playlistLoaderTimeout=null;_nextMSN=-1;_nextPN=-1;_partHoldBack=-1;_lastLoadedFragment=null;_awaitingFragmentURL=null;_hasLoadedInitialAmount=!1;constructor(e,t){const{url:r,startManifest:n,initialMSN:i,initialPN:o,lastLoadedFragment:s}=t;super("LLPlaylistRotationController","playlistLoader",e),this._lifecycleEventReporter("Created"),this._url=r,this._lastLoadedFragment=s,n?this._handleParsedPlaylist(n):(this._nextMSN=Number.isFinite(i)?i:-1,this._nextPN=Number.isFinite(o)?o:-1,this._loadNextPlaylist()),this._onSegmentLoadedListener=this._eventBus.subscribe(Af.fragments.fragmentLoaded,this._onFragmentFinished),this._onSegmentFailedListener=this._eventBus.subscribe(Af.fragments.fragmentLoadingError,this._onFragmentFinished),this._onSegmentAbortedListener=this._eventBus.subscribe(Af.fragments.fragmentLoadingAborted,this._onFragmentFinished),this._onFragmentAddedListener=this._eventBus.subscribe(Tc,this._onFragmentAdded),this.config.targetBufferMultiplier&&this.config.targetBufferMultiplier<1&&this._logger.warn("Target buffer multiplier set to value lower than 1. It is unsafe to load less than target-duration, forcing no multiplier instead")}destroy(){this._isActive=!1,super.destroy(),this._currentPlaylistLoader?.destroy(),this._currentPlaylistLoader=null,this._logger.info("Destroy controller"),this._eventBus.unsubscribe(this._onSegmentLoadedListener),this._eventBus.unsubscribe(this._onSegmentAbortedListener),this._eventBus.unsubscribe(this._onSegmentFailedListener),this._eventBus.unsubscribe(this._onFragmentAddedListener),this._lifecycleEventReporter("Destroyed")}abortCurrentPlaylistLoading(){this._logger.info("Aborting current loading playlist")}setURL(e,t){t?this._url=e:(this._logger.info(`Setting new url ${e}`),this._currentPlaylistLoader?.destroy(),this._url=e,this._nextPN=-1,this._nextMSN=-1,this._loadNextPlaylist())}_handleConfigUpdated(e){if(e.equalPlaylistsAmountToDecline&&(this._samePlaylistsCount=0),!1===e.lowLatencyMode){const e=this._parsePlaylist(this._lastPlaylistContent);e?this._handleSimplePlaylistDetected(e):this._eventBus.publish(Ic,{})}}_loadNextPlaylist(){if(!this._isActive)return void this._logger.warn("Loader was destroying, but we trying to load next playlist!");const{playlistLoadingTimeout:e}=this.config;this._logger.debug("Loading next playlist"),this._lifecycleEventReporter(`Loading next playlist with url ${this._url}`),this.status="Loading playlist",this._currentPlaylistLoader&&this._currentPlaylistLoader.cancel(`Another playlist with url ${this._url} scheduled to load`);const t=this._buildUrl();this._currentPlaylistLoader=new dd({url:t,loadingTimeout:e,autoLoad:!0,mode:"text",onStateChanged:this._onPlaylistLoadingStateChanged,workerMode:this.config.workerMode,requestCustomReferer:this.config.sendCustomRefererHeader?Ya().location?.href:void 0},this._eventBus),this._eventBus.publish(gc.playlists.playlistRequested,{})}_handleParsedPlaylist(e){this._lifecycleEventReporter("Playlist parsed");const t=Math.max(this.config.targetBufferMultiplier,1);if(this._partHoldBack=jf(e,e.targetDuration||2)*t,this._isMultiVariantPlaylist(e))return void this._handleMultivariantManifestDetected(e);if(this._isSimplePlaylist(e))return void this._handleSimplePlaylistDetected(e);if(this._isVODPlaylist(e))return void this._handleVODPlaylist(e);const r=0===(e.preloadSegment.parts||[]).length,n=e.segments.flatMap((t=>t.parts.map((({uri:t,independent:r,partNumber:n,startTs:i,endTs:o,msnNumber:s,duration:a})=>new gd({url:t,independent:r?Zf.INDEPENDENT:Zf.PART,msn:s,pn:n,duration:a,isTransmuxingBypassRequested:!!e.segments[0].map?.uri,startTs:i,endTs:o},this._eventBus,this.config.shouldLogFragmentsHistory))))).concat((e.preloadSegment.parts||[]).map((({uri:t,independent:r=!1,msnNumber:n,partNumber:i,startTs:o,endTs:s,duration:a})=>new gd({url:t,independent:r?Zf.INDEPENDENT:Zf.PART,msn:n,pn:i,duration:a,isTransmuxingBypassRequested:!!e.segments[0].map?.uri,startTs:o,endTs:s},this._eventBus,this.config.shouldLogFragmentsHistory)))).filter((({msn:e,pn:t})=>!this._hasLoadedInitialAmount||e>this._nextMSN||e===this._nextMSN&&t>=this._nextPN)),i=n.reverse(),o=i.reduce(((e,t)=>(e.currentDuration<this._partHoldBack&&(e.currentIndex+=1,e.currentDuration+=t.duration),e)),{currentDuration:0,currentIndex:-1}).currentIndex,s=this._lastLoadedFragment?i.findIndex((e=>(e.startTs||0)<(this._lastLoadedFragment?.endTs||0))):-1,a=Math.min(i.length,Math.max(o,s)+this.config.additionalStartParts);this._logger.debug(`Minimal part ${i[a]?.msn}:${i[a]?.pn}(${new Date(i[a]?.startTs||0)})`);let u=i.findIndex((({independent:e},t)=>t>=a&&e===Zf.INDEPENDENT));-1===u&&(u=i.length-1),this._logger.debug(`Part to start load from: ${i[u]?.msn}:${i[u]?.pn}`);const l=u>-1?i.slice(0,u+1).reverse():n;this.config.blockingMode===sc.WAIT_FOR_PREFETCH_SEGMENT&&Array.isArray(e.preloadSegment.preloadHints)&&e.preloadSegment.preloadHints.length&&(this._awaitingFragmentURL=e.preloadSegment.preloadHints[0]?.uri||null,l.push(...e.preloadSegment.preloadHints.map((({uri:t,msnNumber:r,partNumber:n})=>new gd({url:t,independent:Zf.UNKNOWN,msn:r,pn:n,duration:0,isTransmuxingBypassRequested:!!e.segments[0].map?.uri},this._eventBus,this.config.shouldLogFragmentsHistory))))),e.segments[0].map?.uri&&l.unshift(new gd({playlistUrl:this._url||"",fragmentUrl:e.segments[0].map?.uri,duration:0,independent:Zf.INDEPENDENT,msn:-1,pn:-1,isTransmuxingBypassRequested:!0,isInitSection:!0},this._eventBus,this.config.shouldLogFragmentsHistory)),this._handleFragmentsDetected(l),this._hasLoadedInitialAmount=!0,this._nextMSN=e.mediaSequence+e.segments.length,this._nextPN=(e.preloadSegment.parts||[]).length,this.additionalInfo.msn=this._nextMSN,this.additionalInfo.pn=this._nextPN,this.status="Awaiting fragment to load next playlist",r&&this._eventBus.publish(gc.playlists.lastPlaylistOfSegmentLoaded,{}),this.config.blockingMode!==sc.WAIT_FOR_PLAYLIST||this._loadNextPlaylist()}_planNextLoad(){this._playlistLoaderTimeout=Ya().setTimeout((()=>{this._loadNextPlaylist()}),this.config.retryLowLatencyPlaylistTimeout)}_buildUrl(){if(-1===this._nextPN||-1===this._nextMSN)return this._url||"";if(!this._url)return"";const e=new URL(this._url);return e.searchParams.set("_HLS_msn",`${this._nextMSN}`),e.searchParams.set("_HLS_part",`${this._nextPN}`),e.toString()}_onFragmentFinished(e){this._logger.debug(`${e.startTs} -> ${e.endTs} loaded (${e.getMsnPn()})`),this.config.blockingMode===sc.WAIT_FOR_PREFETCH_SEGMENT&&this._awaitingFragmentURL===e.url&&(this._logger.debug("Prefetch segment is ready now, loading next playlist"),this._loadNextPlaylist())}_onFragmentAdded(e){this._lastLoadedFragment=e}}(0,Wa.__decorate)([mc.default],kd.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],kd.prototype,"_onFragmentFinished",null),(0,Wa.__decorate)([mc.default],kd.prototype,"_onFragmentAdded",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class Bd extends xd{state=hc.OK;status="Idle";groups=["loader"];additionalInfo={};_playlistLoaderTimeout=null;_lastTargetDuration=2;constructor(e,t,r){super("SimplePlaylistRotationController","playlistLoader",e),this._lifecycleEventReporter("Created"),this._url=t,r?this._handleParsedPlaylist(r):this._loadNextPlaylist()}destroy(){this._isActive=!1,super.destroy(),this._currentPlaylistLoader?.destroy(),this._currentPlaylistLoader=null,this._logger.info("Destroy controller"),this._playlistLoaderTimeout&&clearTimeout(this._playlistLoaderTimeout),this._lifecycleEventReporter("Destroyed")}abortCurrentPlaylistLoading(){this._logger.info("Aborting current loading playlist"),this._currentPlaylistLoader?.destroy()}setURL(e,t){t?this._url=e:(this._logger.info(`Setting new url ${e}`),this._currentPlaylistLoader?.destroy(),this._url=e,this._loadNextPlaylist())}_handleConfigUpdated(e){e.equalPlaylistsAmountToDecline&&(this._samePlaylistsCount=0)}_loadNextPlaylist(){if(!this._isActive)return void this._logger.warn("Loader was destroying, but we trying to load next playlist!");const{playlistLoadingTimeout:e}=this.config;this._logger.debug("Loading next playlist"),this._lifecycleEventReporter(`Loading next playlist with url ${this._url}`),this.status="Loading playlist",this._currentPlaylistLoader&&this._currentPlaylistLoader.cancel(`Another playlist with url ${this._url} scheduled to load`),this._url&&(this._currentPlaylistLoader=new dd({url:this._url,loadingTimeout:e,autoLoad:!0,mode:"text",onStateChanged:this._onPlaylistLoadingStateChanged,workerMode:this.config.workerMode,requestCustomReferer:this.config.sendCustomRefererHeader?Ya().location?.href:void 0},this._eventBus),this._eventBus.publish(gc.playlists.playlistRequested,{}))}_handleParsedPlaylist(e){if(this._lifecycleEventReporter("Playlist parsed"),this._isMultiVariantPlaylist(e))return void this._handleMultivariantManifestDetected(e);if(this._isLowLatencyPlaylist(e)&&this.config.lowLatencyMode)return void this._handleLLManifestDetected(e);if(this._isVODPlaylist(e))return void this._handleVODPlaylist(e);if(this._eventBus.publish(gc.playlists.lastPlaylistOfSegmentLoaded,{}),!this._url)return;const t=this._url;this._lastTargetDuration=e.targetDuration||2;const r=e.segments.map((r=>new gd({fragmentUrl:r.uri,playlistUrl:t,duration:r.duration,independent:Zf.INDEPENDENT,msn:r.msnNumber,pn:r.partNumber,isTransmuxingBypassRequested:!!e.segments[0].map?.uri},this._eventBus,this.config.shouldLogFragmentsHistory)));e.segments[0]?.map?.uri&&r.unshift(new gd({fragmentUrl:e.segments[0].map.uri,playlistUrl:t,independent:Zf.INDEPENDENT,msn:-1,pn:-1,isTransmuxingBypassRequested:!0,duration:0,isInitSection:!0},this._eventBus,this.config.shouldLogFragmentsHistory)),this._handleFragmentsDetected(r),this._planNextLoad()}_planNextLoad(){const e=this._getNextPlaylistLoadTimeout();this._currentPlaylistLoader&&(this._currentPlaylistLoader.destroy(),this._currentPlaylistLoader=null),this._logger.info(`Expecting next load in ${e} ms`),this._lifecycleEventReporter("Awaiting next loading"),this.status="Awaiting next loading",this._playlistLoaderTimeout=globalThis.setTimeout((()=>{this._loadNextPlaylist()}),e)}_getNextPlaylistLoadTimeout(){const{forceStaticPlaylistLoadingTimeout:e,staticPlaylistLoadingTimeoutInDurations:t}=this.config;if(e&&t)return this._logger.verbose(`forceStaticPlaylistLoadingTimeout is set to true and staticPlaylistLoadingTimeoutInDurations is set to ${t}. Using static timeout`),t*this._lastTargetDuration*1e3;const r=!this.config.disableRotateTimeoutIncrease&&this._samePlaylistsCount>1?1.5:1;return this._logger.verbose(`There was ${this._samePlaylistsCount} same playlists. Multiplier is ${r}. Target duration is ${this._lastTargetDuration}`),r*this._lastTargetDuration*1e3}}let Fd;var Ud;(0,Wa.__decorate)([mc.default],Bd.prototype,"_handleConfigUpdated",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK"),(Ud=Fd||(Fd={}))[Ud.NONE=0]="NONE",Ud[Ud.LOADING=1]="LOADING",Ud[Ud.LOADED=2]="LOADED",Ud[Ud.ERROR=3]="ERROR";class zd extends xd{state=hc.OK;status="Idle";additionalInfo={};_fragments=[];_lastHandledFragments=[];_chunksRetryTimeout=null;_isDurationPositive=!1;constructor(e,t,r){super("VODPlaylistRotationController","playlistLoader",e),this._url=t,this._onFragmentLoadedListener=this._eventBus.subscribe(Pf.fragments.fragmentLoaded,this._onFragmentLoaded),this._onFragmentAbortedListener=this._eventBus.subscribe(Pf.fragments.fragmentLoadingAborted,this._onFragmentLoadingError),this._onFragmentErrorListener=this._eventBus.subscribe(Pf.fragments.fragmentLoadingError,this._onFragmentLoadingError),this._onBufferMetricsAvailableListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable),r?this._handleParsedPlaylist(r):this._loadNextPlaylist()}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentLoadedListener),this._eventBus.unsubscribe(this._onBufferMetricsAvailableListener),this._eventBus.unsubscribe(this._onFragmentErrorListener),this._eventBus.unsubscribe(this._onFragmentAbortedListener)}setURL(e,t){t?this._url=e:(this._logger.info(`Setting new url ${e}`),this._currentPlaylistLoader?.destroy(),this._url=e,this._loadNextPlaylist())}abortCurrentPlaylistLoading(){this._logger.info("Aborting current loading playlist"),this._currentPlaylistLoader?.destroy()}_handleConfigUpdated(){}_loadNextPlaylist(){const{playlistLoadingTimeout:e,baseVODPlaylistRetryTimeout:t,maxVODPlaylistLoadingRetries:r}=this.config;this._logger.debug("Loading VOD playlist"),this._currentPlaylistLoader&&this._currentPlaylistLoader.cancel(`Another playlist with url ${this._url} scheduled to load`),this._currentPlaylistLoader=new dd({url:this._url||"",loadingTimeout:e,autoLoad:!0,mode:"text",onStateChanged:this._onPlaylistLoadingStateChanged,baseRetryTimeout:t,maxRetries:r,workerMode:this.config.workerMode},this._eventBus)}_onPlaylistLoadingStateChanged(e,t){if(!this._currentPlaylistLoader||[nd.ABORTED,nd.ERROR].includes(t))return this.state=hc.ERROR,this.additionalInfo={playlistLoadError:this._currentPlaylistLoader?.error},this._logger.warn(`Playlist loader reported ${t===nd.ERROR?"error":"as aborted"} (${this._currentPlaylistLoader?.error?.statusText||"no error"} with status ${this._currentPlaylistLoader?.error?.statusText||"no status"}). Planning next load`),void(this._currentPlaylistLoader=null);if(t!==nd.LOADED)return;const r=this._currentPlaylistLoader.data;this._currentPlaylistLoader=null;const n=this._parsePlaylist(r);n?(this._eventBus.publish(gc.playlists.playlistInfo,n),this._handleParsedPlaylist(n)):this._eventBus.publish(Ic,{})}_handleParsedPlaylist(e){this._isMultiVariantPlaylist(e)?this._handleMultivariantManifestDetected(e):this._isLowLatencyPlaylist(e)&&this.config.lowLatencyMode?this._handleLLManifestDetected(e):this._isSimplePlaylist(e)?this._handleSimplePlaylistDetected(e):(this.status="Playlist loaded",this._populateVODFragments(e.segments))}_planNextLoad(){}_populateVODFragments(e){let t=0;for(let r=0;r<e.length;r++){const n=e[r],i={url:n.uri,fragmentIndex:r,fragmentStartTS:t,fragmentEndTS:t+n.duration,readinessState:Fd.NONE,isLast:r===e.length-1};this._fragments.push(i),t=i.fragmentEndTS}this._isDurationPositive=t>0,this._eventBus.publish(gc.playlists.vodFragmentsInfo,this._fragments)}_loadFragment(e){const t=e.map((({url:e})=>e));e.filter((({readinessState:e,url:r})=>e===Fd.LOADED&&t.includes(r))).forEach((e=>{this._logger.info(`Some fragments already loaded, reemitting it: ${e.fragmentIndex}`),this._eventBus.publish(gc.fragments.requestReleaseFromCache,{msn:e.fragmentIndex})}));const r=e.filter((({readinessState:e})=>[Fd.NONE].includes(e)));r.forEach((e=>e.readinessState=Fd.LOADING)),this._handleFragmentsDetected(r.map((e=>new gd({msn:e.fragmentIndex,playlistUrl:this._url||"",fragmentUrl:e.url,pn:0,independent:Zf.INDEPENDENT,duration:e.fragmentEndTS-e.fragmentStartTS,requestedLoadingTimeout:this.config.disableTimeoutsInVOD?-1:this.config.baseVODFragmentRetryTimeout,startTs:e.fragmentStartTS,endTs:e.fragmentEndTS,isTransmuxingBypassRequested:e.url.endsWith(".mp4")},this._eventBus,this.config.shouldLogFragmentsHistory)))),this._lastHandledFragments=t}_onFragmentLoaded(e){this._logger.info(`Fragment ${e.msn} loaded`);const t=this._fragments.find((({fragmentIndex:t})=>t===e.msn));t&&(t.readinessState=Fd.LOADED,t.data=e.data,this.additionalInfo.fragments=this._fragments.map((e=>({...e,data:void 0}))))}_onFragmentLoadingError(e){const t=this._fragments.find((({fragmentIndex:t})=>t===e.msn));t&&(t.readinessState=Fd.ERROR,this._chunksRetryTimeout||(this._chunksRetryTimeout=globalThis.setTimeout(this._retryFragments,this.config.baseVODFragmentRetryTimeout)))}_retryFragments(){this._chunksRetryTimeout=null,this._fragments.filter((({readinessState:e})=>e===Fd.ERROR)).forEach((e=>e.readinessState=Fd.NONE))}_onBufferMetricsAvailable(e){if(this._fragments.some((({readinessState:e})=>e===Fd.LOADING))||!this._isDurationPositive)return;let t=[];const{currentTimeRange:r,currentPlaybackPosition:n,isInLastBufferedRange:i,bufferedTimeRanges:o}=e,s=i||!!r&&!o.some((({start:e,end:t})=>e<=r.end+1&&r.end+1<=t)),a=n+this.config.VODLoadNextSegmentThreshold/1e3;if(r&&r.end-n<this.config.VODLoadNextSegmentThreshold/1e3&&s&&a<e.knownDuration-.1&&(t=this._findNextFragmentsByTime(n,a).filter((({fragmentStartTS:e,fragmentEndTS:t})=>!(e<=n&&n<=t)))),r||(t=this._findNextFragmentsByTime(n,n)),t.length){this._logger.info(`Loading following fragments ${t.map((({fragmentIndex:e})=>e)).join(",")}`);const e=Math.min(...t.map((({fragmentStartTS:e})=>e))),r=Math.max(...t.map((({fragmentEndTS:e})=>e)));this._eventBus.publish(gc.fragments.periodFragmentsFound,{startTsOfPeriod:e,endTsOfPeriod:r}),this._loadFragment(t)}}_findNextFragmentsByTime(e,t){return this._fragments.filter((({fragmentEndTS:r,fragmentStartTS:n})=>n<=e&&e<=r||n>=e&&t>=r||n<=t&&t<=r))}}let Vd;var qd;(0,Wa.__decorate)([mc.default],zd.prototype,"destroy",null),(0,Wa.__decorate)([mc.default],zd.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],zd.prototype,"_onPlaylistLoadingStateChanged",null),(0,Wa.__decorate)([mc.default],zd.prototype,"_planNextLoad",null),(0,Wa.__decorate)([mc.default],zd.prototype,"_onFragmentLoaded",null),(0,Wa.__decorate)([mc.default],zd.prototype,"_onFragmentLoadingError",null),(0,Wa.__decorate)([mc.default],zd.prototype,"_retryFragments",null),(0,Wa.__decorate)([mc.default],zd.prototype,"_onBufferMetricsAvailable",null),mc=Ga("eQOGK"),(qd=Vd||(Vd={})).VOD="VOD",qd.LOW_LATENCY="lowLatency",qd.SIMPLE="simple";class $d{state=hc.OK;status="Idle";additionalInfo={};groups=["loader"];_streamUrl=null;_aclToken=null;_playlistsRotator=null;_actualRenditionReport=null;_lastAddedFragment=null;constructor(e=Vd.SIMPLE,t,r){this._eventBus=r,this._logger=Uu(this._eventBus,"Doppio - StreamLoader"),this._logger.info("Created"),this._fragmentsLoader=new hd(this._eventBus),this._initialType=e,this._simplePlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.simpleDetected,this._onSimplePlaylistDetected),this._llPlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.llDetected,this._onLLPlaylistDetected),this._vodPlaylistDetectedListener=this._eventBus.subscribe(Rf.playlistType.vodDetected,this._onVODPlaylistDetected),this._onSoftResetRequestedListener=this._eventBus.subscribe(_c,this._resetPlaylistLoaders),this._onBrowserRedirectDetectedListener=this._eventBus.subscribe(Fc.browserRedirectDetected,this._onBrowserRedirectDetected),this._onFragmentAddedListener=this._eventBus.subscribe(Tc,this._onFragmentAdded),this._lastAddedFragment=t}startLoad(e){this._streamUrl=e,this._recreateLoaders()}destroy(){this._logger.info(`Destroying instance, ${this._streamUrl}`),this._fragmentsLoader.destroy(),this._playlistsRotator?.destroy(),this._eventBus.unsubscribe(this._simplePlaylistDetectedListener),this._eventBus.unsubscribe(this._llPlaylistDetectedListener),this._eventBus.unsubscribe(this._vodPlaylistDetectedListener),this._eventBus.unsubscribe(this._onSoftResetRequestedListener),this._eventBus.unsubscribe(this._onFragmentAddedListener),this._eventBus.unsubscribe(this._onBrowserRedirectDetectedListener)}setActualRenditionReport(e){e&&(this._actualRenditionReport=e)}_recreateLoaders(){this.status="Restarting";const e=this._buildUrl();this._logger.debug("Recreate loaders"),e&&(this._fragmentsLoader.destroy(),this._fragmentsLoader=new hd(this._eventBus),this._playlistsRotator?this._playlistsRotator?.setURL(e):this._recreateInitialLoader(),this.status="Working")}_recreateInitialLoader(){switch(this._initialType){case Vd.SIMPLE:this._onSimplePlaylistDetected();break;case Vd.VOD:this._onVODPlaylistDetected();break;case Vd.LOW_LATENCY:this._onLLPlaylistDetected();break;default:this._onSimplePlaylistDetected()}}_buildUrl(){return this._streamUrl?`${this._streamUrl}${this._aclToken?"?aclToken="+this._aclToken:""}`:null}_onFragmentAdded(e){this._lastAddedFragment=e}_onSimplePlaylistDetected(e){if(this._playlistsRotator instanceof Bd)return;this._eventBus.publish(If.playlistRotatorTypeChanged,Vd.SIMPLE),this._logger.info("Simple playlist detected, switching to simple loader");const t=this._buildUrl();t&&(this._playlistsRotator?.destroy(),this._playlistsRotator=new Bd(this._eventBus,t,e),this.additionalInfo.playlistRotatorType="SimplePlaylistRotator")}_onVODPlaylistDetected(e){if(this._playlistsRotator instanceof zd)return;this._eventBus.publish(If.playlistRotatorTypeChanged,Vd.VOD),this._logger.info("VOD playlist detected, switching to VOD loader");const t=this._buildUrl();t&&(this._playlistsRotator?.destroy(),this._playlistsRotator=new zd(this._eventBus,t,e),this.additionalInfo.playlistRotatorType="VODPlaylistRotator")}_onLLPlaylistDetected(e){if(this._playlistsRotator instanceof kd)return;this._eventBus.publish(If.playlistRotatorTypeChanged,Vd.LOW_LATENCY),this._logger.info("LL Playlist detected, switching to ll loader");const t=this._buildUrl();t&&(this._playlistsRotator?.destroy(),this._playlistsRotator=new kd(this._eventBus,{url:t,startManifest:e,initialMSN:this._actualRenditionReport?.lastMsn,initialPN:this._actualRenditionReport?.lastPart,lastLoadedFragment:this._lastAddedFragment}),this.additionalInfo.playlistRotatorType="LowLatencyPlaylistRotator")}_resetPlaylistLoaders(){this._playlistsRotator?.abortCurrentPlaylistLoading(),this.status="Idle"}_onBrowserRedirectDetected({responseUrl:e}){this._streamUrl=e;const t=this._buildUrl();t&&this._playlistsRotator?.setURL(t,!0)}get additionalModules(){const e={};return this._playlistsRotator&&(e.playlistRotator=this._playlistsRotator),this._fragmentsLoader&&(e.fragmentLoader=this._fragmentsLoader),e}}(0,Wa.__decorate)([mc.default],$d.prototype,"_onFragmentAdded",null),(0,Wa.__decorate)([mc.default],$d.prototype,"_onSimplePlaylistDetected",null),(0,Wa.__decorate)([mc.default],$d.prototype,"_onVODPlaylistDetected",null),(0,Wa.__decorate)([mc.default],$d.prototype,"_onLLPlaylistDetected",null),(0,Wa.__decorate)([mc.default],$d.prototype,"_resetPlaylistLoaders",null),(0,Wa.__decorate)([mc.default],$d.prototype,"_onBrowserRedirectDetected",null),mc=Ga("eQOGK");class Gd extends dc{state=hc.OK;status="Idle";additionalInfo={currentResolution:""};groups=["resolutionsManager"];_currentResolutionsDecreasing=[];_currentResolution=null;_awaitingResolution=null;_lastMSN=-1;_lastDSN=-1;_lastPDT=-1;_url="";_isAutoEnabled=!0;_lastPlaylistRotatorType=Vd.SIMPLE;_streamLoader=null;_restartTimeout=null;_renditionReports=[];_lastLoadedFragment=null;_codecsByResolutions={};constructor(e){super("resolutionsManager",e),this._logger=Uu(e,"Doppio - ResolutionManager"),this._multiVariantsPlaylistDetectionListener=this._eventBus.subscribe(Rf.playlistType.multivariantDetected,this._onMultiVariantsPlaylists),this._onResolutionChangeRequestedListener=this._eventBus.subscribe(Rc,this._onResolutionChangeRequested),this._onPlaylistInfoAvailableListener=this._eventBus.subscribe(Rf.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onRestartFromMainRequestedListener=this._eventBus.subscribe(Ic,this._restartFormMain),this._onPlaylistRotatorTypeChangedListener=this._eventBus.subscribe(If.playlistRotatorTypeChanged,this._onPlaylistRotatorTypeChanged),this._onEndOfSegmentPlaylistLoadedListener=this._eventBus.subscribe(gc.playlists.lastPlaylistOfSegmentLoaded,this._onEndOfSegmentPlaylistLoaded),this._onFragmentAddedListener=this._eventBus.subscribe(Tc,this._onFragmentAdded)}destroy(){super.destroy(),this._restartTimeout&&(clearTimeout(this._restartTimeout),this._restartTimeout=null),this._eventBus.unsubscribe(this._multiVariantsPlaylistDetectionListener),this._eventBus.unsubscribe(this._onResolutionChangeRequestedListener),this._eventBus.unsubscribe(this._onPlaylistInfoAvailableListener),this._eventBus.unsubscribe(this._onRestartFromMainRequestedListener),this._eventBus.unsubscribe(this._onPlaylistRotatorTypeChangedListener),this._eventBus.unsubscribe(this._onEndOfSegmentPlaylistLoadedListener),this._eventBus.unsubscribe(this._onFragmentAddedListener),this._streamLoader?.destroy(),this._codecsByResolutions={}}setUrl(e){this._url!==e&&(this._lastPDT=-1,this._lastDSN=-1,this._lastMSN=-1,this._logger.info("Setting new url"),this._url=e,this._currentResolution=null,this._currentResolutionsDecreasing=[],this._restart())}setResolution(e,t=!1){if(this._awaitingResolution=null,e.name===this._currentResolution?.name)return;if(this._url&&nc(this._url).streamId&&nc(e.url).streamId&&nc(this._url).streamId!==nc(e.url).streamId)return void this._logger.warn(`Tried to set resolution with ${e.url}, but the current url is ${this._url}. Skipping since they don't match`);const r=this._currentResolution;this._logger.info(`Resolution changed: ${this._currentResolution?.name} -> ${e.name}`),this._currentResolution=e,this.additionalInfo.currentResolution=e.name,this._eventBus.publish(Ac,e),this._codecsByResolutions[e.url]&&this._eventBus.publish(Lc,{codec:this._codecsByResolutions[e.url]}),t&&r&&this._eventBus.publish(Pc,{prevResolution:r.name,nextResolution:e.name}),this._restart()}setNearestResolutionByWidth(e){return this._setResolutionByCriteria((({width:t})=>t<=e))}setNearestResolutionByHeight(e){return this._setResolutionByCriteria((({height:t})=>t<=e))}setNearestResolutionByBitrate(e){return this._setResolutionByCriteria((({bitrate:t})=>t<=e+this.config.initialResolutionBitrateThreshold))}setResolutionByName(e){return this._setResolutionByCriteria((({name:t})=>t===e))}toggleAutoResolution(e){this._isAutoEnabled=e}restart(){this._restart()}_handleConfigUpdated(){}_setResolutionByCriteria(e){const t=this._findResolutionByCriteria(e);return t?this.config.awaitForSegmentEndToSwitchManual&&this._currentResolution&&this._lastMSN>-1?(this._logger.info("Await for segment end for switch resolution"),void(this._awaitingResolution=t)):void this.setResolution(t):(this._logger.warn("There are no any resolution in current stream"),this.state=hc.ERROR,void(this._awaitingResolution=null))}_findResolutionByCriteria(e){if(!this._currentResolutionsDecreasing.length)return null;if(1===this._currentResolutionsDecreasing.length)return this._currentResolutionsDecreasing[0];const t=this._currentResolutionsDecreasing.find(e);return t||(this._eventBus.publish(jc,{}),!1!==this.config.useFallbackResolutionIfResolutionNotFound)?t||this._currentResolutionsDecreasing.slice(-1)[0]:null}_restartFormMain(){this._currentResolution=null,this._logger.info("Restart from main"),this._renditionReports=[],this._eventBus.publish(_c,{}),this._restart(2e3)}_restart(e=0){this._restartTimeout&&(clearTimeout(this._restartTimeout),this._restartTimeout=null),this._logger.info("Restart resolution manager"),this._destroyStreamLoader(),this._restartTimeout=setTimeout((()=>{this._recreateStreamLoader()}),e)}_destroyStreamLoader(){this._streamLoader?.destroy(),this._streamLoader=null,this.status="Awaiting resolutions"}_recreateStreamLoader(){this._destroyStreamLoader(),this._streamLoader=new $d(this._lastPlaylistRotatorType,this._lastLoadedFragment,this._eventBus),this._streamLoader.setActualRenditionReport(this._getActualRenditionReport()),this._streamLoader.startLoad(this._currentResolution?this._currentResolution.url:this._url)}_onMultiVariantsPlaylists(e){this._currentResolutionsDecreasing=Object.values(e).sort(((e,t)=>t.bitrate-e.bitrate)),this.additionalInfo.resolutionsAvailable=this._currentResolutionsDecreasing.map((({name:e})=>e)),this._eventBus.publish(Mc,this._currentResolutionsDecreasing),this.config.initialResolutionBitrate?this.setNearestResolutionByBitrate(this.config.initialResolutionBitrate):this.config.initialResolutionHeight?this.setNearestResolutionByHeight(this.config.initialResolutionHeight):this.config.initialResolutionWidth?this.setNearestResolutionByWidth(this.config.initialResolutionWidth):this.config.autoloadLowestResolution&&this.setResolution(this._currentResolutionsDecreasing.slice(-1)[0])}_onEndOfSegmentPlaylistLoaded(){this._awaitingResolution&&(this._logger.info("Last playlist of segment loaded. Ready to switch"),this.setResolution(this._awaitingResolution,!0))}_onFragmentAdded(e){this._lastLoadedFragment=e}_onPlaylistInfoAvailable(e){const{mediaSequence:t,discontinuitySequence:r,segments:n}=e;if(e.playlists&&(this._codecsByResolutions=e.playlists.reduce(((e,t)=>t.attributes?.CODECS?{...e,[t.uri]:t.attributes.CODECS}:e),{})),void 0===t||void 0===r||void 0===n)return;const i=n[0]?.dateTimeObject?.getTime()||0;-1===this._lastPDT||-1===this._lastDSN||-1===this._lastMSN||(r!==this._lastDSN&&(this._logger.info("DSN changed. Requesting overplay"),this._eventBus.publish(_c,{})),Math.abs(i-this._lastPDT)>this.config.maxPlaylistTimeDifference&&(this._logger.warn("PDT delta reached max delta. Restarting from main"),this._restartFormMain())),this._lastMSN=t,this._lastDSN=r,this._lastPDT=i,this._renditionReports=e.renditionReports||[],this._streamLoader?.setActualRenditionReport(this._getActualRenditionReport())}_onResolutionChangeRequested(e){if(this._isAutoEnabled)return this.config.awaitForSegmentEndToSwitch?(this._logger.info("Await for segment end for switch resolution"),void(this._awaitingResolution=e)):void this.setResolution(e,!0)}_getActualRenditionReport(){if(!this._renditionReports.length)return null;try{return this._renditionReports.find((({uri:e})=>new URL(e).pathname===new URL(this._currentResolution?.url||"").pathname))||null}catch(tv){return null}}_onPlaylistRotatorTypeChanged(e){this._lastPlaylistRotatorType=e}get additionalModules(){return this.additionalInfo.isAutoEnabled=this._isAutoEnabled,this._streamLoader?{streamLoader:this._streamLoader}:{}}}(0,Wa.__decorate)([mc.default],Gd.prototype,"_handleConfigUpdated",null),(0,Wa.__decorate)([mc.default],Gd.prototype,"_restartFormMain",null),(0,Wa.__decorate)([mc.default],Gd.prototype,"_onMultiVariantsPlaylists",null),(0,Wa.__decorate)([mc.default],Gd.prototype,"_onEndOfSegmentPlaylistLoaded",null),(0,Wa.__decorate)([mc.default],Gd.prototype,"_onFragmentAdded",null),(0,Wa.__decorate)([mc.default],Gd.prototype,"_onPlaylistInfoAvailable",null),(0,Wa.__decorate)([mc.default],Gd.prototype,"_onResolutionChangeRequested",null),(0,Wa.__decorate)([mc.default],Gd.prototype,"_onPlaylistRotatorTypeChanged",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class Wd{_isResolutionSelected=!1;constructor(e,t){this._eventBus=t,this._sendEvent=e,this._isDebugEnabled=document?.cookie?.includes("__mmpDebug__=1"),this._onPlaylistLoadingStartedListener=this._eventBus.subscribe(gc.playlists.playlistRequested,this._onPlaylistLoadingStarted),this._onResolutionChangedListener=this._eventBus.subscribe(Ac,this._onResolutionChanged),this._onResolutionChangedAutoListener=this._eventBus.subscribe(Pc,this._onResolutionAutoChanged),this._onPlaylistLoadedListener=this._eventBus.subscribe(gc.playlists.playlistLoaded,this._onPlaylistLoaded),this._onPlaylistParsedListener=this._eventBus.subscribe(gc.playlists.playlistInfo,this._onPlaylistInfoAvailable),this._onFragmentLoadedListener=this._eventBus.subscribe(Af.fragments.fragmentLoaded,this._onFragmentLoaded),this._onDebuggerConnectedListener=this._eventBus.subscribe(sf,this._onDebuggerConnected),this._onNetworkRequestSettledListener=this._eventBus.subscribe(Fc.networkRequestSettled,this._onNetworkRequestSettled)}destroy(){this._eventBus.unsubscribe(this._onPlaylistLoadingStartedListener),this._eventBus.unsubscribe(this._onPlaylistLoadedListener),this._eventBus.unsubscribe(this._onPlaylistParsedListener),this._eventBus.unsubscribe(this._onFragmentLoadedListener),this._eventBus.unsubscribe(this._onDebuggerConnectedListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onResolutionChangedAutoListener),this._eventBus.unsubscribe(this._onNetworkRequestSettledListener)}_onPlaylistLoadingStarted(){this._isResolutionSelected||this._sendEvent(new CustomEvent(Jc.MANIFEST_LOADING))}_onResolutionChanged(){this._isResolutionSelected=!0}_onPlaylistLoaded(e){const{originalUrl:t,realUrl:r,stats:n}=e;this._isResolutionSelected?this._sendEvent(new CustomEvent(Jc.LEVEL_LOADED,{detail:{netStats:n}})):this._sendEvent(new CustomEvent(Jc.MANIFEST_LOADED,{detail:{originalUrl:t,realUrl:r}}))}_onPlaylistInfoAvailable(e){this._sendEvent(new CustomEvent(Jc.MANIFEST_PARSED,{detail:e}))}_onFragmentLoaded(e){this._sendEvent(new CustomEvent(Jc.FRAG_LOADED,{detail:{netStats:e.stats,duration:e.duration}}))}_onDebuggerConnected(e){this._sendEvent(new CustomEvent(Jc.DEBUGGER_CONNECTED,{detail:{panelUrl:e}}))}_onResolutionAutoChanged({prevResolution:e,nextResolution:t}){this._sendEvent(new CustomEvent(Jc.LEVEL_SWITCHED_AUTO,{detail:{prevResolution:e,nextResolution:t}}))}_onNetworkRequestSettled({response:e}){this._isDebugEnabled&&globalThis.dispatchEvent(new CustomEvent("mmpFetchSettled",{detail:{response:e}}))}}(0,Wa.__decorate)([mc.default],Wd.prototype,"_onPlaylistLoadingStarted",null),(0,Wa.__decorate)([mc.default],Wd.prototype,"_onResolutionChanged",null),(0,Wa.__decorate)([mc.default],Wd.prototype,"_onPlaylistLoaded",null),(0,Wa.__decorate)([mc.default],Wd.prototype,"_onPlaylistInfoAvailable",null),(0,Wa.__decorate)([mc.default],Wd.prototype,"_onFragmentLoaded",null),(0,Wa.__decorate)([mc.default],Wd.prototype,"_onDebuggerConnected",null),(0,Wa.__decorate)([mc.default],Wd.prototype,"_onResolutionAutoChanged",null),(0,Wa.__decorate)([mc.default],Wd.prototype,"_onNetworkRequestSettled",null);mc=Ga("eQOGK");class Yd{state=hc.OK;status="Idle";groups=["general"];_lastMetrics=null;get additionalInfo(){return{totalHeapSize:performance.memory?.totalJSHeapSize,usedHeapSize:performance.memory?.usedJSHeapSize,sizeLimit:performance.memory?.jsHeapSizeLimit,...this._lastMetrics||{}}}}Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");var Hd=Ga("3264a");class Qd extends dc{_debuggableModules={};_modulesInfoGatheringInterval=null;_debuggerWorker=null;constructor(e){super("debugger",e),this._onLifecycleEventReportedListener=this._eventBus.subscribe(of,this._onLifecycleEventReported),this.config.enableRemoteDebugging&&this.config.debuggerUrl&&this.config.maxWSConnectionRetries&&this._startDebugger()}registerDebuggableModules(e){this._debuggableModules={...this._debuggableModules,...e}}unregisterDebuggableModules(e){e.forEach((e=>{delete this._debuggableModules[e]}))}destroy(){super.destroy(),this._debuggerWorker?.disconnect(),this._eventBus.unsubscribe(this._onLifecycleEventReportedListener)}_handleConfigUpdated(e){this._debuggerWorker&&(e.debuggerUrl||e.maxWSConnectionRetries)&&(this._destroyWorker(),this._getDebuggerModule()),!1===e.enableRemoteDebugging&&this._stopDebugger(),e.enableRemoteDebugging&&(this._destroyWorker(),this._getDebuggerModule()),e.modulesStateGatheringPeriod&&(this._disarmSendModulesInfoTimeout(),this._armSendModulesInfoTimeout())}_destroyWorker(){this._debuggerWorker?.disconnect(),this._debuggerWorker=null}_startDebugger(){this._getDebuggerModule(),this._armSendModulesInfoTimeout()}_stopDebugger(){this._debuggerWorker&&(this._debuggerWorker.disconnect(),this._disarmSendModulesInfoTimeout())}async _sendMessage(e){(await this._getDebuggerModule()).sendMessage(e)}_onConnected(e){this._eventBus.publish(sf,e),this._armSendModulesInfoTimeout()}_onDisconnected(){this._disarmSendModulesInfoTimeout()}_onLifecycleEventReported(e){this._debuggerWorker&&this.config.enableLifecycleEvents&&this._sendMessage({command:Hd.ECommand.MODULE_LIFECYCLE_EVENT_AVAILABLE,event:e})}_armSendModulesInfoTimeout(){this._modulesInfoGatheringInterval=globalThis.setInterval(this._sendModulesInfo,this.config.modulesStateGatheringPeriod)}_disarmSendModulesInfoTimeout(){this._modulesInfoGatheringInterval&&globalThis.clearInterval(this._modulesInfoGatheringInterval)}_unzipDebuggableModules(e){let t={...e};return Object.values(e).forEach((e=>{e.additionalModules&&(t={...t,...this._unzipDebuggableModules(e.additionalModules)})})),t}_sendModulesInfo(){const e=this._unzipDebuggableModules(this._debuggableModules),t=Object.entries(e).reduce(((e,[t,r])=>(e[t]={additionalInfo:r.additionalInfo,state:r.state,groups:r.groups,status:r.status},e)),{});this._sendMessage({command:Hd.ECommand.MODULES_INFO_AVAILABLE,payload:t})}async _getDebuggerModule(){if(!this._debuggerWorker){const{DebuggerWorker:e}=await Ga("iVqGx");this._debuggerWorker=new e,this._debuggerWorker.setConfig(this.config.debuggerUrl,this.config.maxWSConnectionRetries,this._onConnected,this._onDisconnected),this._debuggerWorker.connect()}return this._debuggerWorker}}(0,Wa.__decorate)([mc.default],Qd.prototype,"_onConnected",null),(0,Wa.__decorate)([mc.default],Qd.prototype,"_onDisconnected",null),(0,Wa.__decorate)([mc.default],Qd.prototype,"_onLifecycleEventReported",null),(0,Wa.__decorate)([mc.default],Qd.prototype,"_sendModulesInfo",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK");class Kd extends dc{_initSectionCache=null;_expectedUnitedChunkName="";_fragmentsCache=[];constructor(e){super("fragmentBuffer",e),this._logger=Uu(e,"Doppio - FragmentsBuffer"),this._onFragmentReleasedListenerToken=this._eventBus.subscribe(Kf,this._onFragmentReleasedFromQueue),this._onSaveDataRequestedListenerToken=this._eventBus.subscribe(Xf,this.sendUnitedChunk)}destroy(){super.destroy(),this._eventBus.unsubscribe(this._onFragmentReleasedListenerToken),this._eventBus.unsubscribe(this._onSaveDataRequestedListenerToken),this._initSectionCache=null,this._fragmentsCache=[]}sendUnitedChunk(){if(this._initSectionCache&&!(Math.random()>this.config.saveProbability))try{const e=(e=>{const t=e.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(t);return e.reduce(((e,t)=>(r.set(t,e),e+t.byteLength)),0),r.buffer})([this._initSectionCache.data].concat(...this._fragmentsCache.map((({data:e})=>e)))),t=new Headers;t.append("Content-Type","video/mp4"),fetch(`https://${this.config.baseChunksSaverUrl}/${this._expectedUnitedChunkName}`,{method:"PUT",headers:t,body:e,redirect:"follow"}).catch((e=>{this._logger.warn(`Could not save problem chunks: ${e}`)}))}catch(tv){this._logger.warn(`Could not save problem chunks: ${tv}`)}}_onFragmentReleasedFromQueue(e){try{for(const t of e){if(t.isInitSection)return this._initSectionCache=t,this._expectedUnitedChunkName=t.url.split("/").slice(-1)[0],void(this._fragmentsCache=[]);this._fragmentsCache.push(t);const r=Math.max(...e.map((({msn:e})=>e))),n=Math.max(0,r-this.config.numberOfFragmentsToKeepInBuffer+1);this._fragmentsCache=this._fragmentsCache.filter((({msn:e})=>e>=n))}}catch(e){this._logger.warn("Could not handle fragment"),this._fragmentsCache=[],this._initSectionCache=null}}}let Xd;(0,Wa.__decorate)([mc.default],Kd.prototype,"sendUnitedChunk",null),(0,Wa.__decorate)([mc.default],Kd.prototype,"_onFragmentReleasedFromQueue",null),Ga("8NFq9"),Wa=Ga("a8VW4"),mc=Ga("eQOGK"),(Xd||(Xd={})).SAME_PLAYLIST_LOADED_MORE_TIMES="Same playlist was loaded more than expected times. Looks lise server is malfunctioning";class Jd extends Error{constructor(e,t,r){super(e),this.name="DoppioNetworkError",this.statusCode=t,this.statusText=r}}const Zd="LifecycleEventsManager.LIFECYCLE_EVENT",eh="LifecycleEventsManager.LIFECYCLE_ERROR";class th{_manifestLoaded=!1;_firstMediaPlaylistLoaded=!1;_firstFragmentLoaded=!1;_firstFragmentBuffered=!1;constructor(e){this._eventBus=e,this._onManifestLoadedListener=this._eventBus.subscribe(gc.playlistType.multivariantDetected,this._onManifestLoaded),this._onSimplePlaylistDetectedListener=this._eventBus.subscribe(gc.playlistType.simpleDetected,this._onPlaylistLoaded),this._onLLPlaylistDetectedListener=this._eventBus.subscribe(gc.playlistType.llDetected,this._onPlaylistLoaded),this._onVODPlaylistDetectedListener=this._eventBus.subscribe(gc.playlistType.vodDetected,this._onPlaylistLoaded),this._onFragmentLoadedListener=this._eventBus.subscribe(Af.fragments.fragmentLoaded,this._onFragmentLoaded),this._onFragmentBufferedListener=this._eventBus.subscribe(Tc,this._onFragmentBuffered),this._onFragmentLoadErrorListener=this._eventBus.subscribe(Af.fragments.fragmentLoadingError,this._onFragmentLoadError),this._onFragmentLoadAbortListener=this._eventBus.subscribe(Af.fragments.fragmentLoadingAborted,this._onFragmentLoadError),this._onPlaylistLoadErrorListener=this._eventBus.subscribe(gc.playlists.playlistLoadingError,this._onPlaylistLoadError)}destroy(){this._eventBus.unsubscribe(this._onManifestLoadedListener),this._eventBus.unsubscribe(this._onSimplePlaylistDetectedListener),this._eventBus.unsubscribe(this._onLLPlaylistDetectedListener),this._eventBus.unsubscribe(this._onVODPlaylistDetectedListener),this._eventBus.unsubscribe(this._onFragmentLoadedListener),this._eventBus.unsubscribe(this._onFragmentBufferedListener),this._eventBus.unsubscribe(this._onFragmentLoadErrorListener),this._eventBus.unsubscribe(this._onFragmentLoadAbortListener),this._eventBus.unsubscribe(this._onPlaylistLoadErrorListener)}reset(){this._manifestLoaded=!1,this._firstMediaPlaylistLoaded=!1,this._firstFragmentLoaded=!1,this._firstFragmentBuffered=!1}_onManifestLoaded(){this._manifestLoaded||(this._manifestLoaded=!0,this._eventBus.publish(Zd,{eventType:Hc.MANIFEST_LOADED}))}_onPlaylistLoaded(){this._firstMediaPlaylistLoaded||(this._firstMediaPlaylistLoaded=!0,this._eventBus.publish(Zd,{eventType:Hc.FIRST_MEDIA_PLAYLIST_LOADED}))}_onFragmentLoaded(){this._firstFragmentLoaded||(this._firstFragmentLoaded=!0,this._eventBus.publish(Zd,{eventType:Hc.FIRST_FRAGMENT_LOADED}))}_onFragmentBuffered(){this._firstFragmentBuffered||(this._firstFragmentBuffered=!0,this._eventBus.publish(Zd,{eventType:Hc.FIRST_FRAGMENT_BUFFERED}))}_onFragmentLoadError(e){this._eventBus.publish(eh,{errorType:Kc.FRAGMENT_LOAD_ERROR,nativeError:new Jd(` ${e.error?.statusText} (${e.error?.status})`,e.error?.status||-1,e.error?.statusText||"No status text known")})}_onPlaylistLoadError({error:e}){this._eventBus.publish(eh,{errorType:this._manifestLoaded?Kc.PLAYLIST_LOAD_ERROR:Kc.MANIFEST_LOAD_ERROR,nativeError:new Jd(`Could not load ${this._manifestLoaded?"playlist":"manifest"}: ${e?.statusText}(${e?.status})`,e?.status||-1,e?.statusText||"No status text known")})}}(0,Wa.__decorate)([mc.default],th.prototype,"_onManifestLoaded",null),(0,Wa.__decorate)([mc.default],th.prototype,"_onPlaylistLoaded",null),(0,Wa.__decorate)([mc.default],th.prototype,"_onFragmentLoaded",null),(0,Wa.__decorate)([mc.default],th.prototype,"_onFragmentBuffered",null),(0,Wa.__decorate)([mc.default],th.prototype,"_onFragmentLoadError",null),(0,Wa.__decorate)([mc.default],th.prototype,"_onPlaylistLoadError",null);class rh extends EventTarget{_eventBus=new Gf;_loggerTransport=null;_fragmentParser=new Hf(this._eventBus);_fragmentQueue=new td(this._eventBus);_buffer=new $f(this._eventBus);_resolutionManager=new Gd(this._eventBus);_abrController=new Wc(this._eventBus);_debugger=new Qd(this._eventBus);_fragmentsFilter=new Jf(this._eventBus);_fragmentsBuffer=new Kd(this._eventBus);_url=null;_key=null;_videoElement=null;_isStarted=!1;_commonMetricsCollector=new Yd;_lifecycleEventsManager=new th(this._eventBus);constructor(){super();const e=(Math.random()+1).toString(36).substring(7);this._eventBus.setAppId(e),this._loggerTransport=new $u(this._eventBus,lc,[],[]),this._logger=Uu(this._eventBus,"Doppio - core"),this._logger.info("Created"),this._onResolutionsAvailableListener=this._eventBus.subscribe(Mc,this._onResolutionsAvailable),this._onMetricsAvailableListener=this._eventBus.subscribe(vc,this._onBufferMetricsAvailable),this._onResolutionChangedListener=this._eventBus.subscribe(Ac,this._onResolutionChanged),this._onStreamEndedListener=this._eventBus.subscribe(wc,this._onStreamEnded),this._onPlaybackStateChangedListener=this._eventBus.subscribe(Ec,this._onPlaybackStateChanged),this._legacyEventsController=new Wd(this.dispatchEvent.bind(this),this._eventBus),this._debugger.registerDebuggableModules({fragmentQueue:this._fragmentQueue,commonInfo:this._commonMetricsCollector,resolutionManager:this._resolutionManager,abr:this._abrController}),this._onLifecycleEventReportedListener=this._eventBus.subscribe(Zd,this._onLifecycleEventReported),this._onLifecycleErrorReportedListener=this._eventBus.subscribe(eh,this._onLifecycleErrorReported),this._onResolutionNotFoundListener=this._eventBus.subscribe(jc,this._onResolutionNotFound),this._onFragmentsFilterProblemDetectedListener=this._eventBus.subscribe(Yf,this._onFragmentFilterProblemDetected)}destroy(){this._eventBus.unsubscribe(this._onResolutionsAvailableListener),this._eventBus.unsubscribe(this._onResolutionChangedListener),this._eventBus.unsubscribe(this._onMetricsAvailableListener),this._eventBus.unsubscribe(this._onStreamEndedListener),this._eventBus.unsubscribe(this._onPlaybackStateChangedListener),this._eventBus.unsubscribe(this._onLifecycleEventReportedListener),this._eventBus.unsubscribe(this._onLifecycleErrorReportedListener),this._eventBus.unsubscribe(this._onResolutionNotFoundListener),this._eventBus.unsubscribe(this._onFragmentsFilterProblemDetectedListener),this._fragmentParser.destroy(),this._buffer.destroy(),this._resolutionManager.destroy(),this._abrController.destroy(),this._fragmentQueue.destroy(),this._debugger.destroy(),this._legacyEventsController.destroy(),this._videoElement?.removeEventListener("error",this._onMediaElementError),this._logger.info("Destroyed"),this._lifecycleEventsManager.destroy(),this._fragmentsFilter.destroy(),this._fragmentsBuffer.destroy(),setTimeout((()=>{this._loggerTransport?.destroy()}),1e3),(async e=>{const t=await fd(e);t&&t.terminate(),cd.delete(e)})(this._eventBus.getAppId())}get version(){return"v1.13.2"}get isStarted(){return this._isStarted}recoverMediaError(){this._buffer.detachVideoElement(),this._videoElement&&this._buffer.attachVideoElement(this._videoElement),this._resolutionManager.restart(),this._videoElement?.play()}start(){this._url?(this._videoElement||this._logger.warn("Video element is not defined."),this._isStarted?this._restart():(this._debugger.registerDebuggableModules({bufferController:this._buffer}),this._resolutionManager.setUrl(this._url),this._isStarted=!0)):this._logger.fatal("Stream URL is not defined. Cannot start player")}setUrl(e){if(!e.trim())return this._stop(),this;const t=(e=>{if(pd(e))return e;const t=new URL(document.location.href);if(e.startsWith("/"))return`${t.origin}${e}`;const r=t.pathname.split("/").filter((e=>e.trim().length>0));return r.pop()||r.pop(),`${t.origin}/${r.concat(e).join("/")}`})(e),r=this._url!==t&&this._isStarted;return this._url=t,this._key=null,r&&(this._lifecycleEventsManager.reset(),this._restart()),this}setKey(e){return this._key=e,this}setVideoElement(e){return e===this._videoElement||(this._videoElement&&(this._buffer.detachVideoElement(),this._videoElement.removeEventListener("error",this._onMediaElementError)),this._videoElement=e,this._buffer.attachVideoElement(e),this._buffer.scheduleSourceBufferRecreation(),this._videoElement.addEventListener("error",this._onMediaElementError)),this}getFragmentQueue(){return this._fragmentQueue.getCurrentQueue()}setLoggerLevel(e,t=[],r=[]){return this._loggerTransport&&(this._loggerTransport.destroy(),this._loggerTransport=null),this._loggerTransport=new $u(this._eventBus,e,t,r),this}setResolutionByName(e){return this._resolutionManager.setResolutionByName(e),this}setResolutionByBitrate(e){return this._resolutionManager.setNearestResolutionByBitrate(e)}disableABR(){return this._resolutionManager.toggleAutoResolution(!1),this}enableABR(){return this._resolutionManager.toggleAutoResolution(!0),this}setConfig(e){fc(e,this._eventBus)}setMaxABRResolution(e){this._eventBus.publish(xc,e)}async _restart(){this._logger.info("restarting"),this._buffer?.reset(),await this.recoverMediaError(),this._fragmentParser.destroy(),this._fragmentParser=new Hf(this._eventBus),this._fragmentQueue.reset(),this._url&&this._resolutionManager.setUrl(this._url)}_stop(){this._url=null,this._restart(),this._resolutionManager.setUrl("")}_onResolutionsAvailable(e){this.dispatchEvent(new CustomEvent(Jc.VARIANTS_DETECTED,{detail:e}))}_onStreamEnded(){this.dispatchEvent(new Event(Jc.STREAM_ENDED))}_onResolutionChanged(e){this.dispatchEvent(new CustomEvent(Jc.RESOLUTION_CHANGED,{detail:e}))}_onBufferMetricsAvailable(e){this.dispatchEvent(new CustomEvent(Jc.METRICS_AVAILABLE,{detail:e}))}_onPlaybackStateChanged({prevState:e,nextState:t}){this.dispatchEvent(new CustomEvent(Jc.PLAYBACK_STATE_CHANGED,{detail:{prevState:e,nextState:t}}))}_onFragmentFilterProblemDetected({reason:e,fragment:t}){this.dispatchEvent(new CustomEvent(Jc.FRAGMENT_FILTERED_OUT,{detail:{reason:e,fragment:t}}))}_onMediaElementError(){rd.reportError("VideoElementError",{msg:this._videoElement?.error?.message,code:this._videoElement?.error?.code}),this._eventBus.publish(Xf,{}),this._logger.error(`Media error occurred ${this._videoElement?.error?.message} ${this._videoElement?.error?.code}`),this._videoElement?.error&&this.recoverMediaError()}_onLifecycleEventReported({eventType:e}){this.dispatchEvent(new CustomEvent(Jc.LIFECYCLE_EVENT,{detail:{eventType:e}}))}_onLifecycleErrorReported({errorType:e,nativeError:t}){this.dispatchEvent(new CustomEvent(Jc.LIFECYCLE_ERROR,{detail:{errorType:e,nativeError:t}}))}_onResolutionNotFound(){this.dispatchEvent(new CustomEvent(Jc.RESOLUTION_NOT_FOUND))}_addAirPlaySourceIfNeeded(){if(this._url&&this._videoElement&&window.ManagedMediaSource){const e=document.createElement("source");e.type="application/x-mpegURL",e.src=this._url.replace(/playlistType=lowLatency/gi,""),this._videoElement.appendChild(e)}}}(0,Wa.__decorate)([mc.default],rh.prototype,"_onResolutionsAvailable",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onStreamEnded",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onResolutionChanged",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onBufferMetricsAvailable",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onPlaybackStateChanged",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onFragmentFilterProblemDetected",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onMediaElementError",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onLifecycleEventReported",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onLifecycleErrorReported",null),(0,Wa.__decorate)([mc.default],rh.prototype,"_onResolutionNotFound",null);var nh=[401,403,404],ih=function(e){var t,r=e.video,n=e.stream,i=e.modelId,o=e.quality,s=e.onPlay,a=e.onError,u=e.onDownload,l=e.thumbFit,c=e.thumbPlace,f=e.isVertical,d=n.urls,h=void 0===d?{}:d,p=n.url,g=!1,m=h[o]||p,y=function(e){var t=e.detail;u(t.netStats.sizeInKb),s()};return{pause:function(){return t&&g&&(t.setUrl(""),g=!1),Promise.resolve()},play:function(){if(t)return g||(s(),g=!0,t.setUrl(m).start()),Promise.resolve();Sa(r,n,{thumbFit:l,thumbPlace:c},f);var e=new rh;t=e,g=!0,s();var o=function(e){var t=e.modelId,r=e.onError,n=e.instance;return function(e){var i=e.detail,o=i.errorType,s=i.nativeError,a=s.statusCode,u=s.statusText,l=(document.cookie.includes("sc-dev-hls"),o===Kc.MANIFEST_LOAD_ERROR||a>500);(l||nh.includes(a))&&(l&&n.destroy(),r({fatal:l,type:"hls",response:{text:u,code:a},modelId:t}))}}({modelId:i,onError:a,instance:t});return t.addEventListener(Jc.FRAG_LOADED,y),t.addEventListener(Jc.LIFECYCLE_ERROR,o),e.setVideoElement(r),e.setUrl(m).start(),Promise.resolve()},destroy:function(){t&&t.destroy()}}},oh=function(e){var t=e.video,r=e.stream,n=e.quality,i=e.onPlay,o=e.onError,s=e.thumbFit,a=e.isUsePreroll,u=r.urls,l=void 0===u?{}:u,c=r.url;t.src=a?c:l[n]||c,ya({video:t,onPlay:i,onError:o,onMetaLoaded:function(){t.setAttribute("metaloaded","true"),Sa(t,void 0,s)}})};o(3724);function sh(e){return function(e){if(Array.isArray(e))return ah(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ah(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ah(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ah(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var uh=function(e,t,r){var n=e.video,i=e.stream,o=e.modelId,s=function(e){var t=e.urls,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;if("optimal"===n){var o=Object.keys(r).reduce((function(e,t){var r=parseFloat(t);return Number.isNaN(r)?e:[].concat(sh(e),[r])}),[]).sort().find((function(e){return e>=i}));return o&&"".concat(o,"p")}return r[n]?n:void 0}(i,Nt(t),n.clientHeight),a=ct(t),u=a.usePreroll,l=a.thumbFit,c=a.thumbPlace,f=a.landing,d=i.url.includes(".mp4"),h={video:n,stream:i,modelId:o,thumbFit:l,thumbPlace:c,isVertical:"vertical"===f,quality:s,onPlay:function(){return r(Ia({modelId:o}))},onError:function(e){return r(ja(e))},onDownload:function(e){return r(Da(e))},isUsePreroll:u},p=i.urls,g=void 0===p?{}:p,m=i.url,y=g[s]||m,_={video:n,stream:i,modelId:o,quality:s,streamUrl:y};switch(!0){case i.local:case d:oh(h);break;case ai():_.hls=ih(h);break;case!!n.canPlayType("application/vnd.apple.mpegurl"):oh(h)}return _},lh=Ve("Model updated"),ch=Ve("Thumb appeared"),fh=Ve("Thumb disappeared"),dh=Ve("traffic limit exceeded"),hh=Ve("traffic consumed");o(1771);function ph(e){return function(e){if(Array.isArray(e))return gh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gh(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var mh="sCashGuestId",yh=function(e){if(e.has(mh))return e.get(mh);var t=ph(Array(64)).map((function(){return Math.floor(16*Math.random()).toString(16)})).join("");return e.set(mh,t,90),t};function _h(e){return function(e){if(Array.isArray(e))return vh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vh(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).some((function(r){return t[r]===e}))},Sh={key:"autoplay",title:"Autoplay",description:"\n    Possible values:\n    \n    onHover - default, play/stop on thumb's mouse hover/leave\n    all - the first 3 thumbs are playing immediately if a page is in focus and thumbs are in viewport, other thumbs are playing on hover. Autoplay stops after 1 min, thumbs can be played on hover.\n    notAtAll - thumbs are not playing.\n    forced to notAtAll, if nonNudeContent=1\n    Available values : onHover, all, notAtAll\n  ",section:Zn,type:Ee,enum:Object.values(Ln),default:Ln.ON_HOVER,multiple:!1},Eh=function(){return ai()||Boolean(document.createElement("video").canPlayType("application/vnd.apple.mpegurl"))},wh=["fatal","type","modelId"];function Th(e){return Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(e)}function Lh(e){return function(e){if(Array.isArray(e))return Oh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Oh(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ah(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mh(Object(r),!0).forEach((function(t){Ph(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ph(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Th(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Th(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Th(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rh=6e4,Ih=function(e){return function(t){var r=t.modelId,n=t.force;return function(t){return{playingState:Ah(Ah({},t.playingState),{},Ph({},r,n||Oa(t,r,Ma((function(e){return e.id===r}),t.modelsList))===e&&e))}}}},jh=function(e){return e.modelsList.filter(La(e)).map((function(e){return e.id}))},Dh=Ye((function(e,t,r,n){var i,o,s,a,u,l,c,f,d=e.navigator,h=function(){var e={},t={};return{waitFor:function(e){var r,n=this.get(e);if(n)return Promise.resolve(n);var i=new Promise((function(e){r=e}));return t[e]=[].concat(ga(t[e]||[]),[r]),i},create:function(r,n){e[r]=n,(t[r]||[]).forEach((function(e){return e(n)}))},update:function(t,r){e[t]=ha(ha({},e[t]||{}),r)},get:function(t){return e[t]},all:function(){return Object.values(e)},clearTimeouts:function(e){var t=this.get(e);t&&(clearTimeout(t.recoveryTimeout),delete t.recoveryTimeout)},clearPlayingInterval:function(e){var t=this.get(e);t&&clearInterval(t.playingInterval)}}}(),p=Xe({playingState:{},playerEnabled:!0,isPlaybackErrorSent:!1,failedToPlayCount:0,viewEventTimes:{}}).on(Zt,(function(){return function(e){return{playingState:e.modelsList.reduce((function(t,r,n){var i=r.id;return Ah(Ah({},t),{},Ph({},i,Oa(e,i,n)))}),{})}}})).on(Pa,Ih(!0)).on(Ra,Ih(!1)).on(Ba,(function(e){return e})).on(Na,(function(){return{playerEnabled:!1}})).on(Ca,(function(){return{playerEnabled:!0}})).on(xa,(function(e){return function(t){return{viewEventTimes:Ah(Ah({},t.viewEventTimes),{},Ph({},e,Date.now()))}}})).on(ka,(function(){return{isPlaybackErrorSent:!0}})),g=(i=function(e){return function(t){var r=e.get(t)||{},n=r.video,i=r.hls,o=r.playing,s=void 0===o?Promise.resolve():o,a=r.isPlaying;n&&(void 0===a||!a)&&e.update(t,{playing:s.then((function(){return Promise.resolve(i?i.play():n.play()).catch(si)})),isPlaying:!0})}}(h),o=function(e){return function(t){var r=e.get(t)||{},n=r.video,i=r.hls,o=r.playing,s=void 0===o?Promise.resolve():o,a=r.isPlaying;n&&a&&(e.clearTimeouts(t),e.update(t,{playing:s.then((function(){return Promise.resolve(i?i.pause():n.pause()).catch(si)})),isPlaying:!1}))}}(h),s=[],a=[],u=null,l=0,c=function(){return s[0]&&i(s[0])},{get items(){return s},get size(){return l},setOrder:function(e){a=e},isHeadedWith:function(e){return s[0]===e},append:function(e){s.includes(e)||(s=[].concat(_h(s),[e]).sort((function(e,t){return a.indexOf(e)-a.indexOf(t)})),l+=1)},remove:function(e){var t=s.length;(s=s.filter((function(t){return t!==e}))).length<t&&(l-=1),o(e)},replace:function(e,t){this.remove(e),this.append(t)},run:function(e){s=a.filter((function(t){return e.playingState[t]})),u=setInterval(c,300)},stop:function(){clearInterval(u)},enough:function(){s=[],l=0,a.forEach(o)},destroy:function(){this.stop(),this.enough()},next:function(){s.shift(),c()}}),m=Da.effect((function(e){return function(t,r){return r(hh(e))}})),y=dh.effect((function(){return function(e,t){t.apply(void 0,Lh(Aa(e).map((function(e){return Ra({modelId:e})})))),g.stop()}})),_=$e.effect((function(){return function(e,t){e.config.nonStopPlaying||setTimeout((function(){t(Na())}),6e4)}})),v=Na.effect((function(){return g.enough()})),b=Pa.effect((function(e){var n=e.modelId,i=e.force;return function(e){var o=e.playingState;if(e.playerEnabled&&o[n]&&g.size<3||i){g.append(n);var s=ct(e),a=s.landing,u=s.queryParams,l=u.userId,c=u.smartpopId,f=u.masterSmartpopId,d=u.sourceId,p=u.creativeId,m=u.p1;if(Vr("storePlay")(e).enabled){var y=h.get(n),_=null!=y&&y.hls?"hls":"video";null!=y&&y.playingInterval&&h.clearPlayingInterval(n),h.update(n,{playingInterval:setInterval((function(){var e,i,o,s=h.get(n).playingTime||0;s%Rh==0&&(e=s/Rh,i=Er(r),o={type:_,minute:e,landing:a,domain:r.hostname,userId:l,smartpopId:c,masterSmartpopId:f,sourceId:d,creativeId:p,p1:m},t.post("".concat(i,"/metric/store/play"),{message:o})),h.update(n,{playingTime:s+1e3})}),1e3)})}}}})),S=Ra.effect((function(e){var t=e.modelId;return function(e){e.playingState[t]||(g.remove(t),h.clearPlayingInterval(t))}})),E=Ia.effect((function(e){var t=e.modelId;g.isHeadedWith(t)&&g.next(),h.clearTimeouts(t)})),w=Zt.effectOnce((function(){return function(e){g.setOrder(jh(e)),g.run(e)}})),T=tr.effect((function(e){var t=e.modelId,r=e.replaceBy;return function(e){return h.waitFor(r.id).then((function(){g.setOrder(jh(e)),g.replace(t,r.id)}))}})),L=ja.effect((function(e){var i=e.fatal,o=e.type,s=e.modelId,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,wh);return function(e,u){var l=h.get(s),c=ct(e),f=c.landing,d=c.thumbFit,p=c.queryParams.userId,g=void 0===p?"":p,m=Vr("storePlaybackError")(e);if(!i&&!e.isPlaybackErrorSent&&m.enabled){var y,_=Er(r),v=(null==a||null===(y=a.response)||void 0===y?void 0:y.text)||"";t.post("".concat(_,"/metric/store/creative-playback-error"),{message:Ah(Ah({type:o,error:!0,landing:f,guestId:yh(n)},g?{userId:g}:[]),v?{errorMessage:v}:[])}),u(ka())}!i&&e.window.hasFocus&&l&&(l.hls?l.hls.play():e.failedToPlayCount<=10&&(!function(e){for(var t=e.stream,r=e.video,n=e.onPlay,i=e.onError,o=e.thumbFit,s=r.parentElement,a=s.getElementsByTagName("video"),u=a.length-1;u<0;u--)a[u].id!==r.id&&s.removeChild(a[u]);var l=document.createElement("video");l.id=Math.random(),l.src=t.url,l.muted="muted",l.playsinline="playsinline",l.style.height=r.style.height,l.style.width="auto",r.parentElement.appendChild(l),l.load(),l.addEventListener("loadedmetadata",(function(){l.play()})),ya({video:l,onPlay:n,onError:i,onMetaLoaded:function(){l.setAttribute("metaloaded","true"),Sa(l,void 0,o)}})}({thumbFit:d,stream:l.stream,video:l.video,onPlay:function(){return u(Ia({modelId:s}))},onError:function(e){return u(ja(Ah(Ah({},e),{},{modelId:s})))}}),u(Ba(e.failedToPlayCount+1))),l.recoveryTimeout||h.update(s,{recoveryTimeout:setTimeout((function(){u(ja({modelId:s,fatal:!0})),l.hls&&l.hls.destroy()}),3e3)}))}})),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){return function(r,n){return n(xa(e)),n.apply(void 0,Lh(r.modelsList.map((function(e,n){var i=e.id;return Oa(r,i,n)?Pa({modelId:i,force:t}):Ra({modelId:i,force:t})}))))}}},M=qn.effect(O(kt)),A=$n.effect(O(Bt,!0)),P=ch.effect(O(Ft)),R=fh.effect(O(Ut)),I=Vn.effect((function(){g.destroy(),clearInterval(null)}));return{reducer:p,effects:[P,R,w,T,lt((f=/Chrome/.test(d.userAgent)&&/Google Inc/.test(d.vendor),{acceptedParamsConfig:[Sh,{key:"player",title:"Player engine",description:"",section:Zn,type:Ee,enum:Object.values(On),isAccepted:function(e){return!(!bh(e,On)||e===On.HLS&&!Eh())},default:On.HLS,convertValue:function(e){return e===On.HLS&&100*Math.random()<=100&&Eh()?On.HLS:On.CANVAS},private:!0},{key:"thumbFit",section:Zn,type:Ee,default:Ct.Cover,enum:Object.values(Ct),title:"Thumb Fit",multiple:!1},{key:"hideLiveBadge",title:"Hide live badge",description:"",type:be,section:Zn,default:!1,convertValue:function(e,t){var r=t.hideLiveBadge,n=t.showLiveBadge,i=void 0===n?"1":n;return r?Boolean(Number(r)):!Number(i)}},{key:"hideModelName",title:"Hide model name",description:"",type:be,section:Zn,default:!1,convertValue:function(e,t){var r=t.hideModelName,n=t.showModelName,i=void 0===n?"1":n;return r?Boolean(Number(r)):!Number(i)}},{key:"autoplayForce",section:Zn,type:be,default:!f},{key:"playButton",title:"Show play button",section:Zn,type:be,default:!1},{key:"quality",title:"Video quality for models list",description:"It`s possible to choose quality for models videos",type:Ee,section:Zn,enum:["original","optimal","720p","480p","240p","160p"],default:"original",multiple:!1}],initialConfig:{randomAutoplayEnabled:!1}})),b,S,E,L,M,A,I,y,m,_,v],actions:{play:function(e){return function(t,r){(e?[e]:t.modelsList.map((function(e){return e.id}))).forEach((function(e){r(Pa({modelId:e,force:!0}))}))}},pause:function(e){return function(t,r){return r.apply(void 0,Lh(Aa(t,e).map((function(e){return Ra({modelId:e})}))))}},createVideo:function(e){var t=e.video,r=e.stream,n=e.modelId;return function(e,i){return ct(e).player===On.HLS&&h.create(n,uh({video:t,stream:r,modelId:n},e,i))}}}}})).requires("window","Api","location","LocalStorage"),Nh=Dh,Ch=function(e){return bh(e,Mn)},xh=Ht(Ch,(function(e){return!!An[e]})),kh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn.S_CHAT_BEST;return{acceptedParamsConfig:[{key:"thumbType",title:"Thumb type",description:"determines which property to use as thumb SChatBest: best icon of stripchat (popularSnapshotUrl) SCashBest: ab - testing of snapshots using stripcash api snapshot: latest snapshot (snapshotUrl) preview: icon setted by model as preview depreсated thumb: alias of snapshot SCbest: alias of SChatBest",section:Zn,type:Ee,multiple:!1,enum:[Mn.S_CHAT_BEST,Mn.DEFAULT,Mn.AVATAR],isAccepted:function(e,t){return[e,t.thumbsSource,t.thumbs,t.xhThumbType].some(xh)},default:e,convertValue:function(t,r){var n=r.thumbsSource,i=r.thumbs,o=r.xhThumbType;return"1"===r.mlIsPerson?Mn.ML_PREVIEW:function(e){return Ch(e)?e:An[e]}([n,i,o,t].find(xh)||e)}}]}},Bh=["id"];function Fh(e){return Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(e)}function Uh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uh(Object(r),!0).forEach((function(t){Vh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Fh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fh(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qh=function(e){return function(t){var r=t.modelId;return function(t){var n=t.thumbsByModelId;return{thumbsByModelId:zh(zh({},n),{},Vh({},r,zh(zh({},n[r]),e)))}}}},$h=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return e?function(t){return t.id===e}:function(e){return function(){return e}}(!0)},Gh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn.S_CHAT_BEST;return Ye((function(){var t=Xe({thumbsByModelId:{}}).on(ch,qh({visible:!0})).on(fh,qh({visible:!1})).on(Zt,(function(e){return function(t){var r=$h(e);return{modelsList:t.modelsList.map((function(e){return r(e)?zh(zh({},e),{},{thumbUrl:e[wa(t,e)]}):e}))}}})).on(lh,(function(e){var t=e.id,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Bh);return function(e){var n=e.modelsList;return{modelsList:(void 0===n?[]:n).map((function(e){return e.id===t?zh(zh({},e),r):e}))}}})),r=Zt.effect((function(e){return function(t,r){return t.modelsList.filter($h(e)).forEach((function(e){var t,n=e.id,i=e.snapshotUrl,o=e.thumbUrl,s=e.broadcastMobile;r(hh(s?15:25)),(t=o,new Promise((function(e,r){var n=new Image;n.onerror=function(){return r()},n.onload=function(){return e(t)},n.src=t}))).catch((function(){return r(lh({id:n,thumbUrl:i}))}))}))}}));return{reducer:t,effects:[lt(kh(e)),r]}})).requires("Api")},Wh=Gh,Yh=o(9266),Hh=o.n(Yh),Qh={acceptedParamsConfig:[{key:"referrer",title:"Referrer param from url",type:Se,private:!0},{key:"trackOff",title:"trackOff",type:be,default:!1}]},Kh=["m","mh"];var Xh=function(e){var t=e.params,r=e.state,n=e.encrypted,i=t.m,o=t.mh,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,Kh),a=zr(r,"impression");return F(a,n?i?{e:btoa(k(s)),m:i,mh:o}:{e:btoa(k(t))}:t)};function Jh(e){return Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(e)}function Zh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ep(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zh(Object(r),!0).forEach((function(t){tp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Jh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jh(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rp=function(e,t,r,n){var i=ar.effect((function(){return function(n){var i=ct(n),o=i.trackOff,s=i.encrypted;if(!o){var a=r&&!1;if(!vr(t)){var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=JSON.stringify(t);return t&&t.length>0?ep(ep({},e),{},{m:r,mh:rs(r)}):e}(function(e,t){var r=t.hash,n=void 0===r?"":r,i=e.isIncognito,o=e.impressionParameters,s=e.referrer,a=e.modelsList,u=ct(e),l=u.queryParams,c=u.landing,f=u.referrer,d=mn(u,un),h=f||s,p=n.substring(1),g=fn(fn(fn({},l),p?B(p):{}),d),m=fn({landing:c,referrer:h,i:i},$r(e));return on(ht(Yt(bn,_n(o)),fn(fn(fn(fn({},g),Zr(e)),m),{},{filtersMatch:a&&a.some((function(e){return e.strict}))})))}(n,t),a),l=new Image;l.style.cssText="position: fixed; top: -1px; left: -1px; width: 1px; height: 1px",l.src=Xh({params:u,state:n,encrypted:s}),e.appendChild(l)}}}}));return{reducer:Xe(ep({impressionParameters:[],trackingParameters:[]},n)).on(ur,(function(e){var t=e.impression,r=void 0===t?[]:t,n=e.tracking;return{impressionParameters:r,trackingParameters:void 0===n?[]:n}})),effects:[i,lt(Qh)]}},np=Ye((function(e,t,r){return Hh()().catch((function(){return 0})).then(Number).then((function(n){var i=rp(e,t,r,{isIncognito:n});return{reducer:i.reducer,effects:i.effects}}))})).requires("body","location","performance"),ip=np;const op="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,sp="9.18.0",ap=globalThis;function up(){return lp(ap),ap}function lp(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||sp,t[sp]=t[sp]||{}}function cp(e,t,r=ap){const n=r.__SENTRY__=r.__SENTRY__||{},i=n[sp]=n[sp]||{};return i[e]||(i[e]=t())}const fp=["debug","info","warn","error","log","assert","trace"],dp={};function hp(e){if(!("console"in ap))return e();const t=ap.console,r={},n=Object.keys(dp);n.forEach((e=>{const n=dp[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((e=>{t[e]=r[e]}))}}const pp=cp("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return op?fp.forEach((r=>{t[r]=(...t)=>{e&&hp((()=>{ap.console[r](`Sentry Logger [${r}]:`,...t)}))}})):fp.forEach((e=>{t[e]=()=>{}})),t})),gp=[];function mp(e){const t=e.defaultIntegrations||[],r=e.integrations;let n;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(r))n=[...t,...r];else if("function"==typeof r){const e=r(t);n=Array.isArray(e)?e:[e]}else n=t;return function(e){const t={};return e.forEach((e=>{const{name:r}=e,n=t[r];n&&!n.isDefaultInstance&&e.isDefaultInstance||(t[r]=e)})),Object.values(t)}(n)}function yp(e,t){for(const r of t)r?.afterAllSetup&&r.afterAllSetup(e)}function _p(e,t,r){if(r[t.name])op&&pp.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===gp.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),gp.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,n)=>r(t,n,e)))}if("function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign(((t,n)=>r(t,n,e)),{id:t.name});e.addEventProcessor(n)}op&&pp.log(`Integration installed: ${t.name}`)}}function vp(e){const t=[];e.message&&t.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r?.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`))}catch(tv){}return t}const bp=Object.prototype.toString;function Sp(e){switch(bp.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Ip(e,Error)}}function Ep(e,t){return bp.call(e)===`[object ${t}]`}function wp(e){return Ep(e,"ErrorEvent")}function Tp(e){return Ep(e,"DOMError")}function Lp(e){return Ep(e,"String")}function Op(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Mp(e){return null===e||Op(e)||"object"!=typeof e&&"function"!=typeof e}function Ap(e){return Ep(e,"Object")}function Pp(e){return"undefined"!=typeof Event&&Ip(e,Event)}function Rp(e){return Boolean(e?.then&&"function"==typeof e.then)}function Ip(e,t){try{return e instanceof t}catch(tl){return!1}}function jp(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const Dp=ap;function Np(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,i=[];let o=0,s=0;const a=" > ",u=a.length;let l;const c=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&o++<n&&(l=Cp(r,c),!("html"===l||o>1&&s+i.length*u+l.length>=f));)i.push(l),s+=l.length,r=r.parentNode;return i.reverse().join(a)}catch(r){return"<unknown>"}}function Cp(e,t){const r=e,n=[];if(!r?.tagName)return"";if(Dp.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const i=t?.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(i?.length)i.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else{r.id&&n.push(`#${r.id}`);const e=r.className;if(e&&Lp(e)){const t=e.split(/\s+/);for(const e of t)n.push(`.${e}`)}}const o=["aria-label","type","name","title","alt"];for(const s of o){const e=r.getAttribute(s);e&&n.push(`[${s}="${e}"]`)}return n.join("")}function xp(){try{return Dp.document.location.href}catch(e){return""}}function kp(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Bp(e,t){if(!Array.isArray(e))return"";const r=[];for(let n=0;n<e.length;n++){const t=e[n];try{jp(t)?r.push("[VueViewModel]"):r.push(String(t))}catch(tv){r.push("[value cannot be serialized]")}}return r.join(t)}function Fp(e,t,r=!1){return!!Lp(e)&&(Ep(t,"RegExp")?t.test(e):!!Lp(t)&&(r?e===t:e.includes(t)))}function Up(e,t=[],r=!1){return t.some((t=>Fp(e,t,r)))}function zp(e,t,r){if(!(t in e))return;const n=e[t];if("function"!=typeof n)return;const i=r(n);"function"==typeof i&&qp(i,n);try{e[t]=i}catch{op&&pp.log(`Failed to replace method "${t}" in object`,e)}}function Vp(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(n){op&&pp.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function qp(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,Vp(e,"__sentry_original__",t)}catch(r){}}function $p(e){return e.__sentry_original__}function Gp(e){if(Sp(e))return{message:e.message,name:e.name,stack:e.stack,...Yp(e)};if(Pp(e)){const t={type:e.type,target:Wp(e.target),currentTarget:Wp(e.currentTarget),...Yp(e)};return"undefined"!=typeof CustomEvent&&Ip(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Wp(e){try{return t=e,"undefined"!=typeof Element&&Ip(t,Element)?Np(e):Object.prototype.toString.call(e)}catch(r){return"<unknown>"}var t}function Yp(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function Hp(e=function(){const e=ap;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(ru){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&t())>>e/4).toString(16)))}function Qp(e){return e.exception?.values?.[0]}function Kp(e){const{message:t,event_id:r}=e;if(t)return t;const n=Qp(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function Xp(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function Jp(e,t){const r=Qp(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n?.data,...t.data};r.mechanism.data=e}}function Zp(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{Vp(e,"__sentry_captured__",!0)}catch(bb){}return!1}const eg=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],tg=(e={})=>{let t;return{name:"EventFilters",setup(r){const n=r.getOptions();t=ng(e,n)},processEvent(r,n,i){if(!t){const r=i.getOptions();t=ng(e,r)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;const r=e.transaction;return!!r&&Up(r,t)}(e,t.ignoreTransactions))return op&&pp.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Kp(e)}`),!0}else{if(function(e,t){if(!t?.length)return!1;return vp(e).some((e=>Up(e,t)))}(e,t.ignoreErrors))return op&&pp.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Kp(e)}`),!0;if(function(e){if(!e.exception?.values?.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return op&&pp.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${Kp(e)}`),!0;if(function(e,t){if(!t?.length)return!1;const r=ig(e);return!!r&&Up(r,t)}(e,t.denyUrls))return op&&pp.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Kp(e)}.\nUrl: ${ig(e)}`),!0;if(!function(e,t){if(!t?.length)return!0;const r=ig(e);return!r||Up(r,t)}(e,t.allowUrls))return op&&pp.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Kp(e)}.\nUrl: ${ig(e)}`),!0}return!1}(r,t)?null:r}}},rg=(e={})=>({...tg(e),name:"InboundFilters"});function ng(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:eg],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function ig(e){try{const t=[...e.exception?.values??[]].reverse().find((e=>void 0===e.mechanism?.parent_id&&e.stacktrace?.frames?.length)),r=t?.stacktrace?.frames;return r?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(r):null}catch(t){return op&&pp.error(`Cannot extract url for event ${Kp(e)}`),null}}function og(){return Date.now()/1e3}const sg=function(){const{performance:e}=ap;if(!e?.now)return og;const t=Date.now()-e.now(),r=null==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/1e3}();function ag(e){const t=sg(),r={sid:Hp(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(r)};return e&&ug(r,e),r}function ug(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||sg(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Hp()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function lg(e,t,r=2){if(!t||"object"!=typeof t||r<=0)return t;if(e&&0===Object.keys(t).length)return e;const n={...e};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=lg(n[i],t[i],r-1));return n}const cg="_sentrySpan";function fg(e,t){t?Vp(e,cg,t):delete e[cg]}function dg(e){return e[cg]}function hg(){return Hp()}function pg(){return Hp().substring(16)}class gg{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:hg(),sampleRand:Math.random()}}clone(){const e=new gg;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,fg(e,dg(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ug(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,r=t instanceof gg?t.getScopeData():Ap(t)?e:void 0,{tags:n,extra:i,user:o,contexts:s,level:a,fingerprint:u=[],propagationContext:l}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...i},this._contexts={...this._contexts,...s},o&&Object.keys(o).length&&(this._user=o),a&&(this._level=a),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,fg(this,void 0),this._attachments=[],this.setPropagationContext({traceId:hg(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:og(),...e,message:e.message?kp(e.message,2048):e.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:dg(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=lg(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t?.event_id||Hp();if(!this._client)return pp.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r?.event_id||Hp();if(!this._client)return pp.warn("No client configured on scope - will not capture message!"),n;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},this),n}captureEvent(e,t){const r=t?.event_id||Hp();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(pp.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}class mg{constructor(e,t){let r,n;r=e||new gg,n=t||new gg,this._stack=[{scope:r}],this._isolationScope=n}withScope(e){const t=this._pushScope();let r;try{r=e(t)}catch(tv){throw this._popScope(),tv}return Rp(r)?r.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function yg(){const e=lp(up());return e.stack=e.stack||new mg(cp("defaultCurrentScope",(()=>new gg)),cp("defaultIsolationScope",(()=>new gg)))}function _g(e){return yg().withScope(e)}function vg(e,t){const r=yg();return r.withScope((()=>(r.getStackTop().scope=e,t(e))))}function bg(e){return yg().withScope((()=>e(yg().getIsolationScope())))}function Sg(e){const t=lp(e);return t.acs?t.acs:{withIsolationScope:bg,withScope:_g,withSetScope:vg,withSetIsolationScope:(e,t)=>bg(t),getCurrentScope:()=>yg().getScope(),getIsolationScope:()=>yg().getIsolationScope()}}function Eg(){return Sg(up()).getCurrentScope()}function wg(){return Sg(up()).getIsolationScope()}function Tg(){return Eg().getClient()}function Lg(e){const t=e.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:i}=t,o={trace_id:r,span_id:i||pg()};return n&&(o.parent_span_id=n),o}let Og;const Mg=new WeakMap,Ag=()=>({name:"FunctionToString",setupOnce(){Og=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=$p(this),r=Mg.has(Tg())&&void 0!==t?t:this;return Og.apply(r,e)}}catch{}},setup(e){Mg.set(e,!0)}}),Pg="?",Rg=/\(error: (.*)\)/,Ig=/captureMessage|captureException/;function jg(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0,n=0)=>{const i=[],o=e.split("\n");for(let s=r;s<o.length;s++){const e=o[s];if(e.length>1024)continue;const r=Rg.test(e)?e.replace(Rg,"$1"):e;if(!r.match(/\S*Error: /)){for(const e of t){const t=e(r);if(t){i.push(t);break}}if(i.length>=50+n)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Dg(t).function||"")&&t.pop();t.reverse(),Ig.test(Dg(t).function||"")&&(t.pop(),Ig.test(Dg(t).function||"")&&t.pop());return t.slice(0,50).map((e=>({...e,filename:e.filename||Dg(t).filename,function:e.function||Pg})))}(i.slice(n))}}function Dg(e){return e[e.length-1]||{}}const Ng="<anonymous>";function Cg(e){try{return e&&"function"==typeof e&&e.name||Ng}catch(tv){return Ng}}function xg(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(r){return}}}const kg=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const r=e.message,n=t.message;if(!r&&!n)return!1;if(r&&!n||!r&&n)return!1;if(r!==n)return!1;if(!Fg(e,t))return!1;if(!Bg(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const r=Ug(t),n=Ug(e);if(!r||!n)return!1;if(r.type!==n.type||r.value!==n.value)return!1;if(!Fg(e,t))return!1;if(!Bg(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return op&&pp.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(r){}return e=t}}};function Bg(e,t){let r=xg(e),n=xg(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++){const e=n[i],t=r[i];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function Fg(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(i){return!1}}function Ug(e){return e.exception?.values&&e.exception.values[0]}const zg=ap;function Vg(){if(!("fetch"in zg))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(tv){return!1}}function qg(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function $g(e,t){!0===t.debug&&(op?pp.enable():hp((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})));Eg().update(t.initialScope);const r=new e(t);return function(e){Eg().setClient(e)}(r),r.init(),r}function Gg(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}function Wg(e,t,r){return t||`${function(e){return`${Gg(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const r={sentry_version:"7"};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}(e,r)}`}const Yg="production",Hg=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Qg(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:u}=e;return`${a}://${u}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${s}`}function Kg(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Xg(e){const t="string"==typeof e?function(e){const t=Hg.exec(e);if(!t)return void hp((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[r,n,i="",o="",s="",a=""]=t.slice(1);let u="",l=a;const c=l.split("/");if(c.length>1&&(u=c.slice(0,-1).join("/"),l=c.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return Kg({host:o,pass:i,path:u,projectId:l,port:s,protocol:r,publicKey:n})}(e):Kg(e);if(t&&function(e){if(!op)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(pp.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(pp.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(pp.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(pp.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}function Jg(e,t=100,r=1/0){try{return em("",e,t,r)}catch(bb){return{ERROR:`**non-serializable** (${bb})`}}}function Zg(e,t=3,r=102400){const n=Jg(e,t);return function(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}(n)>r?Zg(e,t-1,r):n}function em(e,t,r=1/0,n=1/0,i=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function r(t){e.delete(t)}return[t,r]}()){const[o,s]=i;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(jp(t))return"[VueViewModel]";if(Ap(r=t)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${Cg(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(bb){return`**non-serializable** (${bb})`}var r}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const u="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===u)return a.replace("object ","");if(o(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return em("",l.toJSON(),u-1,n,i)}catch(bb){}const c=Array.isArray(t)?[]:{};let f=0;const d=Gp(t);for(const h in d){if(!Object.prototype.hasOwnProperty.call(d,h))continue;if(f>=n){c[h]="[MaxProperties ~]";break}const e=d[h];c[h]=em(h,e,u-1,n,i),f++}return s(t),c}function tm(e,t=[]){return[e,t]}function rm(e,t){const[r,n]=e;return[r,[...n,t]]}function nm(e,t){const r=e[1];for(const n of r){if(t(n,n[0].type))return!0}return!1}function im(e){const t=lp(ap);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function om(e){const[t,r]=e;let n=JSON.stringify(t);function i(e){"string"==typeof n?n="string"==typeof e?n+e:[im(n),e]:n.push("string"==typeof e?im(e):e)}for(const o of r){const[e,t]=o;if(i(`\n${JSON.stringify(e)}\n`),"string"==typeof t||t instanceof Uint8Array)i(t);else{let e;try{e=JSON.stringify(t)}catch(tv){e=JSON.stringify(Jg(t))}i(e)}}return"string"==typeof n?n:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return r}(n)}function sm(e){const t="string"==typeof e.data?im(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const am={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function um(e){return am[e]}function lm(e){if(!e?.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function cm(e,t,r,n){const i=lm(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r?.sdk);const s=function(e,t,r,n){const i=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:Qg(n)},...i&&{trace:i}}}(e,i,n,t);delete e.sdkProcessingMetadata;return tm(s,[[{type:o},e]])}const fm="sentry.profile_id",dm="sentry.exclusive_time";function hm(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||Tg()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}const pm="_sentryScope",gm="_sentryIsolationScope";function mm(e){return{scope:e[pm],isolationScope:e[gm]}}let ym=!1;function _m(e){const{spanId:t,traceId:r,isRemote:n}=e.spanContext(),i=n?t:Em(e).parent_span_id,o=mm(e).scope;return{parent_span_id:i,span_id:n?o?.getPropagationContext().propagationSpanId||pg():t,trace_id:r}}function vm(e){return e&&e.length>0?e.map((({context:{spanId:e,traceId:t,traceFlags:r,...n},attributes:i})=>({span_id:e,trace_id:t,sampled:1===r,attributes:i,...n}))):void 0}function bm(e){return"number"==typeof e?Sm(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Sm(e.getTime()):sg()}function Sm(e){return e>9999999999?e/1e3:e}function Em(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:r}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:n,startTime:i,name:o,endTime:s,status:a,links:u}=e;return{span_id:t,trace_id:r,data:n,description:o,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:bm(i),timestamp:bm(s)||void 0,status:Tm(a),op:n["sentry.op"],origin:n["sentry.origin"],links:vm(u)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function wm(e){const{traceFlags:t}=e.spanContext();return 1===t}function Tm(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}const Lm="_sentryRootSpan";function Om(e){return e[Lm]||e}function Mm(){ym||(hp((()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")})),ym=!0)}const Am=/^sentry-/;function Pm(e){const t=function(e){if(!e||!Lp(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const r=Rm(t);return Object.entries(r).forEach((([t,r])=>{e[t]=r})),e}),{});return Rm(e)}(e);if(!t)return;const r=Object.entries(t).reduce(((e,[t,r])=>{if(t.match(Am)){e[t.slice(7)]=r}return e}),{});return Object.keys(r).length>0?r:void 0}function Rm(e){return e.split(",").map((e=>e.split("=").map((e=>{try{return decodeURIComponent(e.trim())}catch{return}})))).reduce(((e,[t,r])=>(t&&r&&(e[t]=r),e)),{})}const Im="_frozenDsc";function jm(e,t){const r=t.getOptions(),{publicKey:n}=t.getDsn()||{},i={environment:r.environment||Yg,release:r.release,public_key:n,trace_id:e};return t.emit("createDsc",i),i}function Dm(e){const t=Tg();if(!t)return{};const r=Om(e),n=Em(r),i=n.data,o=r.spanContext().traceState,s=o?.get("sentry.sample_rate")??i["sentry.sample_rate"]??i["sentry.previous_trace_sample_rate"];function a(e){return"number"!=typeof s&&"string"!=typeof s||(e.sample_rate=`${s}`),e}const u=r[Im];if(u)return a(u);const l=o?.get("sentry.dsc"),c=l&&Pm(l);if(c)return a(c);const f=jm(e.spanContext().traceId,t),d=i["sentry.source"],h=n.description;return"url"!==d&&h&&(f.transaction=h),hm()&&(f.sampled=String(wm(r)),f.sample_rand=o?.get("sentry.sample_rand")??mm(r).scope?.getPropagationContext().sampleRand.toString()),a(f),t.emit("createDsc",f,r),f}var Nm;function Cm(e){return new km((t=>{t(e)}))}function xm(e){return new km(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Nm||(Nm={}));class km{constructor(e){this._state=Nm.PENDING,this._handlers=[],this._runExecutor(e)}then(e,t){return new km(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(tv){n(tv)}else r(t)},e=>{if(t)try{r(t(e))}catch(tv){n(tv)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new km(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}_executeHandlers(){if(this._state===Nm.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Nm.RESOLVED&&e[1](this._value),this._state===Nm.REJECTED&&e[2](this._value),e[0]=!0)}))}_runExecutor(e){const t=(e,t)=>{this._state===Nm.PENDING&&(Rp(t)?t.then(r,n):(this._state=e,this._value=t,this._executeHandlers()))},r=e=>{t(Nm.RESOLVED,e)},n=e=>{t(Nm.REJECTED,e)};try{e(r,n)}catch(tv){n(tv)}}}function Bm(e,t,r,n=0){return new km(((i,o)=>{const s=e[n];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},r);op&&s.id&&null===a&&pp.log(`Event processor "${s.id}" dropped event`),Rp(a)?a.then((t=>Bm(e,t,r,n+1).then(i))).then(null,o):Bm(e,a,r,n+1).then(i).then(null,o)}}))}let Fm,Um,zm;function Vm(e){const t=ap._sentryDebugIds;if(!t)return{};const r=Object.keys(t);return zm&&r.length===Um||(Um=r.length,zm=r.reduce(((r,n)=>{Fm||(Fm={});const i=Fm[n];if(i)r[i[0]]=i[1];else{const i=e(n);for(let e=i.length-1;e>=0;e--){const o=i[e],s=o?.filename,a=t[n];if(s&&a){r[s]=a,Fm[n]=[s,a];break}}}return r}),{})),zm}function qm(e,t){const{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:r,tags:n,user:i,contexts:o,level:s,transactionName:a}=t;Object.keys(r).length&&(e.extra={...r,...e.extra});Object.keys(n).length&&(e.tags={...n,...e.tags});Object.keys(i).length&&(e.user={...i,...e.user});Object.keys(o).length&&(e.contexts={...o,...e.contexts});s&&(e.level=s);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),n&&function(e,t){e.contexts={trace:_m(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Dm(t),...e.sdkProcessingMetadata};const r=Om(t),n=Em(r).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,n),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function $m(e,t){const{extra:r,tags:n,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:u,fingerprint:l,eventProcessors:c,attachments:f,propagationContext:d,transactionName:h,span:p}=t;Gm(e,"extra",r),Gm(e,"tags",n),Gm(e,"user",i),Gm(e,"contexts",o),e.sdkProcessingMetadata=lg(e.sdkProcessingMetadata,a,2),s&&(e.level=s),h&&(e.transactionName=h),p&&(e.span=p),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),c.length&&(e.eventProcessors=[...e.eventProcessors,...c]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...d}}function Gm(e,t,r){e[t]=lg(e[t],r,1)}function Wm(e,t,r,n,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,u={...t,event_id:t.event_id||r.event_id||Hp(),timestamp:t.timestamp||og()},l=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;e.environment=e.environment||r||Yg,!e.release&&n&&(e.release=n);!e.dist&&i&&(e.dist=i);const s=e.request;s?.url&&(s.url=kp(s.url,o))}(u,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(u,l),i&&i.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const r=Vm(t);e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.filename&&(e.debug_id=r[e.filename])}))}))}(u,e.stackParser);const c=function(e,t){if(!t)return e;const r=e?e.clone():new gg;return r.update(t),r}(n,r.captureContext);r.mechanism&&Jp(u,r.mechanism);const f=i?i.getEventProcessors():[],d=cp("globalScope",(()=>new gg)).getScopeData();if(o){$m(d,o.getScopeData())}if(c){$m(d,c.getScopeData())}const h=[...r.attachments||[],...d.attachments];h.length&&(r.attachments=h),qm(u,d);return Bm([...f,...d.eventProcessors],u,r).then((e=>(e&&function(e){const t={};if(e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))})),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{r.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof s&&s>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Jg(e.data,t,r)}})))},...e.user&&{user:Jg(e.user,t,r)},...e.contexts&&{contexts:Jg(e.contexts,t,r)},...e.extra&&{extra:Jg(e.extra,t,r)}};e.contexts?.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=Jg(e.contexts.trace.data,t,r)));e.spans&&(n.spans=e.spans.map((e=>({...e,...e.data&&{data:Jg(e.data,t,r)}}))));e.contexts?.flags&&n.contexts&&(n.contexts.flags=Jg(e.contexts.flags,3,r));return n}(e,s,a):e)))}function Ym(e){if(e)return function(e){return e instanceof gg||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Hm.includes(e)))}(e)?{captureContext:e}:e}const Hm=["user","level","extra","contexts","tags","fingerprint","propagationContext"];const Qm="Not capturing exception because it's already been captured.",Km="Discarded session because of missing or non-string release",Xm=Symbol.for("SentryInternalError"),Jm=Symbol.for("SentryDoNotSendEventError");function Zm(e){return{message:e,[Xm]:!0}}function ey(e){return{message:e,[Jm]:!0}}function ty(e){return!!e&&"object"==typeof e&&Xm in e}function ry(e){return!!e&&"object"==typeof e&&Jm in e}class ny{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Xg(e.dsn):op&&pp.warn("No DSN provided, client will not send events."),this._dsn){const t=Wg(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){const n=Hp();if(Zp(e))return op&&pp.log(Qm),n;const i={event_id:n,...t};return this._process(this.eventFromException(e,i).then((e=>this._captureEvent(e,i,r)))),i.event_id}captureMessage(e,t,r,n){const i={event_id:Hp(),...r},o=Op(e)?e:String(e),s=Mp(e)?this.eventFromMessage(o,t,i):this.eventFromException(e,i);return this._process(s.then((e=>this._captureEvent(e,i,n)))),i.event_id}captureEvent(e,t,r){const n=Hp();if(t?.originalException&&Zp(t.originalException))return op&&pp.log(Qm),n;const i={event_id:n,...t},o=e.sdkProcessingMetadata||{},s=o.capturedSpanScope,a=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,s||r,a)),i.event_id}captureSession(e){this.sendSession(e),ug(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e))))):Cm(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];_p(this,e,this._integrations),t||yp(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=cm(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of t.attachments||[])r=rm(r,sm(i));const n=this.sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const{release:t,environment:r=Yg}=this._options;if("aggregates"in e){const n=e.attrs||{};if(!n.release&&!t)return void(op&&pp.warn(Km));n.release=n.release||t,n.environment=n.environment||r,e.attrs=n}else{if(!e.release&&!t)return void(op&&pp.warn(Km));e.release=e.release||t,e.environment=e.environment||r}this.emit("beforeSendSession",e);const n=function(e,t,r,n){const i=lm(r);return tm({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&t&&{dsn:Qg(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,t,r=1){if(this._options.sendClientReports){const n=`${e}:${t}`;op&&pp.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(e,t){const r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)}}emit(e,...t){const r=this._hooks[e];r&&r.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(op&&pp.error("Error while sending envelope:",e),e))):(op&&pp.error("Transport disabled"),Cm({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach((t=>{t&&_p(e,t,r)})),r}(this,e),yp(this,e)}_updateSessionFromEvent(e,t){let r="fatal"===t.level,n=!1;const i=t.exception?.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(!1===t?.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(ug(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new km((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o?.length&&(t.integrations=o),this.emit("preprocessEvent",e,t),e.type||n.setLastEventId(e.event_id||t.event_id),Wm(i,e,t,r,this,n).then((e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:Lg(r),...e.contexts};const n=function(e,t){const r=t.getPropagationContext();return r.dsc||jm(r.traceId,e)}(this,r);return e.sdkProcessingMetadata={dynamicSamplingContext:n,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},r=Eg(),n=wg()){return op&&iy(e)&&pp.log(`Captured error event \`${vp(e)[0]||"<unknown>"}\``),this._processEvent(e,t,r,n).then((e=>e.event_id),(e=>{op&&(ry(e)?pp.log(e.message):ty(e)?pp.warn(e.message):pp.warn(e))}))}_processEvent(e,t,r,n){const i=this.getOptions(),{sampleRate:o}=i,s=oy(e),a=iy(e),u=e.type||"error",l=`before send for type \`${u}\``,c=void 0===o?void 0:function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(o);if(a&&"number"==typeof c&&Math.random()>c)return this.recordDroppedEvent("sample_rate","error"),xm(ey(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const f="replay_event"===u?"replay":u;return this._prepareEvent(e,t,r,n).then((e=>{if(null===e)throw this.recordDroppedEvent("event_processor",f),ey("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const r=function(e,t,r,n){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:s}=t;let a=r;if(iy(a)&&i)return i(a,n);if(oy(a)){if(s){const e=s(function(e){const{trace_id:t,parent_span_id:r,span_id:n,status:i,origin:o,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:r,span_id:n??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:s?.[fm],exclusive_time:s?.[dm],measurements:e.measurements,is_segment:!0}}(a));if(e?a=lg(r,{type:"transaction",timestamp:(u=e).timestamp,start_timestamp:u.start_timestamp,transaction:u.description,contexts:{trace:{trace_id:u.trace_id,span_id:u.span_id,parent_span_id:u.parent_span_id,op:u.op,status:u.status,origin:u.origin,data:{...u.data,...u.profile_id&&{[fm]:u.profile_id},...u.exclusive_time&&{[dm]:u.exclusive_time}}}},measurements:u.measurements}):Mm(),a.spans){const e=[];for(const t of a.spans){const r=s(t);r?e.push(r):(Mm(),e.push(t))}a.spans=e}}if(o){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return o(a,n)}}var u;return a}(0,i,e,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(Rp(e))return e.then((e=>{if(!Ap(e)&&null!==e)throw Zm(r);return e}),(e=>{throw Zm(`${t} rejected with ${e}`)}));if(!Ap(e)&&null!==e)throw Zm(r);return e}(r,l)})).then((i=>{if(null===i){if(this.recordDroppedEvent("before_send",f),s){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw ey(`${l} returned \`null\`, will not send event.`)}const o=r.getSession()||n.getSession();if(a&&o&&this._updateSessionFromEvent(o,i),s){const e=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const u=i.transaction_info;if(s&&u&&i.transaction!==e.transaction){const e="custom";i.transaction_info={...u,source:e}}return this.sendEvent(i,t),i})).then(null,(e=>{if(ry(e)||ty(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),Zm(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[r,n]=e.split(":");return{reason:r,category:n,quantity:t}}))}_flushOutcomes(){op&&pp.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(op&&pp.log("No outcomes to send"));if(!this._dsn)return void(op&&pp.log("No dsn provided, will not send outcomes"));op&&pp.log("Sending outcomes:",e);const t=(r=e,tm((n=this._options.tunnel&&Qg(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:i||og(),discarded_events:r}]]));var r,n,i;this.sendEnvelope(t)}}function iy(e){return void 0===e.type}function oy(e){return"transaction"===e.type}function sy(e,t){const r=t??ay(e)??[];if(0===r.length)return;const n=e.getOptions(),i=function(e,t,r,n){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),r&&n&&(i.dsn=Qg(n)),tm(i,[(o=e,[{type:"log",item_count:o.length,content_type:"application/vnd.sentry.items.log+json"},{items:o}])]);var o}(r,n._metadata,n.tunnel,e.getDsn());ap._sentryClientToLogBufferMap?.set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function ay(e){return ap._sentryClientToLogBufferMap?.get(e)}function uy(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function ly(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function cy(e,t){const r=hy(e,t),n={type:my(t),value:yy(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function fy(e,t,r,n){const i=Tg(),o=i?.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(r instanceof Error)return r}return}(t),a={__serialized__:Zg(t,o)};if(s)return{exception:{values:[cy(e,s)]},extra:a};const u={exception:{values:[{type:Pp(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:by(t,{isUnhandledRejection:n})}]},extra:a};if(r){const t=hy(e,r);t.length&&(u.exception.values[0].stacktrace={frames:t})}return u}function dy(e,t){return{exception:{values:[cy(e,t)]}}}function hy(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e&&py.test(e.message))return 1;return 0}(t),i=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(r,n,i)}catch(tv){}return[]}ap._sentryClientToLogBufferMap=new WeakMap;const py=/Minified React error #\d+;/i;function gy(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function my(e){const t=e?.name;if(!t&&gy(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function yy(e){const t=e?.message;return gy(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function _y(e,t,r,n,i){let o;if(wp(t)&&t.error){return dy(e,t.error)}if(Tp(t)||Ep(t,"DOMException")){const i=t;if("stack"in t)o=dy(e,t);else{const t=i.name||(Tp(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=vy(e,s,r,n),Xp(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}if(Sp(t))return dy(e,t);if(Ap(t)||Pp(t)){return o=fy(e,t,r,i),Jp(o,{synthetic:!0}),o}return o=vy(e,t,r,n),Xp(o,`${t}`,void 0),Jp(o,{synthetic:!0}),o}function vy(e,t,r,n){const i={};if(n&&r){const n=hy(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]}),Jp(i,{synthetic:!0})}if(Op(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return i.logentry={message:e,params:r},i}return i.message=t,i}function by(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(Gp(e));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=t)return kp(n,t);for(let i=r.length;i>0;i--){const e=r.slice(0,i).join(", ");if(!(e.length>t))return i===r.length?e:kp(e,t)}return""}(e),n=t?"promise rejection":"exception";if(wp(e))return`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``;if(Pp(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(tv){}}(e)}\` (type=${e.type}) captured as ${n}`}return`Object captured as ${n} with keys: ${r}`}function Sy(e,t){return Eg().captureEvent(e,t)}function Ey(e){const t=wg(),r=Eg(),{userAgent:n}=ap.navigator||{},i=ag({user:r.getUser()||t.getUser(),...n&&{userAgent:n},...e}),o=t.getSession();return"ok"===o?.status&&ug(o,{status:"exited"}),wy(),t.setSession(i),i}function wy(){const e=wg(),t=Eg().getSession()||e.getSession();t&&function(e,t){let r={};t?r={status:t}:"ok"===e.status&&(r={status:"exited"}),ug(e,r)}(t),Ty(),e.setSession()}function Ty(){const e=wg(),t=Tg(),r=e.getSession();r&&t&&t.captureSession(r)}function Ly(e=!1){e?wy():Ty()}const Oy=ap;let My=0;function Ay(){return My>0}function Py(e,t={}){if(!function(e){return"function"==typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if($p(e))return e}catch(tv){return e}const r=function(...r){try{const n=r.map((e=>Py(e,t)));return e.apply(this,n)}catch(n){throw My++,setTimeout((()=>{My--})),function(...e){const t=Sg(up());if(2===e.length){const[r,n]=e;return r?t.withSetScope(r,n):t.withScope(n)}t.withScope(e[0])}((e=>{var i,o;e.addEventProcessor((e=>(t.mechanism&&(Xp(e,void 0,void 0),Jp(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),i=n,Eg().captureException(i,Ym(o))})),n}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch{}qp(r,e),Vp(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}class Ry extends ny{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t,r=[t],n="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:r.map((e=>({name:`${n}:@sentry/${e}`,version:sp}))),version:sp}),e._metadata=i}(t,"browser",["browser"],Oy.SENTRY_SDK_SOURCE||"npm"),super(t);const r=this,{sendDefaultPii:n,_experiments:i}=r._options,o=i?.enableLogs;t.sendClientReports&&Oy.document&&Oy.document.addEventListener("visibilitychange",(()=>{"hidden"===Oy.document.visibilityState&&(this._flushOutcomes(),o&&sy(r))})),o&&(r.on("flush",(()=>{sy(r)})),r.on("afterCaptureLog",(()=>{r._logFlushIdleTimeout&&clearTimeout(r._logFlushIdleTimeout),r._logFlushIdleTimeout=setTimeout((()=>{sy(r)}),5e3)}))),n&&(r.on("postprocessEvent",uy),r.on("beforeSendSession",ly))}eventFromException(e,t){return function(e,t,r,n){const i=_y(e,t,r?.syntheticException||void 0,n);return Jp(i),i.level="error",r?.event_id&&(i.event_id=r.event_id),Cm(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=vy(e,t,n?.syntheticException||void 0,i);return o.level=r,n?.event_id&&(o.event_id=n.event_id),Cm(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}_prepareEvent(e,t,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r,n)}}const Iy="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,jy={},Dy={};function Ny(e,t){jy[e]=jy[e]||[],jy[e].push(t)}function Cy(e,t){if(!Dy[e]){Dy[e]=!0;try{t()}catch(tv){op&&pp.error(`Error while instrumenting ${e}`,tv)}}}function xy(e,t){const r=e&&jy[e];if(r)for(const n of r)try{n(t)}catch(tv){op&&pp.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Cg(n)}\nError:`,tv)}}function ky(){"console"in ap&&fp.forEach((function(e){e in ap.console&&zp(ap.console,e,(function(t){return dp[e]=t,function(...t){xy("console",{args:t,level:e});const r=dp[e];r?.apply(ap.console,t)}}))}))}function By(e,t=!1){t&&!function(){if("string"==typeof EdgeRuntime)return!0;if(!Vg())return!1;if(qg(zg.fetch))return!0;let e=!1;const t=zg.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow?.fetch&&(e=qg(r.contentWindow.fetch)),t.head.removeChild(r)}catch(bb){op&&pp.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",bb)}return e}()||zp(ap,"fetch",(function(t){return function(...r){const n=new Error,{method:i,url:o}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:Uy(t),method:Fy(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Uy(t),method:Fy(t,"method")?String(t.method).toUpperCase():"GET"}}(r),s={args:r,fetchData:{method:i,url:o},startTimestamp:1e3*sg(),virtualError:n,headers:zy(r)};return e||xy("fetch",{...s}),t.apply(ap,r).then((async t=>(e?e(t):xy("fetch",{...s,endTimestamp:1e3*sg(),response:t}),t)),(e=>{if(xy("fetch",{...s,endTimestamp:1e3*sg(),error:e}),Sp(e)&&void 0===e.stack&&(e.stack=n.stack,Vp(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(s.fetchData.url);e.message=`${e.message} (${t.host})`}catch{}throw e}))}}))}function Fy(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Uy(e){return"string"==typeof e?e:e?Fy(e,"url")?e.url:e.toString?e.toString():"":""}function zy(e){const[t,r]=e;try{if("object"==typeof r&&null!==r&&"headers"in r&&r.headers)return new Headers(r.headers);if(n=t,"undefined"!=typeof Request&&Ip(n,Request))return new Headers(t.headers)}catch{}var n}const Vy=100;function qy(e,t){const r=Tg(),n=wg();if(!r)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Vy}=r.getOptions();if(o<=0)return;const s={timestamp:og(),...e},a=i?hp((()=>i(s,t))):s;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,o))}function $y(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}function Gy(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function Wy(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}const Yy=ap;let Hy,Qy,Ky;function Xy(){if(!Yy.document)return;const e=xy.bind(null,"dom"),t=Jy(e,!0);Yy.document.addEventListener("click",t,!1),Yy.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=Yy,n=r[t]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(zp(n,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},o=n[r]=n[r]||{refCount:0};if(!o.handler){const n=Jy(e);o.handler=n,t.call(this,r,n,i)}o.refCount++}catch(tv){}return t.call(this,r,n,i)}})),zp(n,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this.__sentry_instrumentation_handlers__||{},i=r[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,n),i.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete this.__sentry_instrumentation_handlers__)}catch(tv){}return e.call(this,t,r,n)}})))}))}function Jy(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const n=function(e){try{return e.target}catch(tv){return null}}(r);if(function(e,t){return"keypress"===e&&(!t?.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n))return;Vp(r,"_sentryCaptured",!0),n&&!n._sentryId&&Vp(n,"_sentryId",Hp());const i="keypress"===r.type?"input":r.type;if(!function(e){if(e.type!==Qy)return!1;try{if(!e.target||e.target._sentryId!==Ky)return!1}catch(tv){}return!0}(r)){e({event:r,name:i,global:t}),Qy=r.type,Ky=n?n._sentryId:void 0}clearTimeout(Hy),Hy=Yy.setTimeout((()=>{Ky=void 0,Qy=void 0}),1e3)}}const Zy="__sentry_xhr_v3__";function e_(){if(!Yy.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,r){const n=new Error,i=1e3*sg(),o=Lp(r[0])?r[0].toUpperCase():void 0,s=function(e){if(Lp(e))return e;try{return e.toString()}catch{}return}(r[1]);if(!o||!s)return e.apply(t,r);t[Zy]={method:o,url:s,request_headers:{}},"POST"===o&&s.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[Zy];if(e&&4===t.readyState){try{e.status_code=t.status}catch(tv){}xy("xhr",{endTimestamp:1e3*sg(),startTimestamp:i,xhr:t,virtualError:n})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(e,t,r){return a(),e.apply(t,r)}}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,r){const[n,i]=r,o=t[Zy];return o&&Lp(n)&&Lp(i)&&(o.request_headers[n.toLowerCase()]=i),e.apply(t,r)}}),e.apply(t,r)}}),e.send=new Proxy(e.send,{apply(e,t,r){const n=t[Zy];if(!n)return e.apply(t,r);void 0!==r[0]&&(n.body=r[0]);return xy("xhr",{startTimestamp:1e3*sg(),xhr:t}),e.apply(t,r)}})}let t_;function r_(e){const t="history";Ny(t,e),Cy(t,n_)}function n_(){function e(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const n=t_,i=String(r);if(t_=i,n===i)return e.apply(this,t);xy("history",{from:n,to:i})}return e.apply(this,t)}}Yy.addEventListener("popstate",(()=>{const e=Yy.location.href,t=t_;if(t_=e,t===e)return;xy("history",{from:t,to:e})})),"history"in zg&&zg.history&&(zp(Yy.history,"pushState",e),zp(Yy.history,"replaceState",e))}const i_=1024,o_=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){var r;t.console&&function(e){const t="console";Ny(t,e),Cy(t,ky)}(function(e){return function(t){if(Tg()!==e)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:$y(t.level),message:Bp(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;r.message=`Assertion failed: ${Bp(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1)}qy(r,{input:t.args,level:t.level})}}(e)),t.dom&&(r=function(e,t){return function(r){if(Tg()!==e)return;let n,i,o="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>i_&&(Iy&&pp.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=i_),"string"==typeof o&&(o=[o]);try{const e=r.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;n=Np(t,{keyAttrs:o,maxStringLength:s}),i=function(e){if(!Dp.HTMLElement)return null;let t=e;for(let r=0;r<5;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(t)}catch(tv){n="<unknown>"}if(0===n.length)return;const a={category:`ui.${r.name}`,message:n};i&&(a.data={"ui.component_name":i}),qy(a,{event:r.event,name:r.name,global:r.global})}}(e,t.dom),Ny("dom",r),Cy("dom",Xy)),t.xhr&&function(e){Ny("xhr",e),Cy("xhr",e_)}(function(e){return function(t){if(Tg()!==e)return;const{startTimestamp:r,endTimestamp:n}=t,i=t.xhr[Zy];if(!r||!n||!i)return;const{method:o,url:s,status_code:a,body:u}=i,l={method:o,url:s,status_code:a},c={xhr:t.xhr,input:u,startTimestamp:r,endTimestamp:n},f={category:"xhr",data:l,type:"http",level:Gy(a)};e.emit("beforeOutgoingRequestBreadcrumb",f,c),qy(f,c)}}(e)),t.fetch&&function(e,t){const r="fetch";Ny(r,e),Cy(r,(()=>By(void 0,t)))}(function(e){return function(t){if(Tg()!==e)return;const{startTimestamp:r,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const i=t.fetchData,o={data:t.error,input:t.args,startTimestamp:r,endTimestamp:n},s={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",s,o),qy(s,o)}else{const i=t.response,o={...t.fetchData,status_code:i?.status};t.fetchData.request_body_size,t.fetchData.response_body_size;const s={input:t.args,response:i,startTimestamp:r,endTimestamp:n},a={category:"fetch",data:o,type:"http",level:Gy(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",a,s),qy(a,s)}}}(e)),t.history&&r_(function(e){return function(t){if(Tg()!==e)return;let r=t.from,n=t.to;const i=Wy(Oy.location.href);let o=r?Wy(r):void 0;const s=Wy(n);o?.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(n=s.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),qy({category:"navigation",data:{from:r,to:n}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){Tg()===e&&qy({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Kp(t)},{event:t})}}(e))}}};const s_=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a_=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&zp(Oy,"setTimeout",u_),t.setInterval&&zp(Oy,"setInterval",u_),t.requestAnimationFrame&&zp(Oy,"requestAnimationFrame",l_),t.XMLHttpRequest&&"XMLHttpRequest"in Oy&&zp(XMLHttpRequest.prototype,"send",c_);const e=t.eventTarget;if(e){(Array.isArray(e)?e:s_).forEach(f_)}}}};function u_(e){return function(...t){const r=t[0];return t[0]=Py(r,{mechanism:{data:{function:Cg(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function l_(e){return function(t){return e.apply(this,[Py(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Cg(e)},handled:!1,type:"instrument"}})])}}function c_(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&zp(r,e,(function(t){const r={mechanism:{data:{function:e,handler:Cg(t)},handled:!1,type:"instrument"}},n=$p(t);return n&&(r.mechanism.data.handler=Cg(n)),Py(t,r)}))})),e.apply(this,t)}}function f_(e){const t=Oy,r=t[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(zp(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=Py(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Cg(n),target:e},handled:!1,type:"instrument"}}))}catch{}return t.apply(this,[r,Py(n,{mechanism:{data:{function:"addEventListener",handler:Cg(n),target:e},handled:!1,type:"instrument"}}),i])}})),zp(r,"removeEventListener",(function(e){return function(t,r,n){try{const i=r.__sentry_wrapped__;i&&e.call(this,t,i,n)}catch(tv){}return e.call(this,t,r,n)}})))}const d_=()=>({name:"BrowserSession",setupOnce(){void 0!==Oy.document?(Ey({ignoreDuration:!0}),Ly(),r_((({from:e,to:t})=>{void 0!==e&&e!==t&&(Ey({ignoreDuration:!0}),Ly())}))):Iy&&pp.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}});let h_=null;function p_(){h_=ap.onerror,ap.onerror=function(e,t,r,n,i){return xy("error",{column:n,error:i,line:r,msg:e,url:t}),!!h_&&h_.apply(this,arguments)},ap.onerror.__SENTRY_INSTRUMENTED__=!0}let g_=null;function m_(){g_=ap.onunhandledrejection,ap.onunhandledrejection=function(e){return xy("unhandledrejection",e),!g_||g_.apply(this,arguments)},ap.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const y_=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){!function(e){const t="error";Ny(t,e),Cy(t,p_)}((t=>{const{stackParser:r,attachStacktrace:n}=v_();if(Tg()!==e||Ay())return;const{msg:i,url:o,line:s,column:a,error:u}=t,l=function(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},u=a.frames=a.frames||[],l=n,c=r,f=Lp(t)&&t.length>0?t:xp();0===u.length&&u.push({colno:l,filename:f,function:Pg,in_app:!0,lineno:c});return e}(_y(r,u||i,void 0,n,!1),o,s,a);l.level="error",Sy(l,{originalException:u,mechanism:{handled:!1,type:"onerror"}})}))}(e),__("onerror")),t.onunhandledrejection&&(!function(e){!function(e){const t="unhandledrejection";Ny(t,e),Cy(t,m_)}((t=>{const{stackParser:r,attachStacktrace:n}=v_();if(Tg()!==e||Ay())return;const i=function(e){if(Mp(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),o=Mp(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:_y(r,i,void 0,n,!0);o.level="error",Sy(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),__("onunhandledrejection"))}}};function __(e){Iy&&pp.log(`Global Handler attached: ${e}`)}function v_(){const e=Tg();return e?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const b_=()=>({name:"HttpContext",preprocessEvent(e){if(!Oy.navigator&&!Oy.location&&!Oy.document)return;const t=e.request?.url||xp(),{referrer:r}=Oy.document||{},{userAgent:n}=Oy.navigator||{},i={...e.request?.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};e.request=o}});function S_(e,t,r,n,i,o){if(!i.exception?.values||!o||!Ip(o.originalException,Error))return;const s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;s&&(i.exception.values=E_(e,t,n,o.originalException,r,i.exception.values,s,0))}function E_(e,t,r,n,i,o,s,a){if(o.length>=r+1)return o;let u=[...o];if(Ip(n[i],Error)){w_(s,a);const o=e(t,n[i]),l=u.length;T_(o,i,l,a),u=E_(e,t,r,n[i],i,[o,...u],o,l)}return Array.isArray(n.errors)&&n.errors.forEach(((n,o)=>{if(Ip(n,Error)){w_(s,a);const l=e(t,n),c=u.length;T_(l,`errors[${o}]`,c,a),u=E_(e,t,r,n,i,[l,...u],l,c)}})),u}function w_(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function T_(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:n}}const L_=(e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,n,i){S_(cy,i.getOptions().stackParser,r,t,e,n)}}};function O_(e,t,r,n){const i={filename:e,function:"<anonymous>"===t?Pg:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const M_=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,A_=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,P_=/\((\S*)(?::(\d+))(?::(\d+))\)/,R_=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,I_=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,j_=jg(...[[30,e=>{const t=M_.exec(e);if(t){const[,e,r,n]=t;return O_(e,Pg,+r,+n)}const r=A_.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){const e=P_.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}const[e,t]=D_(r[1]||Pg,r[2]);return O_(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,e=>{const t=R_.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=I_.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Pg;return[r,e]=D_(r,e),O_(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),D_=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Pg,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},N_=Symbol.for("SentryBufferFullError");function C_(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return xm(N_);const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new km(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{Cm(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}function x_(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r?.["x-sentry-rate-limits"],s=r?.["retry-after"];if(o)for(const a of o.trim().split(",")){const[e,t,,,r]=a.split(":",5),o=parseInt(e,10),s=1e3*(isNaN(o)?60:o);if(t)for(const a of t.split(";"))"metric_bucket"===a&&r&&!r.split(";").includes("custom")||(i[a]=n+s);else i.all=n+s}else s?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(s,n):429===t&&(i.all=n+6e4);return i}function k_(e,t,r=C_(e.bufferSize||64)){let n={};return{send:function(i){const o=[];if(nm(i,((t,r)=>{const i=um(r);!function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)?o.push(t):e.recordDroppedEvent("ratelimit_backoff",i)})),0===o.length)return Cm({});const s=tm(i[0],o),a=t=>{nm(s,((r,n)=>{e.recordDroppedEvent(t,um(n))}))};return r.add((()=>t({body:om(s)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&op&&pp.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=x_(n,e),e)),(e=>{throw a("network_error"),op&&pp.error("Encountered error running transport request:",e),e})))).then((e=>e),(e=>{if(e===N_)return op&&pp.error("Skipped sending event because buffer is full."),a("queue_overflow"),Cm({});throw e}))},flush:e=>r.drain(e)}}const B_="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,F_={};function U_(e){const t=F_[e];if(t)return t;let r=Yy[e];if(qg(r))return F_[e]=r.bind(Yy);const n=Yy.document;if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i?.[e]&&(r=i[e]),n.head.removeChild(t)}catch(tv){B_&&pp.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,tv)}return r?F_[e]=r.bind(Yy):r}function z_(e){F_[e]=void 0}function V_(e,t=U_("fetch")){let r=0,n=0;return k_(e,(function(i){const o=i.body.length;r+=o,n++;const s={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};if(!t)return z_("fetch"),xm("No fetch implementation available");try{return t(e.url,s).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(tv){return z_("fetch"),r-=o,n--,xm(tv)}}))}function q_(e){return[rg(),Ag(),a_(),o_(),y_(),L_(),kg(),b_(),d_()]}function $_(e){const t={};for(const r of Object.getOwnPropertyNames(e)){const n=r;void 0!==e[n]&&(t[n]=e[n])}return t}function G_(e={}){const t=function(e={}){return{defaultIntegrations:q_(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Oy.SENTRY_RELEASE?.id,sendClientReports:!0,...$_(e)}}(e);if(!t.skipBrowserExtensionCheck&&function(){const e=void 0!==Oy.window&&Oy;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],r=t?.runtime?.id,n=xp()||"",i=!!r&&Oy===Oy.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>n.startsWith(`${e}//`))),o=void 0!==e.nw;return!!r&&!i&&!o}())return void(Iy&&hp((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")})));Iy&&!Vg()&&pp.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const r={...t,stackParser:(n=t.stackParser||j_,Array.isArray(n)?jg(...n):n),integrations:mp(t),transport:t.transport||V_};var n;return $g(Ry,r)}function W_(e){return W_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W_(e)}function Y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y_(Object(r),!0).forEach((function(t){Q_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q_(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=W_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X_(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var J_=function(e){var t=K_(document.location.hostname.split(".").reverse(),3),r=t[0],n=(t[1],t[2]),i=/(creative|gate)\..*\.(com|local|dev)/,o="dev"===r,s={beforeSend:function(t){var r;return(null===(r=t.exception)||void 0===r||null===(r=r.values)||void 0===r?void 0:r.some((function(e){var t;return null===(t=e.stacktrace)||void 0===t||null===(t=t.frames)||void 0===t?void 0:t.some((function(e){if(!e.filename)return!1;try{var t=new URL(e.filename).hostname;return null!==(null==t?void 0:t.match(i))}catch(r){return!1}}))})))?(t.tags=t.tags||{},t.tags.creative=e,o&&(t.tags.stage=n),t):null}},a=H_(H_({},s),{},{defaultIntegrations:!1,dsn:"https://3930fc5086c7463e8fa5bd6970c93880@sentry.".concat(vt,".com/2"),integrations:q_().filter((function(e){return"InboundFilters"!==e.name}))});o?G_(H_({environment:"stage"},a)):"com"===r&&Math.random()<.01&&G_(H_({environment:"production"},a))},Z_=Ye((function(e,t,r){var n=!1,i=zn((function(i){var o=i.urls,s=o.domainCheckGet,a=void 0===s?"":s,u=o.domainCheckResult,l=void 0===u?"":u,c=Er(t),f=c.split("//").pop(),d=function(t){return e.post(l,t)},h=function(e){return r.getEntriesByType("resource").find((function(t){return"fetch"===t.initiatorType&&e(t)}))};e.post(a).then((function(e){var t=e.checkUrl;if(!n&&t){n=!0;var r="https://".concat(t.domain).concat(t.path);fetch(r,{headers:{"Accept-Language":oi}}).then((function(e){return function(e){return e.ok?e.text().then((function(e){try{return JSON.stringify(JSON.parse(e))}catch(tv){return e}})):Promise.resolve(null)}(e).then((function(n){var i=h((function(e){return e.name.startsWith("".concat(c,"/config?"))})),o=h((function(e){return e.name===r})),s=t.expectedContent===n&&200===e.status?"success":"error";d({checkId:t.id,result:s,currentDomain:f,requestSignature:t.requestSignature,configLoadTimeMs:i?parseInt(i.duration,10):void 0,checkPerformTimeMs:o?parseInt(o.duration,10):void 0,resultResponse:"".concat(n).slice(0,255),resultStatusCode:e.status})}))})).catch((function(e){var r=h((function(e){return e.name.startsWith("".concat(c,"/config?"))}));d({checkId:t.id,result:"fail",currentDomain:f,requestSignature:t.requestSignature,configLoadTimeMs:r?parseInt(r.duration,10):void 0,resultResponse:e.message})}))}}))}),100);return{effects:[$e.effect((function(){return function(e,t){return i(e,t)}}))]}})).requires("Api","location","performance"),ev=Z_;let tv=-1;const rv=e=>{addEventListener("pageshow",(t=>{t.persisted&&(tv=t.timeStamp,e(t))}),!0)},nv=(e,t,r,n)=>{let i,o;return s=>{t.value>=0&&(s||n)&&(o=t.value-(i??0),(o||void 0===i)&&(i=t.value,t.delta=o,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,r),e(t)))}},iv=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},ov=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},sv=()=>{const e=ov();return e?.activationStart??0},av=(e,t=-1)=>{const r=ov();let n="navigate";return tv>=0?n="back-forward-cache":r&&(document.prerendering||sv()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},uv=new WeakMap;function lv(e,t){return uv.get(e)||uv.set(e,new t),uv.get(e)}class cv{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const t=this.o[0],r=this.o.at(-1);this.i&&t&&r&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const fv=(e,t,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const n=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return n.observe({type:e,buffered:!0,...r}),n}}catch{}},dv=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let hv=-1;const pv=new Set,gv=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,mv=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(const e of pv)e();isFinite(hv)||(hv="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",mv,!0))}},yv=()=>{if(hv<0){const e=sv(),t=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((t=>"hidden"===t.name&&t.startTime>e))[0]?.startTime;hv=t??gv(),addEventListener("visibilitychange",mv,!0),addEventListener("prerenderingchange",mv,!0),rv((()=>{setTimeout((()=>{hv=gv()}))}))}return{get firstHiddenTime(){return hv},onHidden(e){pv.add(e)}}},_v=e=>{document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},vv=[1800,3e3],bv=[.1,.25],Sv=(e,t={})=>{const r=yv();((e,t={})=>{_v((()=>{const r=yv();let n,i=av("FCP");const o=fv("paint",(e=>{for(const t of e)"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-sv(),0),i.entries.push(t),n(!0)))}));o&&(n=nv(e,i,vv,t.reportAllChanges),rv((r=>{i=av("FCP"),n=nv(e,i,vv,t.reportAllChanges),iv((()=>{i.value=performance.now()-r.timeStamp,n(!0)}))})))}))})(dv((()=>{let n,i=av("CLS",0);const o=lv(t,cv),s=e=>{for(const t of e)o.h(t);o.i>i.value&&(i.value=o.i,i.entries=o.o,n())},a=fv("layout-shift",s);a&&(n=nv(e,i,bv,t.reportAllChanges),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),rv((()=>{o.i=0,i=av("CLS",0),n=nv(e,i,bv,t.reportAllChanges),iv((()=>n()))})),setTimeout(n))})))};let Ev=0,wv=1/0,Tv=0;const Lv=e=>{for(const t of e)t.interactionId&&(wv=Math.min(wv,t.interactionId),Tv=Math.max(Tv,t.interactionId),Ev=Tv?(Tv-wv)/7+1:0)};let Ov;const Mv=()=>Ov?Ev:performance.interactionCount??0;let Av=0;class Pv{u=[];l=new Map;m;p;v(){Av=Mv(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((Mv()-Av)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.u.at(-1);let r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>t.P){if(r?e.duration>r.P?(r.entries=[e],r.P=e.duration):e.duration===r.P&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],P:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort(((e,t)=>t.P-e.P)),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}this.p?.(r)}}}const Rv=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=dv(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t((()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})})))},Iv=[200,500],jv=(e,t={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const r=yv();_v((()=>{"interactionCount"in performance||Ov||(Ov=fv("event",Lv,{type:"event",buffered:!0,durationThreshold:0}));let n,i=av("INP");const o=lv(t,Pv),s=e=>{Rv((()=>{for(const r of e)o.h(r);const t=o.L();t&&t.P!==i.value&&(i.value=t.P,i.entries=t.entries,n())}))},a=fv("event",s,{durationThreshold:t.durationThreshold??40});n=nv(e,i,Iv,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),rv((()=>{o.v(),i=av("INP"),n=nv(e,i,Iv,t.reportAllChanges)})))}))};class Dv{m;h(e){this.m?.(e)}}const Nv=[2500,4e3],Cv=(e,t={})=>{_v((()=>{const r=yv();let n,i=av("LCP");const o=lv(t,Dv),s=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)o.h(t),t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-sv(),0),i.entries=[t],n())},a=fv("largest-contentful-paint",s);if(a){n=nv(e,i,Nv,t.reportAllChanges);const r=dv((()=>{s(a.takeRecords()),a.disconnect(),n(!0)})),o=e=>{e.isTrusted&&(Rv(r),removeEventListener(e.type,o,{capture:!0}))};for(const e of["keydown","click","visibilitychange"])addEventListener(e,o,{capture:!0});rv((r=>{i=av("LCP"),n=nv(e,i,Nv,t.reportAllChanges),iv((()=>{i.value=performance.now()-r.timeStamp,n(!0)}))}))}}))};var xv=Ye((function(e){return{effects:[$e.effect((function(){return function(t){if(!(Math.random()>=.01)){var r=zr(t,"webVitalUrl"),n=ct(t).landing;r&&[Sv,jv,Cv].forEach((function(t){t((function(t){var i=t.name,o=t.navigationType,s=t.rating,a=t.value,u=JSON.stringify({message:{name:i,navigationType:o,rating:s,value:a,creative:n}});navigator.sendBeacon?navigator.sendBeacon(r,u):e.post(r,u)}))}))}}}))]}})).requires("Api"),kv=xv,Bv={initialConfig:{landing:"Player",modelsLimit:20},acceptedParamsConfig:[{key:"modelName",type:Se,default:"",section:Zn,title:"Model name"}]},Fv=Ve("player started"),Uv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te;return Ye((function(){return e({effects:[Fv.effect((function(){return function(e,t,r){Js(r,Xt)((function(e){return e.models.forEach((function(e){var r=e.id;return t(ch({modelId:r}))}))}))}})),lt(Bv)]})}))};function zv(e){return zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(e)}var Vv=["modelName"];function qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qv(Object(r),!0).forEach((function(t){Gv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gv(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=zv(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wv(e){return function(e){if(Array.isArray(e))return Yv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Yv(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}J_("Player");var Hv=[ft,Gr(),Jn,Ks(),Wh(),ev,Nh,ip,kv,Uv((function(e){var t=e.effects;return{effects:[].concat(Wv(t),[Fv.effect((function(){return function(e,t){t(Qt(function(e){var t=ct(e),r=t.modelName,n=t.strict;return r&&n?{status:["public","private","groupShow","p2p","virtualPrivate","p2pVoice"]}:void 0}(e)))}})),$e.effect((function(){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var n=ct(e).modelName;n&&r(et({modelsList:n})),t.forEach((function(e){return r(e())}))}}(Fv)})),lt({acceptedParamsConfig:[{key:"nonStopPlaying",title:"Play one minute or non stop",default:!0,type:be,section:Zn},$v($v({},Sh),{},{default:Ln.ALL,enum:Object.values(Ln).filter((function(e){return"onHover"!==e}))})]})]),actions:{setParams:Zs(Fv,(function(e){var t=e.modelName,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Vv);return $v($v({},r),me(t)?{}:{modelsList:t})}))}}}))],Qv=(ca({modules:Hv}),{acceptedParamsConfig:[{key:"language",title:"Language",description:"",section:Zn,type:Ee,multiple:!1,enum:ii,default:oi}]});function Kv(e){return Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kv(e)}function Xv(){Xv=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,s=Object.create(o.prototype),a=new R(n||[]);return i(s,"_invoke",{value:O(e,r,a)}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",g="completed",m={};function y(){}function _(){}function v(){}var b={};l(b,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==r&&n.call(E,s)&&(b=E);var w=v.prototype=y.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(i,o,s,a){var u=f(e[i],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Kv(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(c).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(u.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function O(t,r,n){var i=d;return function(o,s){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var u=M(a,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=f(t,r,n);if("normal"===l.type){if(i=n.done?g:h,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=g,n.method="throw",n.arg=l.arg)}}}function M(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=f(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Kv(t)+" is not iterable")}return _.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:_,configurable:!0}),_.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},T(L.prototype),l(L.prototype,a,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new L(c(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},T(w),l(w,u,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(u&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Jv(e,t,r,n,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}var Zv=Ye(function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Jv(o,n,i,s,a,"next",e)}function a(e){Jv(o,n,i,s,a,"throw",e)}s(void 0)}))}}(Xv().mark((function e(t,r,n){return Xv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xo(t,r,n).then((function(e){return{reducer:Xe({i18n:e}),effects:[lt(Qv)]}})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()).requires("i18nPaths","window","location"),eb=Zv;function tb(e){return tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tb(e)}function rb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(r),!0).forEach((function(t){ib(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ib(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=tb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tb(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ob=Ye((function(e){var t,r,n,i=Xe({modelsApiCachedResponse:{tags:[],models:[],meta:{}}}).on(ir,(function(e){var t=e.models,r=e.tags,n=e.meta;return function(){return{modelsApiCachedResponse:{tags:r,models:t,meta:n}}}})),o=(t=function(t,r){var n=jt(t);return ms(e,t,nb(nb({},n),{},{limit:2*n.limit})).then((function(e){return r(ir(e))}))},r=3e3,function(){var e=arguments;n||(t.apply(this,e),n=!0,setTimeout((function(){n=!1}),r))}),s=nr.effect((function(){return o})),a=or.effect((function(e){var t=e.modelId;return function(e,r,n){var i=e.modelsList,o=e.modelsApiCachedResponse.models,s=function(e,t){var r=e.filter((function(e){var r=e.id;return!t.includes(r)}));return r.length?lr(r).id:null}(o,i.map((function(e){return e.id})));if(!s)return n(ir,(function(){return r(or({modelId:t}))}),!0),void r(nr());r(tr({modelId:t,replaceBy:o.find((function(e){return e.id===s}))}))}}));return{reducer:i,effects:[s,a,ja.effect((function(e){var t=e.modelId,r=e.fatal;return function(e,n){if(!ct(e).queryParams.ignoreStreamErrors){var i=e.modelsList.find((function(e){return e.id===t}));(null==i?void 0:i.snapshotUrl.includes("lovescape"))||(n(nr()),r&&n(or({modelId:t})))}}}))]}})).requires("Api"),sb=ob,ab={initialConfig:{landing:"Spot"},acceptedParamsConfig:[{key:"hideButton",title:"Hide button",description:"",section:Zn,type:be,default:!1},{key:"delay",title:"Delay",description:"",section:Zn,type:ye,default:1},{key:"closeButtonDelay",title:"Show close button delay",description:"",section:Zn,type:ye,default:5},{key:"autoclose",title:"Auto close",description:"",section:Zn,type:be,default:!0},{key:"animate",title:"Open animation",description:"",section:Zn,type:be,default:!1},{key:"width",title:"Width",description:"",section:Zn,type:ye,min:0,max:3840},{key:"height",title:"Height",description:"",section:Zn,type:ye,min:0,max:2160},{key:"limitAfterClosure",title:"Limit after closure",description:"",section:Zn,type:ye,default:void 0},{key:"placeCorner",title:"Video placement",description:"",section:Zn,type:Ee,default:zt.BottomRight,enum:Object.values(zt),multiple:!1}]};function ub(e){return ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(e)}function lb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lb(Object(r),!0).forEach((function(t){fb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fb(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ub(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ub(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ub(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function db(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}J_("Spot");var hb=Ve("change spot closable"),pb=Ve("inject"),gb=ca({modules:[].concat(function(e){return function(e){if(Array.isArray(e))return db(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return db(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?db(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Hv),[eb,sb,Ye((function(){var e,t,r=function(t){clearTimeout(e),e=setTimeout((function(){t(Vn())}),2e4)};return{reducer:Xe({spot:{closable:!1},isWidgetUnInjected:!0}).on(hb,(function(e){return function(t){return{spot:cb(cb({},t.spot),{},{closable:e})}}})).on(pb,(function(e){return{isWidgetUnInjected:!e}})),effects:[lt(ab),$e.effect((function(){return function(e,n){var i=ct(e),o=i.delay,s=i.autoclose,a=i.closeButtonDelay;setTimeout((function(){n(pb(!0)),t=setTimeout((function(){n(hb(!0))}),1e3*a),s&&r(n)}),1e3*o)}})),Vn.effect((function(){return function(r,n){n(pb(!1)),clearTimeout(t),clearTimeout(e)}}))],actions:{handleClose:function(){return function(e,t){ct(e).limitAfterClosure&&ee.set(oe.LAST_VIEWED_TIME,(new Date).toISOString()),t(Vn())}},handleTakeInterest:function(){return clearTimeout(e)},handleLostInterest:function(){return function(e,t){ct(e).autoclose&&r(t)}}}}}))])});function mb(e){return mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(e)}function yb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yb(Object(r),!0).forEach((function(t){vb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vb(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=mb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mb(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window.StripchatSpot=de(he("SCSpotScript").src,gb,(function(t,r){var n,i=t.isWidgetUnInjected,o=t.spot.closable,s={viewCamModel:(n=t.modelsList)[0],modelsList:n.slice(1)}.viewCamModel,a=ct(t),u=a.hideButton,l=a.width,c=a.height,f=a.animate,d=a.queryParams.placeCorner,h=void 0===d?zt.BottomRight:d;return i?null:e("div",{className:ge()(Wt.root,Wt[h],ts({},Wt.slideAnimation,f)),style:dt(l,c),onmouseenter:r.handleTakeInterest,onmouseleave:r.handleLostInterest},e(Zo,{model:s,hideButton:u,closable:o,actions:r}))}),(function(e){return _b(_b({},e),{},{i18nPaths:["/widgets/Spot/lang"]})}))}()}();